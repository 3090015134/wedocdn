/*! For license information please see ModelsPanel.min.js.LICENSE.txt */
(()=>{var e={d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{default:()=>b});var i=Autodesk.Viewing,n=Autodesk.Viewing.UI,o={ITEM_SELECT:"itemSelect",ITEM_VISIBILITY_CHANGED:"itemVisibibilityChanged",ITEM_MOUSE_ENTER:"itemMouseEnter",ITEM_MOUSE_LEAVE:"itemMouseLeave"};function r(e,t,o,r){n.DockingPanel.call(this,e,t,o,r),i.EventDispatcher.prototype.apply(this),this.container.classList.add("list-panel"),this.container.dockRight=!0,this.createScrollContainer({left:!1,heightAdjustment:65,marginTop:0})}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(i):o.value}},a(e,t,i||e)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}r.prototype=Object.create(n.DockingPanel.prototype),r.prototype.setItems=function(e){this.buttons=[],this.items=e,this.listDiv&&this.scrollContainer.removeChild(this.listDiv);var t=this.getDocument();this.listDiv=t.createElement("div"),this.listDiv.classList.add("itemList"),this.scrollContainer.appendChild(this.listDiv);for(var i=this,n=function(e){var n=i._getItemText?i._getItemText(e):"<no item text>",r=t.createElement("div");r.classList.add("listItem"),r.item=e,r.setAttribute("title",n),r.addEventListener("click",(function(){i.fireEvent({type:o.ITEM_SELECT,item:e})})),r.addEventListener("mouseenter",(function(){i.fireEvent({type:o.ITEM_MOUSE_ENTER,item:e}),r.classList.add("hover")})),r.addEventListener("mouseleave",(function(){i.fireEvent({type:o.ITEM_MOUSE_LEAVE,item:e}),r.classList.remove("hover")}));var s=t.createElement("span");s.innerHTML=n,s.classList.add("text");var l=t.createElement("div");if(l.classList.add("textContainer"),l.appendChild(s),r.appendChild(l),i.options.enableWarningSymbol){var a=t.createElement("span");a.classList.add("list-panel-item-warning"),r.appendChild(a),r.warnSpan=a}if(i.options.enableCheckmark){var c=t.createElement("span");c.classList.add("icon"),r.appendChild(c)}if(i.options.enableVisibilityToggle){var u=t.createElement("div");u.classList.add("visibility"),r.appendChild(u),u.addEventListener("click",(function(){var e=!i._isVisible||i._isVisible(r.item);i.fireEvent({type:o.ITEM_VISIBILITY_CHANGED,item:r.item,visible:!e}),i.updateItemStates()}))}return r},r=0;r<e.length;r++){var s=n(e[r]);this.listDiv.appendChild(s),this.buttons.push(s)}this.updateItemStates()},r.prototype.rollOverItem=function(e){for(var t=0;t<this.buttons.length;t++){var i=this.buttons[t];e(i.item)?i.classList.add("hover"):i.classList.remove("hover")}},r.prototype.updateItemStates=function(){if(this.buttons)for(var e=0;e<this.buttons.length;e++){var t=this.buttons[e];if(t.classList.remove("selected"),this._isSelected&&this._isSelected(t.item)&&t.classList.add("selected"),this.options.enableWarningSymbol){var i=this._getWarningText&&this._getWarningText(t.item);t.warnSpan.style.visibility=i?"visible":"hidden",t.warnSpan.setAttribute("title",i||"")}this.options.enableVisibilityToggle&&(t.classList.remove("dim"),!this._isVisible||this._isVisible(t.item)||t.classList.add("dim"))}},r.prototype.setItemHandlers=function(e,t,i,n){this._isSelected=e,this._getItemText=t,this._getWarningText=i,this._isVisible=n,this.updateItemStates()},n.ListPanelEvents=o,n.ListPanel=r;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,e);var t,i,n,o,r=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(o){var i=h(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function s(e,t,i,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o=r.call(this,e.container,t,i,n),n.enableVisibilityToggle=!0,o.viewer=e,o.setItemHandlers((function(e){return e.model===o.selectedModel}),(function(e){return e.name}),null,(function(e){return-1!=o.viewer.getVisibleModels().indexOf(e.model)})),o.updateModels(),o.onVisibilityToggled=o.onVisibilityToggled.bind(d(o)),o.onItemEnter=o.onItemEnter.bind(d(o)),o.onItemLeave=o.onItemLeave.bind(d(o)),o.onHoverChanged=o.onHoverChanged.bind(d(o)),o.onItemSelected=o.onItemSelected.bind(d(o)),o.onSelectionChanged=o.onSelectionChanged.bind(d(o)),o.addEventListener(Autodesk.Viewing.UI.ListPanelEvents.ITEM_VISIBILITY_CHANGED,o.onVisibilityToggled),o.onModelsChanged=function(){return o.updateModels()},o.viewer.addEventListener(Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,o.onModelsChanged),o.viewer.addEventListener(Autodesk.Viewing.MODEL_UNLOADED_EVENT,o.onModelsChanged),o.blockEvents=!1,o.modelSelectionActive=!1,o.selectionColor=new THREE.Vector4(1,1,0,.25),o}return t=s,(i=[{key:"dtor",value:function(){a(h(s.prototype),"uninitialize",this).call(this),this.setModelSelectionModeEnabled(!1),this.viewer.removeEventListener(Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,this.onModelsChanged),this.viewer.removeEventListener(Autodesk.Viewing.MODEL_UNLOADED_EVENT,this.onModelsChanged)}},{key:"registerSelectionListeners",value:function(){this.addEventListener(Autodesk.Viewing.UI.ListPanelEvents.ITEM_MOUSE_ENTER,this.onItemEnter),this.addEventListener(Autodesk.Viewing.UI.ListPanelEvents.ITEM_MOUSE_LEAVE,this.onItemLeave),this.addEventListener(Autodesk.Viewing.UI.ListPanelEvents.ITEM_SELECT,this.onItemSelected),this.viewer.addEventListener(Autodesk.Viewing.OBJECT_UNDER_MOUSE_CHANGED,this.onHoverChanged),this.viewer.addEventListener(Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,this.onSelectionChanged)}},{key:"unregisterSelectionListeners",value:function(){this.removeEventListener(Autodesk.Viewing.UI.ListPanelEvents.ITEM_MOUSE_ENTER,this.onItemEnter),this.removeEventListener(Autodesk.Viewing.UI.ListPanelEvents.ITEM_MOUSE_LEAVE,this.onItemLeave),this.removeEventListener(Autodesk.Viewing.UI.ListPanelEvents.ITEM_SELECT,this.onItemSelected),this.viewer.removeEventListener(Autodesk.Viewing.OBJECT_UNDER_MOUSE_CHANGED,this.onHoverChanged),this.viewer.removeEventListener(Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,this.onSelectionChanged)}},{key:"setModelSelectionModeEnabled",value:function(e){e!==this.modelSelectionActive&&(e||(this.selectedModel=null),e?this.registerSelectionListeners():this.unregisterSelectionListeners(),this.modelSelectionActive=e,this.updateItemStates(),this.updateColorTheming())}},{key:"setSelectedModel",value:function(e){this.blockEvents||(this.selectedModel=e,this.updateItemStates(),this.updateColorTheming(),this.blockEvents=!0,this.viewer.clearSelection(),this.blockEvents=!1)}},{key:"uninitialize",value:function(){a(h(s.prototype),"uninitialize",this).call(this)}},{key:"updateModels",value:function(){var e=this.viewer.getAllModels().map((function(e){return{name:e.getDocumentNode().getModelName(),model:e}}));e.sort((function(e,t){var i=e.name.toUpperCase(),n=t.name.toUpperCase();return i.localeCompare(n)})),this.setItems(e)}},{key:"onVisibilityToggled",value:function(e){var t=e.item.model;e.visible?this.viewer.showModel(t):this.viewer.hideModel(t)}},{key:"onItemEnter",value:function(e){var t=e.item.model;this.viewer.impl.renderer().rollOverModelId(t.id),this.viewer.impl.invalidate(!1,!1,!0)}},{key:"onItemLeave",value:function(e){this.viewer.impl.clearHighlight()}},{key:"onItemSelected",value:function(e){e.item.model===this.selectedModel?this.setSelectedModel(null):this.setSelectedModel(e.item.model)}},{key:"updateColorTheming",value:function(){if(this.selectedModel){var e=this.selectedModel.getRootId();this.viewer.setThemingColor(e,this.selectionColor,this.selectedModel,!0)}for(var t=0;t<this.items.length;t++){var i=this.items[t].model;i!==this.selectedModel&&this.viewer.clearThemingColors(i)}}},{key:"onHoverChanged",value:function(e){var t=this.viewer.impl.findModel(e.modelId);this.rollOverItem((function(e){return e.model===t})),t&&this.viewer.impl.renderer().rollOverModelId(t.id)}},{key:"onSelectionChanged",value:function(){var e=this.viewer.getAggregateSelection();if(1==e.length){var t=e[0].model;this.setSelectedModel(t)}else this.setSelectedModel(null)}}])&&l(t.prototype,i),s}(r);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function p(e,t,i,n,o,r,s){try{var l=e[r](s),a=l.value}catch(e){return void i(e)}l.done?t(a):Promise.resolve(a).then(n,o)}function E(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function y(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,Autodesk.Viewing.Extension);var t,i,n,o,r,s,l=(r=a,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(s){var i=g(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return y(this,e)});function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),l.call(this,e,t)}return t=a,i=[{key:"load",value:(n=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.panel=new f(this.viewer,"ModelsPanel","Models",this.options),this.panel.setVisible(!0);case 2:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(i,o){var r=n.apply(e,t);function s(e){p(r,i,o,s,l,"next",e)}function l(e){p(r,i,o,s,l,"throw",e)}s(void 0)}))},function(){return o.apply(this,arguments)})},{key:"unload",value:function(){this.panel&&(this.panel.uninitialize(),this.panel=null)}}],i&&E(t.prototype,i),a}();Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.ModelsPanel",b)})(),Autodesk.Extensions.ModelsPanel=t})();
//# sourceMappingURL=ModelsPanel.min.js.map