/*! For license information please see PixelCompare.min.js.LICENSE.txt */
(()=>{var t={79016:t=>{t.exports="#define OVERLAY 0\n#define SIDE_BY_SIDE 1\n#define FXAA_EDGE_SHARPNESS (8.0)\n#define FXAA_EDGE_THRESHOLD (0.125)\n#define FXAA_EDGE_THRESHOLD_MIN (0.05)\n#define FXAA_RCP_FRAME_OPT (0.5)\n#define FXAA_RCP_FRAME_OPT2 (2.0)\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float diff_threshold;\nuniform highp vec2 resolution;\nuniform int diffMode;\nuniform float colorIntensity;\nuniform bool mainModelHidden;\nuniform bool secondaryModelHidden;\nuniform vec4 visibleModelBounds;\nvarying vec2 vUv;\nuniform float splitPosition;\nuniform highp float splitLineWidth;\nuniform vec3 splitLineColor;\nuniform highp float t;\nfloat toGrayscale(vec4 v) {\n    return dot(v.rgb, vec3(0.299, 0.587, 0.114));\n}\nfloat getGrayAt(sampler2D texInput, float i, float j) {\n    vec4 tex = texture2D(texInput, vUv + resolution*vec2(i, j));\n    float gray = toGrayscale(tex);\n    return gray;\n}\nfloat getDarkestGray(float i, float j) {\n    float gray1 = mainModelHidden ? 1.0 : getGrayAt(texture1, i, j);\n    float gray2 = secondaryModelHidden ? 1.0 : getGrayAt(texture2, i, j);\n    return min(gray1, gray2);\n}\nfloat getDeltaAt(float i, float j) {\n    float gray1 = mainModelHidden ? 1.0 : getGrayAt(texture1, i, j);\n    float gray2 = secondaryModelHidden ? 1.0 : getGrayAt(texture2, i, j);\n    return gray1 - gray2;\n}\nvec4 getColorAt(float i, float j) {\n    if (mainModelHidden || secondaryModelHidden) {\n        if (vUv.x <= visibleModelBounds.x || vUv.y <= visibleModelBounds.y || vUv.x >= visibleModelBounds.z || vUv.y >= visibleModelBounds.w) {\n            if (mainModelHidden) {\n                return texture2D(texture2, vUv);\n            } else {\n                return texture2D(texture1, vUv);\n            }            \n        }\n    }\n    float maxGray = getDarkestGray(i, j);\n    float delta = getDeltaAt(i, j);\n    if (abs(delta) > diff_threshold) {\n        if (delta < 0.0) {\n            return vec4(colorIntensity, 0.0, 0.0, 1.0);\n        }\n        return vec4(0.0, 0.0, colorIntensity, 1.0);\n    }\n    return vec4(vec3(maxGray), 1.0);\n}\n#ifdef ANTI_ALIASING\n    void applyAntiAliasing() {\n        \n        float lumaNw = toGrayscale(getColorAt(-0.5, -0.5));\n        float lumaSw = toGrayscale(getColorAt(0.5, -0.5));\n        float lumaNe = toGrayscale(getColorAt(-0.5, 0.5)) + 1.0/384.0;\n        float lumaSe = toGrayscale(getColorAt(0.5, 0.5));\n        vec4 rgbaM = getColorAt(0.0, 0.0);\n        float lumaM = toGrayscale(rgbaM);\n        float lumaMax = max(max(lumaNe, lumaSe), max(lumaNw, lumaSw));\n        float lumaMin = min(min(lumaNe, lumaSe), min(lumaNw, lumaSw));\n        float lumaMaxSubMinM = max(lumaMax, lumaM) - min(lumaMin, lumaM);\n        float lumaMaxScaledClamped = max(FXAA_EDGE_THRESHOLD_MIN, lumaMax * FXAA_EDGE_THRESHOLD);\n        if (lumaMaxSubMinM < lumaMaxScaledClamped) {\n            gl_FragColor = rgbaM;\n            return;\n        }\n        float dirSwMinusNe = lumaSw - lumaNe;\n        float dirSeMinusNw = lumaSe - lumaNw;\n        vec2 dir1 = normalize(vec2(dirSwMinusNe + dirSeMinusNw, dirSwMinusNe - dirSeMinusNw));\n        vec3 rgbN1 = getColorAt((-dir1 * FXAA_RCP_FRAME_OPT).x ,(-dir1 * FXAA_RCP_FRAME_OPT).y).rgb;\n        vec3 rgbP1 = getColorAt((dir1 * FXAA_RCP_FRAME_OPT).x ,(dir1 * FXAA_RCP_FRAME_OPT).y).rgb;\n        float dirAbsMinTimesC = min(abs(dir1.x), abs(dir1.y)) * FXAA_EDGE_SHARPNESS;\n        vec2 dir2 = clamp(dir1.xy / dirAbsMinTimesC, -2.0, 2.0);\n        \n        vec3 rgbN2 = getColorAt((-dir2 * FXAA_RCP_FRAME_OPT2).x ,(-dir2 * FXAA_RCP_FRAME_OPT2).y).rgb;\n        vec3 rgbP2 = getColorAt((dir2 * FXAA_RCP_FRAME_OPT2).x ,(dir2 * FXAA_RCP_FRAME_OPT2).y).rgb;\n        vec3 rgbA = rgbN1 + rgbP1;\n        vec3 rgbB = ((rgbN2 + rgbP2) * 0.25) + (rgbA * 0.25);\n        float lumaB = toGrayscale(vec4(rgbB, 1.0));\n        float alpha = rgbaM.a;\n        \n        if ((lumaB < lumaMin) || (lumaB > lumaMax))\n            gl_FragColor = vec4(rgbA * 0.5, rgbaM.a);\n        else\n            gl_FragColor = vec4(rgbB, rgbaM.a);\n    }\n#endif\nvoid main() {\n    vec4 tex1 = texture2D(texture1, vUv);\n    \n    if (diffMode == SIDE_BY_SIDE) {\n        if (abs(vUv.x - splitPosition) <= splitLineWidth) {\n            gl_FragColor = vec4(mix(tex1.rgb, splitLineColor, t), 1.0);\n        } else {\n            vec4 tex = vUv.x < splitPosition ? tex1 : texture2D(texture2, vUv);\n            gl_FragColor = vec4(mix(tex1.rgb, tex.rgb, t), 1.0);\n        }\n    } else if (diffMode == OVERLAY) {\n        gl_FragColor = vec4(mix(tex1.rgb, getColorAt(0.0, 0.0).rgb, t), 1.0);\n        \n        #ifdef ANTI_ALIASING\n            float delta = getDeltaAt(0.0, 0.0);\n            if (abs(delta) > diff_threshold) {\n                return;\n            }\n            for (int i = -1; i <= 1; i++) {\n                for (int j = -1; j <= 1; j++) {\n                    if (i != 0 && j!= 0) {\n                        float delta = getDeltaAt(float(i), float(j));\n                        if (abs(delta) > diff_threshold) {\n                            applyAntiAliasing();\n                            return;\n                        }\n                    }\n                }\n            }\n        #endif\n    }\n}"},41372:t=>{t.exports="varying vec2 vUv;\nuniform vec2 resolution;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"},51020:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a),s=n(61667),l=n.n(s),d=new URL(n(47985),n.b),A=r()(o()),c=l()(d);A.push([t.id,'.pixelCompareFont-compare-btn:before{content:"\\e93c"}.pixelCompareFont-overlay-btn:before{content:"\\e93e"}.pixelCompareFont-sidebyside-btn:before{content:"\\e93f"}.pixelCompareFont-exit-compare-btn:before{content:"\\e93d"}.pixelCompareFont-panel-btn:before{content:"\\e940"}.pixelCompareFont-show-colors-btn:before{content:"\\e941"}.pixelCompareFont-hide-colors-btn:before{content:"\\e942"}.pixelCompareFont-move-btn:before{content:"\\e943"}.CompareUI__toolbar{z-index:5}.CompareUI__label{position:absolute;display:block;border-radius:5px;background-color:rgba(78,78,78,0.95);top:0px;font-size:12px;color:#FFFFFF;text-align:center;margin:10px;padding:10px;white-space:pre;pointer-events:none;z-index:5}.docking-panel.ComparePanel{top:25%;left:10%;width:340px;height:initial;resize:none;z-index:5}.docking-panel.ComparePanel .adsk-button{box-sizing:content-box}.docking-panel.ComparePanel .adsk-control-tooltip{bottom:auto;top:120%}.docking-panel.ComparePanel .ComparePanel__main-container{display:flex;flex-direction:column}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__buttons-container{background-color:rgba(0,0,0,0.05);padding:10px;text-align:center}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__buttons-container .adsk-button.inactive{border:1px solid #cccccc;border-radius:3px}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container{padding:10px;padding-top:0px;display:flex;flex-direction:column}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container{padding-left:5px;margin-left:-2px;margin-top:10px;border:1px solid rgba(0,0,0,0)}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container.align{border:1px solid #cccccc;border-radius:3px;background-color:rgba(0,0,0,0.05)}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-version{display:flex;width:42px;min-height:30px;border:1px solid #cccccc;border-radius:3px;background-color:rgba(0,0,0,0.05);margin-right:10px;font-weight:bold}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-visibility{display:flex;width:42px;min-height:30px;border:1px solid #cccccc;border-radius:3px;background-color:rgba(0,0,0,0.05);margin-right:10px;font-weight:bold}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-description-data{margin-right:40px}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-version-text{display:flex;justify-content:center;align-items:center;width:30px;padding-left:2px}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-color{border-radius:3px 0 0 3px;width:100%;height:100%;border-left:solid 5px transparent}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-color.blue.active{border-left:solid 5px #0696D7}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-color.red.active{border-left:solid 5px #FF0000}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-title{font-size:15px;font-weight:bold;padding-bottom:5px;padding-left:5px;word-break:break-all}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-description{font-size:13px;line-height:1.2;font-weight:300;padding:5px 0px;padding-left:5px;display:flex;flex-direction:row}@font-face{font-family:\'pixelCompareFont\';src:url('+c+') format("woff");font-weight:normal;font-style:normal}[class^="pixelCompareFont-"],[class*=" pixelCompareFont-"]{font-family:\'pixelCompareFont\';font-style:normal;font-weight:normal;font-variant:normal;line-height:1;padding-top:2px;speak:none;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}\n',"",{version:3,sources:["webpack://./extensions/PixelCompare/PixelCompareUI.scss"],names:[],mappings:"AAAA,qCACC,eAAgB,CAChB,qCAGA,eAAgB,CAChB,wCAGA,eAAgB,CAChB,0CAGA,eAAgB,CAChB,mCAGA,eAAgB,CAChB,yCAGA,eAAgB,CAChB,yCAGA,eAAgB,CAChB,kCAGA,eAAgB,CAChB,oBAGA,SAAU,CACV,kBAGG,iBAAkB,CAClB,aAAc,CACd,iBAAkB,CAClB,oCAAqC,CACrC,OAAQ,CACR,cAAe,CACf,aAAc,CACd,iBAAkB,CAClB,WAAY,CACZ,YAAa,CACb,eAAgB,CAChB,mBAAoB,CACvB,SAAU,CACV,4BAGA,OAAQ,CACR,QAAS,CACT,WAAY,CACZ,cAAe,CACf,WAAY,CACZ,SAAU,CANX,yCASQ,sBAAuB,CAT/B,kDAaQ,WAAY,CACZ,QAAS,CAdjB,0DAkBK,YAAa,CAChB,qBAAsB,CAnBxB,2FAsBG,iCAAkC,CAClC,YAAa,CACb,iBAAkB,CAxBrB,iHA2BI,wBAAyB,CACzB,iBAAkB,CA5BtB,yFAiCG,YAAa,CACb,eAAgB,CAChB,YAAa,CACb,qBAAsB,CApCzB,2HAuCI,gBAAiB,CACjB,gBAAiB,CACjB,eAAgB,CAChB,8BAA+B,CA1CnC,iIA6CK,wBAAyB,CACzB,iBAAkB,CAClB,iCAAkC,CA/CvC,sJAmDK,YAAa,CACb,UAAW,CACX,eAAgB,CAChB,wBAAyB,CACzB,iBAAkB,CAClB,iCAAkC,CAClC,iBAAkB,CAClB,gBAAiB,CA1DtB,yJA8DK,YAAa,CACb,UAAW,CACX,eAAgB,CAChB,wBAAyB,CACzB,iBAAkB,CAClB,iCAAkC,CAClC,iBAAkB,CAClB,gBAAiB,CArEtB,+JAyEK,iBAAkB,CAzEvB,2JA6EK,YAAa,CACb,sBAAuB,CACvB,kBAAmB,CACnB,UAAW,CACX,gBAAiB,CAjFtB,oJAqFK,yBAA0B,CAC1B,UAAW,CACX,WAAY,CACZ,iCAAkC,CAxFvC,gKA4FK,6BAA8B,CA5FnC,+JAgGK,6BAA8B,CAhGnC,oJAoGK,cAAe,CACf,gBAAiB,CACjB,kBAAmB,CACnB,gBAAiB,CACjB,oBAAqB,CAxG1B,0JA4GK,cAAe,CACf,eAAgB,CAChB,eAAgB,CAChB,eAAgB,CACd,gBAAiB,CACnB,YAAa,CACb,kBAAmB,CACnB,WAOD,8BAA+B,CAC/B,0DACY,CACZ,kBAAmB,CACnB,iBAAkB,CAAA,2DAIlB,8BAA+B,CAC/B,iBAAkB,CAClB,kBAAmB,CACnB,mBAAoB,CACpB,aAAc,CACd,eAAgB,CAChB,UAAW,CACX,mBAAoB,CAGpB,kCAAmC,CACnC,iCAAkC",sourcesContent:['.pixelCompareFont-compare-btn:before {\n\tcontent: "\\e93c";\n}\n\n.pixelCompareFont-overlay-btn:before {\n\tcontent: "\\e93e";\n}\n\n.pixelCompareFont-sidebyside-btn:before {\n\tcontent: "\\e93f";\n}\n\n.pixelCompareFont-exit-compare-btn:before {\n\tcontent: "\\e93d";\n}\n\n.pixelCompareFont-panel-btn:before {\n\tcontent: "\\e940";\n}\n\n.pixelCompareFont-show-colors-btn:before {\n\tcontent: "\\e941";\n}\n\n.pixelCompareFont-hide-colors-btn:before {\n\tcontent: "\\e942";\n}\n\n.pixelCompareFont-move-btn:before {\n\tcontent: "\\e943";\n}\n\n.CompareUI__toolbar {\n\tz-index: 5;\n}\n\n.CompareUI__label {\n    position: absolute;\n    display: block;\n    border-radius: 5px;\n    background-color: rgba(78,78,78,0.95);\n    top: 0px;\n    font-size: 12px;\n    color: #FFFFFF;\n    text-align: center;\n    margin: 10px;\n    padding: 10px;\n    white-space: pre;\n    pointer-events: none;\n\tz-index: 5;\n}\n\n.docking-panel.ComparePanel {\n\ttop: 25%;\n\tleft: 10%;\n\twidth: 340px;\n\theight: initial;\n\tresize: none;\n\tz-index: 5;\n\n    .adsk-button {\n        box-sizing: content-box;\n    }\n\n    .adsk-control-tooltip {\n        bottom: auto;\n        top: 120%;\n    }\n\n\t.ComparePanel__main-container {\n    \tdisplay: flex;\n\t\tflex-direction: column;\n\n        .ComparePanel__buttons-container {\n\t\t\tbackground-color: rgba(0,0,0,0.05);\n\t\t\tpadding: 10px;\n\t\t\ttext-align: center;\n\t\t\t\n\t\t\t.adsk-button.inactive {\n\t\t\t\tborder: 1px solid #cccccc;\n\t\t\t\tborder-radius: 3px;\n\t\t\t}\n        }\n\t\t\n\t\t.ComparePanel__items-container {\n\t\t\tpadding: 10px;\n\t\t\tpadding-top: 0px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\n\t\t\t.ComparePanel__document-container {\n\t\t\t\tpadding-left: 5px;\n\t\t\t\tmargin-left: -2px;\n\t\t\t\tmargin-top: 10px;\n\t\t\t\tborder: 1px solid rgba(0,0,0,0);\n\n\t\t\t\t&.align {\n\t\t\t\t\tborder: 1px solid #cccccc;\n\t\t\t\t\tborder-radius: 3px;\n\t\t\t\t\tbackground-color: rgba(0,0,0,0.05);\n\t\t\t\t}\n\t\n\t\t\t\t.ComparePanel__doc-version {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\twidth: 42px;\n\t\t\t\t\tmin-height: 30px;\n\t\t\t\t\tborder: 1px solid #cccccc;\n\t\t\t\t\tborder-radius: 3px;\n\t\t\t\t\tbackground-color: rgba(0,0,0,0.05);\n\t\t\t\t\tmargin-right: 10px;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t}\n\n\t\t\t\t.ComparePanel__doc-visibility {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\twidth: 42px;\n\t\t\t\t\tmin-height: 30px;\n\t\t\t\t\tborder: 1px solid #cccccc;\n\t\t\t\t\tborder-radius: 3px;\n\t\t\t\t\tbackground-color: rgba(0,0,0,0.05);\n\t\t\t\t\tmargin-right: 10px;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t}\n\n\t\t\t\t.ComparePanel__doc-description-data {\n\t\t\t\t\tmargin-right: 40px;\n\t\t\t\t}\n\t\n\t\t\t\t.ComparePanel__doc-version-text {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\twidth: 30px;\n\t\t\t\t\tpadding-left: 2px;\n\t\t\t\t}\n\t\n\t\t\t\t.ComparePanel__doc-color {\n\t\t\t\t\tborder-radius: 3px 0 0 3px;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tborder-left: solid 5px transparent;\n\t\t\t\t}\n\t\n\t\t\t\t.ComparePanel__doc-color.blue.active {\n\t\t\t\t\tborder-left: solid 5px #0696D7;\n\t\t\t\t}\n\t\n\t\t\t\t.ComparePanel__doc-color.red.active {\n\t\t\t\t\tborder-left: solid 5px #FF0000;\n\t\t\t\t}\n\t\n\t\t\t\t.ComparePanel__doc-title {\n\t\t\t\t\tfont-size: 15px;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tpadding-bottom: 5px;\n\t\t\t\t\tpadding-left: 5px;\n\t\t\t\t\tword-break: break-all;\n\t\t\t\t}\n\t\n\t\t\t\t.ComparePanel__doc-description {\n\t\t\t\t\tfont-size: 13px;\n\t\t\t\t\tline-height: 1.2;\n\t\t\t\t\tfont-weight: 300;\n\t\t\t\t\tpadding: 5px 0px;\n    \t\t\tpadding-left: 5px;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: row;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n@font-face {\n    font-family: \'pixelCompareFont\';\n    src: url(data:application/font-woff;charset=utf-8;base64,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\n) format(\'woff\');\n    font-weight: normal;\n    font-style: normal;\n}\n\n[class^="pixelCompareFont-"], [class*=" pixelCompareFont-"] {\n    font-family: \'pixelCompareFont\';\n    font-style: normal;\n    font-weight: normal;\n    font-variant: normal;\n    line-height: 1;\n    padding-top: 2px;\n    speak: none;\n    text-transform: none;\n\n    /* Better Font Rendering =========== */\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n}'],sourceRoot:""}]);const u=A},23645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,o,a){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(i)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(r[l]=!0)}for(var d=0;d<t.length;d++){var A=[].concat(t[d]);i&&r[A[0]]||(void 0!==a&&(void 0===A[5]||(A[1]="@layer".concat(A[5].length>0?" ".concat(A[5]):""," {").concat(A[1],"}")),A[5]=a),n&&(A[2]?(A[1]="@media ".concat(A[2]," {").concat(A[1],"}"),A[2]=n):A[2]=n),o&&(A[4]?(A[1]="@supports (".concat(A[4],") {").concat(A[1],"}"),A[4]=o):A[4]="".concat(o)),e.push(A))}},e}},61667:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},87537:t=>{"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),a="/*# ".concat(o," */"),r=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(r).concat([a]).join("\n")}return[e].join("\n")}},93379:t=>{"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var a={},r=[],s=0;s<t.length;s++){var l=t[s],d=i.base?l[0]+i.base:l[0],A=a[d]||0,c="".concat(d," ").concat(A);a[d]=A+1;var u=n(c),h={css:l[1],media:l[2],sourceMap:l[3]};-1!==u?(e[u].references++,e[u].updater(h)):e.push({identifier:c,updater:o(h,i),references:1}),r.push(c)}return r}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var a=i(t=t||[],o=o||{});return function(t){t=t||[];for(var r=0;r<a.length;r++){var s=n(a[r]);e[s].references--}for(var l=i(t,o),d=0;d<a.length;d++){var A=n(a[d]);0===e[A].references&&(e[A].updater(),e.splice(A,1))}a=l}}},90569:t=>{"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},19216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e),e}},3565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i=n.css,o=n.media,a=n.sourceMap;o?t.setAttribute("media",o):t.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(i,t)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},44589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},47985:t=>{"use strict";t.exports="data:application/font-woff;charset=utf-8;base64,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"}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var a=e[i]={id:i,exports:{}};return t[i](a,a.exports,n),a.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.b=document.baseURI||self.location.href;var i={};(()=>{"use strict";n.r(i),n.d(i,{default:()=>j});var t,e=n(41372),o=n.n(e),a=n(79016),r=n.n(a),s=Autodesk.Viewing.Private.ShaderChunks,l={uniforms:THREE.UniformsUtils.merge([s.DepthTextureUniforms,{diff_threshold:{type:"f",value:.1},texture1:{type:"t",value:null},texture2:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(1/1024,1/512)},splitPosition:{type:"f",value:0},splitLineColor:{type:"c",value:null},diffMode:{type:"i",value:0},splitLineWidth:{type:"f",value:1},colorIntensity:{type:"f",value:1},t:{type:"f",value:1},mainModelHidden:{type:"i",value:0},secondaryModelHidden:{type:"i",value:0},visibleModelBounds:{type:"v4",value:new THREE.Vector4}}]),vertexShader:o(),fragmentShader:r()};function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A={OVERLAY:"overlay",SIDE_BY_SIDE:"sidebyside"},c=(d(t={},A.OVERLAY,0),d(t,A.SIDE_BY_SIDE,1),t),u={DIFF_TOOL_DIFF_MODE_CHANGED:"diff.tool.diff.mode.changed",DIFF_TOOL_DEACTIVATED:"diff.tool.deactivated",DIFF_TOOL_MODEL_VISIBILITY_CHANGED:"diff.tool.model.visibility.changed"},h={SPLIT_LINE_MARGIN:50,SPLIT_LINE_POSITION:.5,SPLIT_LINE_WIDTH:1,SPLIT_LINE_COLOR:7580136,ANIMATION_DURATION:.3,DEFAULT_DIFF_MODE:A.OVERLAY},p="pixel_compare_control_group";function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var C=Autodesk.Viewing,m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.extension=e,this.viewer=e.viewer,this.options=e.options,this.setGlobalManager(this.viewer.globalManager),this.names=["pixelCompare"],this.splitLineMinTouchArea=Autodesk.Viewing.isMobileDevice()?44:10,this.splitLineLimit=h.SPLIT_LINE_MARGIN,this.lastDragPos=new THREE.Vector2}var e,n;return e=t,(n=[{key:"getNames",value:function(){return this.names}},{key:"getName",value:function(){return this.names[0]}},{key:"getCursor",value:function(){return this.lastMouseEvent&&this.extension.diffMode===A.SIDE_BY_SIDE&&this.intersectSplitLine(this.lastMouseEvent)?"col-resize":this.extension.changeOffsetMode?"move":null}},{key:"isActive",value:function(){return this.isActive}},{key:"activate",value:function(t){t!==this.getName()||this.isActive||(this.isActive=!0)}},{key:"deactivate",value:function(t){t===this.getName()&&this.isActive&&(this.isActive=!1)}},{key:"getRelativeX",value:function(t){var e=this.viewer.impl.getCanvasBoundingClientRect();return t.canvasX/e.width}},{key:"intersectSplitLine",value:function(t){var e=this.getRelativeX(t),n=this.viewer.impl.getCanvasBoundingClientRect().width;return Math.abs(e-this.extension.splitPosition)*n<Math.max(this.extension.splitLineWidth,this.splitLineMinTouchArea)}},{key:"handleButtonDown",value:function(t,e){return this.extension.diffMode===A.SIDE_BY_SIDE&&this.intersectSplitLine(t)?(this.draggingSplitLine=!0,!0):!(!this.extension.changeOffsetMode||Autodesk.Viewing.Private.isRightClick(t,this.viewer.navigation)||(this.draggingOffset=!0,this.lastDragPos.set(t.canvasX,t.canvasY),0))}},{key:"handleButtonUp",value:function(t,e){var n=!1;return this.extension.diffMode===A.SIDE_BY_SIDE&&(n=this.draggingSplitLine,this.draggingSplitLine=!1),this.draggingOffset&&(this.draggingOffset=!1,n=!0),n}},{key:"handleMouseMove",value:function(t){var e=!1;if(this.lastMouseEvent=t,this.draggingSplitLine&&this.extension.diffMode===A.SIDE_BY_SIDE){var n=this.getRelativeX(t),i=this.viewer.impl.getCanvasBoundingClientRect().width,o=n*i;o>=this.splitLineLimit&&o<=i-this.splitLineLimit&&this.extension.setSplitPosition(n),e=!0}if(this.draggingOffset){var a=new THREE.Vector2(t.canvasX,t.canvasY);this.translateSecondaryModel(a.clone().sub(this.lastDragPos)),this.lastDragPos=a,e=!0}return e}},{key:"handleKeyDown",value:function(t,e){if(this.extension.changeOffsetMode){var n;switch(e){case Autodesk.Viewing.KeyCode.LEFT:case Autodesk.Viewing.KeyCode.a:n=new THREE.Vector3(-1,0,0);break;case Autodesk.Viewing.KeyCode.RIGHT:case Autodesk.Viewing.KeyCode.d:n=new THREE.Vector3(1,0,0);break;case Autodesk.Viewing.KeyCode.UP:case Autodesk.Viewing.KeyCode.w:n=new THREE.Vector3(0,-1,0);break;case Autodesk.Viewing.KeyCode.DOWN:case Autodesk.Viewing.KeyCode.s:n=new THREE.Vector3(0,1,0)}return!!n&&(this.translateSecondaryModel(n),!0)}}},{key:"translateSecondaryModel",value:function(t){var e=this.viewer.clientToWorld(t.x,t.y,!1,!0).point,n=this.viewer.clientToWorld(0,0,!1,!0).point,i=e.sub(n);this.extension.translateSecondaryModel(i)}},{key:"handleGesture",value:function(t){switch(t.type){case"dragstart":return this.handleButtonDown(t);case"dragmove":return this.handleMouseMove(t);case"dragend":return this.handleButtonUp(t)}return!1}}])&&f(e.prototype,n),t}();C.GlobalManagerMixin.call(m.prototype);var g=n(93379),v=n.n(g),B=n(7795),b=n.n(B),y=n(90569),w=n.n(y),x=n(3565),k=n.n(x),M=n(19216),E=n.n(M),_=n(44589),I=n.n(_),P=n(51020),D={};function S(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}D.styleTagTransform=I(),D.setAttributes=k(),D.insert=w().bind(null,"head"),D.domAPI=b(),D.insertStyleElement=E(),v()(P.Z,D),P.Z&&P.Z.locals&&P.Z.locals;var T=Autodesk.Viewing,V=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.extension=e,this.viewer=e.viewer,this.options=e.options,this.viewerContainer=this.viewer.container,this.setGlobalManager(this.viewer.globalManager)}var e,n;return e=t,(n=[{key:"createUI",value:function(){var t=this,e=this.getDocument();this.documents=[this.extension.mainModelInfo,this.extension.secondaryModelInfo];var n=Autodesk.Viewing.i18n.translate("Compared Documents");this.panel=new Autodesk.Viewing.UI.DockingPanel(this.viewerContainer,"ComparePanel",n,{addFooter:!1}),this.panel.container.classList.add("ComparePanel");var i=this.panel.createScrollContainer();this.mainContainer=e.createElement("div"),this.mainContainer.className="ComparePanel__main-container",this.createButtonsContainer(),this.itemsContainer=e.createElement("div"),this.itemsContainer.className="ComparePanel__items-container",this.mainContainer.appendChild(this.itemsContainer),this.colorStrips=[],this.documentContainers=[],this.visibilityButtons=[],this.labels=[],this.colorButtonStateBackup=void 0,this.documents.forEach((function(e,n){t.createDocumentContainer(e,n)})),this.onDiffModeChanged(),i.appendChild(this.mainContainer),this.panel.setVisible(!0),this.toolbarVisibilityBackup={},this.addToolbar(),this.toggleColorStrips(!0),this.panel.addVisibilityListener((function(e){var n=e?Autodesk.Viewing.UI.Button.State.ACTIVE:Autodesk.Viewing.UI.Button.State.INACTIVE;t.toolbarControls.showPanelButton.setState(n);var i=e?"Close Panel":"Open Panel";t.toolbarControls.showPanelButton.setToolTip(Autodesk.Viewing.i18n.t(i))})),this.onDiffModeChangedBinded=this.onDiffModeChanged.bind(this),this.updateVisibilityButtonsBinded=this.updateVisibilityButtons.bind(this),this.viewer.addEventListener(u.DIFF_TOOL_DIFF_MODE_CHANGED,this.onDiffModeChangedBinded),this.viewer.addEventListener(u.DIFF_TOOL_MODEL_VISIBILITY_CHANGED,this.updateVisibilityButtonsBinded)}},{key:"destroyUI",value:function(){this.panel.uninitialize(),this.hadToolbar?this.toolbar.removeControl(p):(this.viewerContainer.removeChild(this.toolbar.container),this.viewer.toolbar=void 0),this.toolbar=null,this.clearLabels(),this.colorStrips=null,this.documentContainer=null,this.documents=null,this.colorButtonStateBackup=void 0,this.restoreLMVToolbar(),this.toolbarVisibilityBackup={},this.viewer.removeEventListener(u.DIFF_TOOL_DIFF_MODE_CHANGED,this.onDiffModeChangedBinded),this.viewer.removeEventListener(u.DIFF_TOOL_MODEL_VISIBILITY_CHANGED,this.updateVisibilityButtonsBinded)}},{key:"hideLMVToolbar",value:function(){var t=this,e=this.viewer.getToolbar&&this.viewer.getToolbar();e&&e._controls.forEach((function(e){t.toolbarVisibilityBackup[e.getId()]=e.isVisible(),e.getId()!==Autodesk.Viewing.TOOLBAR.NAVTOOLSID&&e.setVisible(!1)}))}},{key:"restoreLMVToolbar",value:function(){var t=this,e=this.viewer.getToolbar&&this.viewer.getToolbar();e&&e._controls.forEach((function(e){e.setVisible(t.toolbarVisibilityBackup[e.getId()])}))}},{key:"createButtonsContainer",value:function(){var t=this.getDocument().createElement("div");t.className="ComparePanel__buttons-container",this.mainContainer.appendChild(t),this.colorButton=this.createColorButton(),t.appendChild(this.colorButton.container),this.moveButton=this.createMoveButton(),t.appendChild(this.moveButton.container)}},{key:"toggleColorStrips",value:function(t){this.colorStrips.forEach((function(e){t?e.classList.add("active"):e.classList.remove("active")})),this.extension.changeColorIntensity(t?1:0)}},{key:"colorButtonOnClick",value:function(){this.colorButton.getState()===Autodesk.Viewing.UI.Button.State.ACTIVE?(this.toggleColorStrips(!1),this.colorButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE),this.colorButton.setIcon("pixelCompareFont-show-colors-btn"),this.colorButton.setToolTip(Autodesk.Viewing.i18n.translate("Show colors"))):(this.toggleColorStrips(!0),this.colorButton.setState(Autodesk.Viewing.UI.Button.State.ACTIVE),this.colorButton.setIcon("pixelCompareFont-hide-colors-btn"),this.colorButton.setToolTip(Autodesk.Viewing.i18n.translate("Hide colors")))}},{key:"createColorButton",value:function(){var t=new Autodesk.Viewing.UI.Button("compare-panel-color-button");return t.setIcon("pixelCompareFont-show-colors-btn"),t.setToolTip(Autodesk.Viewing.i18n.translate("Show colors")),t.addEventListener("click",this.colorButtonOnClick.bind(this)),t.setState(Autodesk.Viewing.UI.Button.State.ACTIVE),t}},{key:"isMoveActive",value:function(){return this.moveButton&&this.moveButton.getState()===Autodesk.Viewing.UI.Button.State.ACTIVE}},{key:"moveButtonOnClick",value:function(){var t=this.moveButton.getState();t===Autodesk.Viewing.UI.Button.State.INACTIVE?(this.moveButton.setState(Autodesk.Viewing.UI.Button.State.ACTIVE),this.documentContainers[0].classList.add("align"),this.extension.setChangeOffsetMode(!0),this.moveButton.setToolTip(Autodesk.Viewing.i18n.translate("Finish align"))):t===Autodesk.Viewing.UI.Button.State.ACTIVE&&(this.moveButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE),this.extension.setChangeOffsetMode(!1),this.documentContainers[0].classList.remove("align"),this.moveButton.setToolTip(Autodesk.Viewing.i18n.translate("Align")))}},{key:"createMoveButton",value:function(){var t=new Autodesk.Viewing.UI.Button("compare-panel-move-button");return t.setIcon("pixelCompareFont-move-btn"),t.setToolTip(Autodesk.Viewing.i18n.translate("Align")),t.addEventListener("click",this.moveButtonOnClick.bind(this)),t}},{key:"createDocumentContainer",value:function(t,e){var n=this,i=this.getDocument(),o=i.createElement("div");o.className="ComparePanel__document-container",this.itemsContainer.appendChild(o),this.documentContainers.push(o);var a=i.createElement("div");a.className="ComparePanel__doc-color",a.classList.add(["red","blue"][e]),o.appendChild(a),this.colorStrips.push(a);var r=i.createElement("div");r.className="ComparePanel__doc-title";var s=t.title&&"".concat(t.title," ").concat(this.getFormattedVersionLabel(t));r.textContent=s||"".concat(Autodesk.Viewing.i18n.translate("Document")," ").concat(e+1),a.appendChild(r);var l=i.createElement("div");l.className="ComparePanel__doc-description treeview",a.appendChild(l);var d=i.createElement("div");if(d.className="ComparePanel__doc-description-data",l.appendChild(d),t.creator&&t.creationTime){var A=i.createElement("div");A.textContent="".concat(Autodesk.Viewing.i18n.translate("Uploaded By"),": ").concat(t.creator),d.appendChild(A);var c=i.createElement("div"),u=t.creationTime;c.textContent="".concat(Autodesk.Viewing.i18n.translate("At"),": ").concat(u),d.appendChild(c)}if(t.issuanceDate){var h=i.createElement("div");h.textContent="".concat(Autodesk.Viewing.i18n.translate("Issuance date"),": ").concat(t.issuanceDate),d.appendChild(h)}var p=i.createElement("div");p.className="visibility",p.id="pixelCompare-visibility-button-".concat(e),p.addEventListener("click",(function(){0===e?n.extension.changeMainModelVisibility(!n.extension.getMainModelVisibility()):n.extension.changeSecondaryModelVisibility(!n.extension.getSecondaryModelVisibility())}));var f=i.createElement("div");f.appendChild(p),this.visibilityButtons.push(f),l.appendChild(f)}},{key:"clearLabels",value:function(){var t=this;this.labels.forEach((function(e){t.viewerContainer.removeChild(e)})),this.labels=[]}},{key:"getFormattedVersionLabel",value:function(t){var e=t.version&&"v".concat(t.version),n=t.versionSet&&"(".concat(t.versionSet,")");return e||n||""}},{key:"onDiffModeChanged",value:function(){var t=this,e=function(e){if(t.documents[e].title){var n=t.getFormattedVersionLabel(t.documents[e]);return"".concat(t.documents[e].title," ").concat(n)}return"".concat(Autodesk.Viewing.i18n.translate("Document")," ").concat(e+1)},n=["left","right"];if(this.clearLabels(),this.extension.getDiffMode()===A.SIDE_BY_SIDE){this.documents.forEach((function(i,o){t.createLabel(e(o),n[o])}));var i=this.colorButton.getState();i!==Autodesk.Viewing.UI.Button.State.DISABLED&&(this.colorButtonStateBackup=i),i===Autodesk.Viewing.UI.Button.State.ACTIVE&&this.colorButtonOnClick(),this.colorButton.setState(Autodesk.Viewing.UI.Button.State.DISABLED)}else this.createLabel("".concat(e(0)," vs. ").concat(e(1)),"left"),void 0!==this.colorButtonStateBackup&&(this.colorButtonStateBackup===Autodesk.Viewing.UI.Button.State.ACTIVE&&this.colorButtonOnClick(),this.colorButton.setState(this.colorButtonStateBackup));this.updateVisibilityButtons()}},{key:"updateVisibilityButtons",value:function(){for(var t=0;t<=1;t++)this.visibilityButtons[t].className=this.extension.modelHiddenMap[t]?"dim":"",this.visibilityButtons[t].style.opacity=this.extension.getDiffMode()===A.SIDE_BY_SIDE?.3:1}},{key:"createLabel",value:function(t,e){var n=this.getDocument().createElement("div");n.className="CompareUI__label",n.textContent=t,"left"===e?n.style.left="0px":n.style.right="0px",this.viewerContainer.appendChild(n),this.labels.push(n)}},{key:"sideBySideButtonOnClick",value:function(){this.toolbarControls.sideBySideButton.getState()===Autodesk.Viewing.UI.Button.State.INACTIVE&&(this.toolbarControls.sideBySideButton.setState(Autodesk.Viewing.UI.Button.State.ACTIVE),this.showDiffButton.setIcon("pixelCompareFont-sidebyside-btn"),this.extension.setDiffMode(A.SIDE_BY_SIDE),this.isMoveActive()&&this.moveButtonOnClick()),this.showDiffButton.onClick=this.showDiffButton.arrowButton.onClick}},{key:"overlayButtonOnClick",value:function(){this.toolbarControls.overlayButton.getState()===Autodesk.Viewing.UI.Button.State.INACTIVE&&(this.toolbarControls.overlayButton.setState(Autodesk.Viewing.UI.Button.State.ACTIVE),this.showDiffButton.setIcon("pixelCompareFont-overlay-btn"),this.extension.setDiffMode(A.OVERLAY)),this.showDiffButton.onClick=this.showDiffButton.arrowButton.onClick}},{key:"showPanelOnClick",value:function(){var t=this.panel.isVisible();this.panel.setVisible(!t)}},{key:"exitButtonOnClick",value:function(){this.toolbarControls.exitButton.getState()===Autodesk.Viewing.UI.Button.State.INACTIVE?(this.toolbarControls.exitButton.setState(Autodesk.Viewing.UI.Button.State.ACTIVE),this.extension.deactivate()):this.toolbarControls.exitButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE)}},{key:"addToolbar",value:function(){this.hadToolbar=!!this.viewer.getToolbar(),this.hadToolbar||(this.viewer._createToolbar(),this.viewer.loadExtension("Autodesk.DefaultTools.NavTools",this.viewer.config)),this.hideLMVToolbar(),this.toolbar=this.viewer.getToolbar(),this.toolbarControls={},this.viewerToolbarDiffGroup=new Autodesk.Viewing.UI.ControlGroup(p),this.toolbar.addControl(this.viewerToolbarDiffGroup),this.toolbar.container.classList.add("CompareUI__toolbar"),this.viewerContainer.appendChild(this.toolbar.container),this.showDiffButton=new Autodesk.Viewing.UI.ComboButton("diff-tool-button-combo"),this.showDiffButton.setIcon("pixelCompareFont-overlay-btn"),this.showDiffButton.setToolTip(Autodesk.Viewing.i18n.translate("Show Differences")),this.showDiffButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE),this.showDiffButton.setDisplay("block"),this.viewerToolbarDiffGroup.addControl(this.showDiffButton),this.toolbarControls.sideBySideButton=new Autodesk.Viewing.UI.Button("diff-tool-button-sidebyside-diff"),this.toolbarControls.sideBySideButton.setIcon("pixelCompareFont-sidebyside-btn"),this.toolbarControls.sideBySideButton.setToolTip(Autodesk.Viewing.i18n.translate("Side by Side")),this.toolbarControls.sideBySideButton.onClick=this.sideBySideButtonOnClick.bind(this),this.showDiffButton.addControl(this.toolbarControls.sideBySideButton),this.toolbarControls.overlayButton=new Autodesk.Viewing.UI.Button("diff-tool-button-overlay-diff"),this.toolbarControls.overlayButton.setIcon("pixelCompareFont-overlay-btn"),this.toolbarControls.overlayButton.setToolTip(Autodesk.Viewing.i18n.translate("Overlay")),this.toolbarControls.overlayButton.onClick=this.overlayButtonOnClick.bind(this),this.showDiffButton.addControl(this.toolbarControls.overlayButton),this.extension.getDiffMode()===A.SIDE_BY_SIDE?this.toolbarControls.sideBySideButton.onClick():this.toolbarControls.overlayButton.onClick(),this.toolbarControls.showPanelButton=new Autodesk.Viewing.UI.Button("diff-tool-button-changes"),this.toolbarControls.showPanelButton.setIcon("pixelCompareFont-panel-btn"),this.toolbarControls.showPanelButton.onClick=this.showPanelOnClick.bind(this),this.toolbarControls.showPanelButton.setToolTip(Autodesk.Viewing.i18n.translate("Close Panel")),this.toolbarControls.showPanelButton.setState(Autodesk.Viewing.UI.Button.State.ACTIVE),this.viewerToolbarDiffGroup.addControl(this.toolbarControls.showPanelButton),this.toolbarControls.exitButton=new Autodesk.Viewing.UI.Button("diff-tool-button-exit"),this.toolbarControls.exitButton.setIcon("pixelCompareFont-exit-compare-btn"),this.toolbarControls.exitButton.setToolTip(Autodesk.Viewing.i18n.translate("Exit comparing")),this.toolbarControls.exitButton.onClick=this.exitButtonOnClick.bind(this),this.viewerToolbarDiffGroup.addControl(this.toolbarControls.exitButton)}}])&&S(e.prototype,n),t}();function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function U(t,e){return U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},U(t,e)}function O(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?G(t):e}function G(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}T.GlobalManagerMixin.call(V.prototype);var Y=Autodesk.Viewing.Private.ShaderPass,j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}(r,Autodesk.Viewing.Extension);var e,n,i,o,a=(i=r,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=N(i);if(o){var n=N(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return O(this,t)});function r(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return L(this,r),(e=a.call(this,t,n)).viewer=t,e.options=n,e.mainModel=null,e.secondaryModel=null,e.secondaryRenderContext=null,e.mainModelVisibilityBackup=!1,e.secondaryModelVisibilityBackup=!1,e.splitPosition=h.SPLIT_LINE_POSITION,e.splitLineWidth=h.SPLIT_LINE_WIDTH,e.splitLineColor=new THREE.Color(h.SPLIT_LINE_COLOR),e.duration=h.ANIMATION_DURATION,e.transitionVal=0,e.changeOffsetMode=!1,e.diffMode=n.diffMode,e.defaultDiffMode=h.DEFAULT_DIFF_MODE,e.colorIntensity=1,e.modelHiddenMap={},e.tool=new m(G(e)),e.viewer.config.headlessViewer||(e.compareUI=new V(G(e))),e.diffPass=new Y(l),e.renderer=e.viewer.impl.renderer(),e.glrenderer=e.viewer.impl.glrenderer(),e.frustum=new Autodesk.Viewing.Private.FrustumIntersector,e.renderSecondaryModelBinded=e.renderSecondaryModel.bind(G(e)),e.initDiffBinded=e.initDiff.bind(G(e)),e.onResizeBinded=e.onResize.bind(G(e)),e}return e=r,n=[{key:"getModel",value:function(t){return"number"==typeof t?this.viewer.impl.findModel(t,!0):t}},{key:"compareTwoModels",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.getModel(t)===this.mainModel&&this.getModel(e)===this.secondaryModel||this.deactivate().then((function(){n.mainModel=n.getModel(t),n.secondaryModel=n.getModel(e),n.mainModelInfo=i,n.secondaryModelInfo=o,n.activate()}))}},{key:"unload",value:function(){return this.deactivate(),!0}},{key:"activate",value:function(){return this.mainModel&&this.secondaryModel?this.isActive()?void 0:(this.initDiff(),this.viewer.toolController.registerTool(this.tool),this.viewer.toolController.activateTool(this.tool.getName()),!0):(console.warn("Pixel Compare requires two models. Use compareTwoModels and supply the models."),!1)}},{key:"deactivate",value:function(){var t=this;return this.isActive()?new Promise((function(e){t.exitPreviousDiffMode((function(){t.activeStatus=!1,t.diffMode=null,t.viewer.impl.setPlacementTransform(t.secondaryModel,t.secondaryModelTransformBackup),t.mainModelVisibilityBackup||t.viewer.hideModel(t.mainModel),t.options.restoreModelVisibilityOnExit&&t.secondaryModelVisibilityBackup&&t.viewer.showModel(t.secondaryModel),t.viewer.toolController.deregisterTool(t.tool),t.viewer.removeEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT,t.renderSecondaryModelBinded),t.viewer.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT,t.onResizeBinded),t.clearColorTopBackup&&t.clearColorBottomBackup&&t.viewer.setBackgroundColor(t.clearColorTopBackup.x,t.clearColorTopBackup.y,t.clearColorTopBackup.z,t.clearColorBottomBackup.x,t.clearColorBottomBackup.y,t.clearColorBottomBackup.z),t.viewer.impl.toggleSwapBlackAndWhite(t.swapBlackAndWhiteBackup),t.cleanRenderContext(),t.invalidate(),t.compareUI&&t.compareUI.destroyUI(),t.mainModel=null,t.secondaryModel=null,t.secondaryModelTransformBackup=null,t.mainModelInfo=null,t.secondaryModelInfo=null,t.modelHiddenMap={},t.viewer.dispatchEvent({type:u.DIFF_TOOL_DEACTIVATED}),e()}))})):Promise.resolve()}},{key:"isModelVisible",value:function(t){return!!this.viewer.impl.findModel(t.id)}},{key:"alignSecondaryModel",value:function(){var t=this.mainModel.getBoundingBox(!1,!0),e=this.secondaryModel.getBoundingBox(!1,!0);this.modelsRatio=t.getSize(new THREE.Vector3).divide(e.getSize(new THREE.Vector3));var n=(new THREE.Matrix4).makeTranslation(-e.min.x,-e.min.y,0),i=(new THREE.Matrix4).makeScale(this.modelsRatio.x,this.modelsRatio.y,this.modelsRatio.y),o=(new THREE.Matrix4).makeTranslation(t.min.x,t.min.y,0),a=this.secondaryModel.getPlacementTransform(),r=o.multiply(i).multiply(n).multiply(a);this.viewer.impl.setPlacementTransform(this.secondaryModel,r)}},{key:"initDiff",value:function(){this.viewer.impl.modelQueue().getModels().concat(this.viewer.impl.modelQueue().getHiddenModels()).some((function(t){return!t.isLoadDone()}))?this.viewer.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,this.initDiffBinded,{once:!0}):(this.activeStatus=!0,this.mainModelVisibilityBackup=this.isModelVisible(this.mainModel),this.secondaryModelVisibilityBackup=this.isModelVisible(this.secondaryModel),this.mainModelVisibilityBackup||this.viewer.showModel(this.mainModel),this.secondaryModelVisibilityBackup&&this.viewer.hideModel(this.secondaryModel),this.secondaryModelTransformBackup=this.secondaryModel.getPlacementTransform().clone(),this.alignSecondaryModel(),this.clearColorTopBackup=this.viewer.impl.clearColorTop.clone().multiplyScalar(255),this.clearColorBottomBackup=this.viewer.impl.clearColorBottom.clone().multiplyScalar(255),(this.mainModel.getMetadata("page_dimensions","hide_paper")||this.secondaryModel.getMetadata("page_dimensions","hide_paper"))&&this.viewer.setBackgroundColor(255,255,255,255,255,255),this.setDiffMode(this.diffMode||this.defaultDiffMode),this.swapBlackAndWhiteBackup=this.viewer.impl.swapBlackAndWhite,this.viewer.impl.toggleSwapBlackAndWhite(!1),this.compareUI&&this.compareUI.createUI(),this.viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT,this.renderSecondaryModelBinded),this.viewer.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT,this.onResizeBinded))}},{key:"renderDiff",value:function(){var t=this.glrenderer.getPixelRatio(),e={x:1/(this.viewer.canvas.clientWidth*t),y:1/(this.viewer.canvas.clientHeight*t)};this.diffPass.uniforms.texture1.value=this.renderer.getColorTarget(),this.diffPass.uniforms.diffMode.value=c[this.diffMode],this.diffPass.uniforms.splitPosition.value=this.splitPosition,this.diffPass.uniforms.splitLineWidth.value=this.splitLineWidth/this.viewer.getCamera().clientWidth,this.diffPass.uniforms.splitLineColor.value=this.splitLineColor,this.diffPass.uniforms.t.value=this.transitionVal,this.diffPass.uniforms.resolution.value=e,this.diffPass.uniforms.colorIntensity.value=this.colorIntensity,this.diffPass.uniforms.mainModelHidden.value=this.modelHiddenMap[0],this.diffPass.uniforms.secondaryModelHidden.value=this.modelHiddenMap[1],this.modelHiddenMap[1]?this.diffPass.uniforms.visibleModelBounds.value=this.getModelNormalizedProjectedBounds(this.mainModel):this.modelHiddenMap[0]&&(this.diffPass.uniforms.visibleModelBounds.value=this.getModelNormalizedProjectedBounds(this.secondaryModel)),this.renderer.presentBuffer(this.diffPass)}},{key:"hideAllModels",value:function(){var t=this;this.viewer.getVisibleModels().forEach((function(e){t.viewer.hideModel(e.id)}))}},{key:"cleanRenderContext",value:function(){this.secondaryRenderContext&&this.secondaryRenderContext.cleanup(),this.secondaryRenderContext=null}},{key:"getModelNormalizedProjectedBounds",value:function(t){var e=t.getBoundingBox(!1,!0),n=this.worldToClient(e.min),i=this.worldToClient(e.max);return new THREE.Vector4(n.x,n.y,i.x,i.y)}},{key:"worldToClient",value:function(t){var e=this.viewer.getCamera(),n=t.clone().project(e);return new THREE.Vector3((n.x+1)/2,(n.y+1)/2,0)}},{key:"onResize",value:function(){this.cleanRenderContext()}},{key:"renderSecondaryModel",value:function(){var t=this,e=this.viewer.impl.getCanvasBoundingClientRect(),n=this.glrenderer.getPixelRatio(),i=e.width*n,o=e.height*n,a={returnAsTarget:!0,models:[this.secondaryModel],renderContext:this.secondaryRenderContext,dontWaitForLeafletTiles:!0};if(this.secondaryModel.isLeaflet()){var r=this.viewer.getCamera();this.frustum.reset(r),this.secondaryModel.getIterator().reset(this.frustum,r)||this.invalidate()}Autodesk.Viewing.ScreenShot.getScreenShot(i,o,(function(e,n){t.diffPass.uniforms.texture2.value=n,t.secondaryRenderContext=e,t.renderDiff()}),a,this.viewer.impl)}},{key:"invalidate",value:function(){this.viewer.impl.invalidate(!0,!0,!1)}},{key:"setSplitPosition",value:function(t){this.splitPosition=t,this.invalidate()}},{key:"getSplitPosition",value:function(){return this.splitPosition}},{key:"setDiffMode",value:function(t){var e=this;this.isActive()?this.diffMode===t&&0!==this.transitionVal||this.exitPreviousDiffMode((function(){e.enterNewDiffMode(t)})):console.warn("Pixel Compare is not active.")}},{key:"exitPreviousDiffMode",value:function(t,e){var n=this;e||null===this.diffMode||void 0===this.diffMode?(this.transitionVal=0,t()):Autodesk.Viewing.Private.fadeValue(this.transitionVal,0,this.duration,(function(t){n.transitionVal=t,n.invalidate()}),t)}},{key:"enterNewDiffMode",value:function(t,e){var n=this;this.diffMode=t,this.viewer.dispatchEvent({type:u.DIFF_TOOL_DIFF_MODE_CHANGED,newDiffMode:this.diffMode}),e&&(this.transitionVal=1,this.invalidate()),t===A.SIDE_BY_SIDE&&(this.changeMainModelVisibility(!0),this.changeSecondaryModelVisibility(!0)),Autodesk.Viewing.Private.fadeValue(this.transitionVal,1,this.duration,(function(t){n.transitionVal=t,n.invalidate()}))}},{key:"getDiffMode",value:function(){return this.diffMode}},{key:"setSplitLineWidth",value:function(t){this.splitLineWidth=t,this.invalidate()}},{key:"setSplitLineColor",value:function(t){this.splitLineColor=new THREE.Color(t),this.invalidate()}},{key:"setChangeOffsetMode",value:function(t){this.changeOffsetMode=t}},{key:"resetOffset",value:function(){this.alignSecondaryModel()}},{key:"changeColorIntensity",value:function(t){this.colorIntensity=t,this.invalidate()}},{key:"translateSecondaryModel",value:function(t){var e=(new THREE.Matrix4).makeTranslation(t.x,t.y,0),n=this.secondaryModel.getPlacementTransform().clone();this.viewer.impl.setPlacementTransform(this.secondaryModel,e.multiply(n))}},{key:"changeModelVisibility",value:function(t,e){(e||this.getDiffMode()!==A.SIDE_BY_SIDE)&&(this.modelHiddenMap[t]=!e,!e&&this.modelHiddenMap[1-t]&&this.changeModelVisibility(1-t,!0),this.viewer.dispatchEvent({type:u.DIFF_TOOL_MODEL_VISIBILITY_CHANGED}),this.invalidate())}},{key:"changeMainModelVisibility",value:function(t){this.changeModelVisibility(0,t)}},{key:"changeSecondaryModelVisibility",value:function(t){this.changeModelVisibility(1,t)}},{key:"getMainModelVisibility",value:function(){return!this.modelHiddenMap[0]}},{key:"getSecondaryModelVisibility",value:function(){return!this.modelHiddenMap[1]}}],n&&R(e.prototype,n),r}(),H=AutodeskNamespace("Autodesk.Viewing.PixelCompare");H.DIFF_MODES=Object.assign({},A),H.EVENTS=Object.assign({},u),Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.Viewing.PixelCompare",j)})(),Autodesk.Extensions.PixelCompare=i})();
//# sourceMappingURL=PixelCompare.min.js.map