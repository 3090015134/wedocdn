/*!
 * LMV v7.17.1
 * 
 * Copyright 2020 Autodesk, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 * 
 * Autodesk Forge Viewer Usage Limitations:
 * 
 * The Autodesk Forge viewer can only be used to view files generated by
 * Autodesk Forge services. The Autodesk Forge Viewer JavaScript must be
 * delivered from an Autodesk hosted URL.
 */
Autodesk.Extensions.StandardSurface=function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=599)}({0:function(e,t){e.exports=THREE},11:function(e,t,r){"use strict";r.d(t,"a",(function(){return we}));var a=r(0),n=r(17),o=r.n(n),i=r(18),s=r.n(i),l=r(19),c=r.n(l),u=r(20),f=r.n(u),d=r(21),p=r.n(d),m=r(22),h=r.n(m),v=r(23),_=r.n(v),g=r(24),y=r.n(g),x=r(25),S=r.n(x),b=r(26),E=r.n(b),P=r(27),w=r.n(P),O=r(28),R=r.n(O),T=r(29),A=r.n(T),M=r(30),D=r.n(M),N=r(31),I=r.n(N),F=r(32),L=r.n(F),C=r(33),U=r.n(C),V=r(34),z=r.n(V),k=r(35),$=r.n(k),j=r(36),B=r.n(j),H=r(37),W=r.n(H),G=r(38),q=r.n(G),X=r(39),Q=r.n(X),Y=r(40),Z=r.n(Y),K=r(41),J=r.n(K),ee=r(42),te=r.n(ee),re=r(43),ae=r.n(re),ne=r(44),oe=r.n(ne),ie=r(45),se=r.n(ie),le=r(46),ce=r.n(le),ue=r(47),fe=r.n(ue),de={cutplanes:{type:"v4v",value:[]},hatchParams:{type:"v2",value:new a.Vector2(1,10)},hatchTintColor:{type:"c",value:new a.Color(16777215)},hatchTintIntensity:{type:"f",value:1}},pe={dbId:{type:"v3",value:new a.Vector3(0,0,0)},modelId:{type:"v3",value:new a.Vector3(0,0,0)}},me={themingColor:{type:"v4",value:new a.Vector4(0,0,0,0)}},he={shadowESMConstant:{type:"f",value:0}},ve=a.UniformsUtils.merge([{shadowMap:{type:"t",value:null},shadowMapSize:{type:"v2",value:new a.Vector2(0,0)},shadowBias:{type:"f",value:0},shadowDarkness:{type:"f",value:0},shadowMatrix:{type:"m4",value:new a.Matrix4},shadowLightDir:{type:"v3",value:new a.Vector3}},he]),_e={view_size:{type:"v2",value:new a.Vector2(640,480)}},ge={tDepth:{type:"t",value:null},projInfo:{type:"v4",value:new a.Vector4},isOrtho:{type:"f",value:0},worldMatrix_mainPass:{type:"m4",value:new a.Matrix4}},ye={};for(var xe in a.ShaderChunk)ye[xe]=a.ShaderChunk[xe];ye.pack_depth=o.a,ye.depth_texture=s.a,ye.tonemap=c.a,ye.ordered_dither=f.a,ye.cutplanes=p.a,ye.pack_normals=h.a,ye.hatch_pattern=_.a,ye.env_sample=y.a,ye.id_decl_vert=S.a,ye.id_vert=E.a,ye.id_decl_frag=w.a,ye.id_frag=R.a,ye.final_frag=A.a,ye.theming_decl_frag=D.a,ye.theming_frag=I.a,ye.instancing_decl_vert=L.a,ye.shadowmap_decl_common=U.a,ye.shadowmap_decl_vert=z.a,ye.shadowmap_vert=$.a,ye.shadowmap_decl_frag=B.a,ye.float3_average=W.a,ye.line_decl_common=q.a,ye.prism_wood=Q.a,ye.prism_glazing=Z.a,ye.prism_transparency=J.a,ye.normal_map=te.a,ye.decl_point_size=ae.a,ye.point_size=oe.a,ye.wide_lines_decl=se.a,ye.wide_lines_vert=ce.a,ye.hsv=fe.a;var Se={};function be(e,t,r,a){var n=r?"_v3":"",o=r?"vec3 ":"",i=r?t+" = average("+t+n+");":"",s=a?t+n+" = SRGBToLinear("+t+n+");":"";return["#if defined( USE_"+e.toUpperCase()+"_MAP )","vec2 uv_"+e+"_map = ("+e+"_map_texMatrix * vec3(uv, 1.0)).xy;",e.toUpperCase()+"_CLAMP_TEST;",o+t+n+" = texture2D("+e+"_map, uv_"+e+"_map).xyz;",s,"if("+e+"_map_invert) "+t+n+" = vec3(1.0) - "+t+n+";",i,"#else",t+" = "+e+";","#endif"].join("\n")}function Ee(e){var t=e+"_texMatrix",r=e+"_invert";return["#if defined( "+("USE_"+e).toUpperCase()+" )","uniform sampler2D "+e+";","uniform mat3 "+t+";","uniform bool "+r+";","#endif"].join("\n")}Se.prism_check=function(e){return["#if defined( USE_SURFACE_ALBEDO_MAP ) || defined( USE_SURFACE_ROUGHNESS_MAP ) || defined( USE_SURFACE_CUTOUT_MAP ) || defined( USE_SURFACE_ANISOTROPY_MAP ) || defined( USE_SURFACE_ROTATION_MAP ) || defined( USE_OPAQUE_ALBEDO_MAP ) || defined( USE_OPAQUE_F0_MAP ) || defined( USE_OPAQUE_LUMINANCE_MODIFIER_MAP ) || defined( USE_LAYERED_BOTTOM_F0_MAP ) || defined( USE_LAYERED_F0_MAP ) || defined( USE_LAYERED_DIFFUSE_MAP ) || defined( USE_LAYERED_FRACTION_MAP ) || defined( USE_LAYERED_ROUGHNESS_MAP ) || defined( USE_LAYERED_ANISOTROPY_MAP ) || defined( USE_LAYERED_ROTATION_MAP ) || defined( USE_METAL_F0_MAP ) || defined( USE_SURFACE_NORMAL_MAP ) || defined( USE_LAYERED_NORMAL_MAP )","#define "+e,"#endif"].join("\n")},Se.prism_sample_texture=function(e,t,r,a){return be(e,t,"true"===r,"true"===a)},Se.prism_uniforms=Ee,Se.prism_bump_uniforms=function(e){var t=e+"_texMatrix",r=e+"_bumpScale",a=e+"_bumpmapType";return["#if defined( "+("USE_"+e).toUpperCase()+" )","uniform sampler2D "+e+";","uniform mat3 "+t+";","uniform vec2 "+r+";","uniform int "+a+";","#endif"].join("\n")};var Pe={};for(xe in Se)Pe[xe]=new RegExp("#"+xe+" *<([\\w\\d., ]*)>","g");var we={IdUniforms:pe,ThemingUniform:me,CutPlanesUniforms:de,ShadowMapCommonUniforms:he,ShadowMapUniforms:ve,PointSizeUniforms:{point_size:{type:"f",value:1}},WideLinesUniforms:_e,DepthTextureUniforms:ge,PackDepthShaderChunk:ye.pack_depth,TonemapShaderChunk:ye.tonemap,OrderedDitheringShaderChunk:ye.ordered_dither,CutPlanesShaderChunk:ye.cutplanes,PackNormalsShaderChunk:ye.pack_normals,HatchPatternShaderChunk:ye.hatch_pattern,EnvSamplingShaderChunk:ye.env_sample,IdVertexDeclaration:ye.id_decl_vert,IdVertexShaderChunk:ye.id_vert,IdFragmentDeclaration:ye.id_decl_frag,IdOutputShaderChunk:ye.id_frag,FinalOutputShaderChunk:ye.final_frag,ThemingFragmentDeclaration:ye.theming_decl_frag,ThemingFragmentShaderChunk:ye.theming_frag,InstancingVertexDeclaration:ye.instancing_decl_vert,ShadowMapDeclareCommonUniforms:ye.shadowmap_decl_common,ShadowMapVertexDeclaration:ye.shadowmap_decl_vert,ShadowMapVertexShaderChunk:ye.shadowmap_vert,ShadowMapFragmentDeclaration:ye.shadowmap_decl_frag,PointSizeDeclaration:ye.decl_point_size,PointSizeShaderChunk:ye.point_size,GetPrismMapSampleChunk:be,GetPrismMapUniformChunk:Ee,resolve:function e(t){for(var r in Se){var a=Pe[r];t=t.replace(a,(function(e,t){var a=t.split(",").map((function(e){return e.trim()}));return Se[r].apply(null,a)}))}return t.replace(/#include *<([\w\d.]+)>/g,(function(t,r){if(!ye[r])throw new Error("Cannot resolve #include<"+r+">");return e(ye[r])}))}}},146:function(e,t,r){"use strict";var a=r(57);e.exports=function(e){a.copy(e,this)}},147:function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,a="boolean"==typeof t.cycles&&t.cycles,n=t.cmp&&(r=t.cmp,function(e){return function(t,a){var n={key:t,value:e[t]},o={key:a,value:e[a]};return r(n,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,i;if(Array.isArray(t)){for(i="[",r=0;r<t.length;r++)r&&(i+=","),i+=e(t[r])||"null";return i+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(a)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,l=Object.keys(t).sort(n&&n(t));for(i="",r=0;r<l.length;r++){var c=l[r],u=e(t[c]);u&&(i&&(i+=","),i+=JSON.stringify(c)+":"+u)}return o.splice(s,1),"{"+i+"}"}}(e)}},148:function(e,t,r){"use strict";e.exports=function(e,t,r){var a="",n=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),i=e.self._getId(e.schema);if(e.opts.strictKeywords){var s=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(s){var l="unknown keyword: "+s;if("log"!==e.opts.strictKeywords)throw new Error(l);e.logger.warn(l)}}if(e.isTop&&(a+=" var validate = ",n&&(e.async=!0,a+="async "),a+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",i&&(e.opts.sourceCode||e.opts.processCode)&&(a+=" /*# sourceURL="+i+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){var c=e.level,u=e.dataLevel,f=e.schema["false schema"],d=e.schemaPath+e.util.getProperty("false schema"),p=e.errSchemaPath+"/false schema",m=!e.opts.allErrors,h="data"+(u||""),v="valid"+c;if(!1===e.schema){e.isTop?m=!0:a+=" var "+v+" = false; ",(Z=Z||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'boolean schema is false' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ";var _=a;a=Z.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?a+=n?" return data; ":" validate.errors = null; return true; ":a+=" var "+v+" = true; ";return e.isTop&&(a+=" }; return validate; "),a}if(e.isTop){var g=e.isTop;c=e.level=0,u=e.dataLevel=0,h="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var y="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(y);e.logger.warn(y)}a+=" var vErrors = null; ",a+=" var errors = 0;     ",a+=" if (rootData === undefined) rootData = data; "}else{c=e.level,h="data"+((u=e.dataLevel)||"");if(i&&(e.baseId=e.resolve.url(e.baseId,i)),n&&!e.async)throw new Error("async schema in sync schema");a+=" var errs_"+c+" = errors;"}v="valid"+c,m=!e.opts.allErrors;var x="",S="",b=e.schema.type,E=Array.isArray(b);if(b&&e.opts.nullable&&!0===e.schema.nullable&&(E?-1==b.indexOf("null")&&(b=b.concat("null")):"null"!=b&&(b=[b,"null"],E=!0)),E&&1==b.length&&(b=b[0],E=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(a+=" "+e.RULES.all.$comment.code(e,"$comment")),b){if(e.opts.coerceTypes)var P=e.util.coerceToTypes(e.opts.coerceTypes,b);var w=e.RULES.types[b];if(P||E||!0===w||w&&!K(w)){d=e.schemaPath+".type",p=e.errSchemaPath+"/type",d=e.schemaPath+".type",p=e.errSchemaPath+"/type";var O=E?"checkDataTypes":"checkDataType";if(a+=" if ("+e.util[O](b,h,!0)+") { ",P){var R="dataType"+c,T="coerced"+c;a+=" var "+R+" = typeof "+h+"; ","array"==e.opts.coerceTypes&&(a+=" if ("+R+" == 'object' && Array.isArray("+h+")) "+R+" = 'array'; "),a+=" var "+T+" = undefined; ";var A="",M=P;if(M)for(var D,N=-1,I=M.length-1;N<I;)D=M[N+=1],N&&(a+=" if ("+T+" === undefined) { ",A+="}"),"array"==e.opts.coerceTypes&&"array"!=D&&(a+=" if ("+R+" == 'array' && "+h+".length == 1) { "+T+" = "+h+" = "+h+"[0]; "+R+" = typeof "+h+";  } "),"string"==D?a+=" if ("+R+" == 'number' || "+R+" == 'boolean') "+T+" = '' + "+h+"; else if ("+h+" === null) "+T+" = ''; ":"number"==D||"integer"==D?(a+=" if ("+R+" == 'boolean' || "+h+" === null || ("+R+" == 'string' && "+h+" && "+h+" == +"+h+" ","integer"==D&&(a+=" && !("+h+" % 1)"),a+=")) "+T+" = +"+h+"; "):"boolean"==D?a+=" if ("+h+" === 'false' || "+h+" === 0 || "+h+" === null) "+T+" = false; else if ("+h+" === 'true' || "+h+" === 1) "+T+" = true; ":"null"==D?a+=" if ("+h+" === '' || "+h+" === 0 || "+h+" === false) "+T+" = null; ":"array"==e.opts.coerceTypes&&"array"==D&&(a+=" if ("+R+" == 'string' || "+R+" == 'number' || "+R+" == 'boolean' || "+h+" == null) "+T+" = ["+h+"]; ");a+=" "+A+" if ("+T+" === undefined) {   ",(Z=Z||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",a+=E?""+b.join(","):""+b,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=E?""+b.join(","):""+b,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ";_=a;a=Z.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else {  ";var F=u?"data"+(u-1||""):"parentData";a+=" "+h+" = "+T+"; ",u||(a+="if ("+F+" !== undefined)"),a+=" "+F+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+T+"; } "}else{(Z=Z||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",a+=E?""+b.join(","):""+b,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=E?""+b.join(","):""+b,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ";_=a;a=Z.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}a+=" } "}}if(e.schema.$ref&&!o)a+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",m&&(a+=" } if (errors === ",a+=g?"0":"errs_"+c,a+=") { ",S+="}");else{var L=e.RULES;if(L)for(var C=-1,U=L.length-1;C<U;)if(K(w=L[C+=1])){if(w.type&&(a+=" if ("+e.util.checkDataType(w.type,h)+") { "),e.opts.useDefaults)if("object"==w.type&&e.schema.properties){f=e.schema.properties;var V=Object.keys(f);if(V)for(var z,k=-1,$=V.length-1;k<$;){if(void 0!==(H=f[z=V[k+=1]]).default){var j=h+e.util.getProperty(z);if(e.compositeRule){if(e.opts.strictDefaults){y="default is ignored for: "+j;if("log"!==e.opts.strictDefaults)throw new Error(y);e.logger.warn(y)}}else a+=" if ("+j+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+j+" === null || "+j+" === '' "),a+=" ) "+j+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(H.default)+" ":a+=" "+JSON.stringify(H.default)+" ",a+="; "}}}else if("array"==w.type&&Array.isArray(e.schema.items)){var B=e.schema.items;if(B){N=-1;for(var H,W=B.length-1;N<W;)if(void 0!==(H=B[N+=1]).default){j=h+"["+N+"]";if(e.compositeRule){if(e.opts.strictDefaults){y="default is ignored for: "+j;if("log"!==e.opts.strictDefaults)throw new Error(y);e.logger.warn(y)}}else a+=" if ("+j+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+j+" === null || "+j+" === '' "),a+=" ) "+j+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(H.default)+" ":a+=" "+JSON.stringify(H.default)+" ",a+="; "}}}var G=w.rules;if(G)for(var q,X=-1,Q=G.length-1;X<Q;)if(J(q=G[X+=1])){var Y=q.code(e,q.keyword,w.type);Y&&(a+=" "+Y+" ",m&&(x+="}"))}if(m&&(a+=" "+x+" ",x=""),w.type&&(a+=" } ",b&&b===w.type&&!P)){a+=" else { ";var Z;d=e.schemaPath+".type",p=e.errSchemaPath+"/type";(Z=Z||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",a+=E?""+b.join(","):""+b,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=E?""+b.join(","):""+b,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ";_=a;a=Z.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } "}m&&(a+=" if (errors === ",a+=g?"0":"errs_"+c,a+=") { ",S+="}")}}function K(e){for(var t=e.rules,r=0;r<t.length;r++)if(J(t[r]))return!0}function J(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,a=0;a<r.length;a++)if(void 0!==e.schema[r[a]])return!0}(t)}return m&&(a+=" "+S+" "),g?(n?(a+=" if (errors === 0) return data;           ",a+=" else throw new ValidationError(vErrors); "):(a+=" validate.errors = vErrors; ",a+=" return errors === 0;       "),a+=" }; return validate;"):a+=" var "+v+" = errors === errs_"+c+";",a=e.util.cleanUpCode(a),g&&(a=e.util.finalCleanUpCode(a,n)),a}},149:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(i||""),d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=s;var p="maximum"==t,m=p?"exclusiveMaximum":"exclusiveMinimum",h=e.schema[m],v=e.opts.$data&&h&&h.$data,_=p?"<":">",g=p?">":"<",y=void 0;if(v){var x=e.util.getData(h.$data,i,e.dataPathArr),S="exclusive"+o,b="exclType"+o,E="exclIsNumber"+o,P="' + "+(R="op"+o)+" + '";n+=" var schemaExcl"+o+" = "+x+"; ",n+=" var "+S+"; var "+b+" = typeof "+(x="schemaExcl"+o)+"; if ("+b+" != 'boolean' && "+b+" != 'undefined' && "+b+" != 'number') { ";var w;y=m;(w=w||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(y||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: '"+m+" should be boolean' "),e.opts.verbose&&(n+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var O=n;n=w.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+O+"]); ":n+=" validate.errors = ["+O+"]; return false; ":n+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else if ( ",d&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" "+b+" == 'number' ? ( ("+S+" = "+a+" === undefined || "+x+" "+_+"= "+a+") ? "+f+" "+g+"= "+x+" : "+f+" "+g+" "+a+" ) : ( ("+S+" = "+x+" === true) ? "+f+" "+g+"= "+a+" : "+f+" "+g+" "+a+" ) || "+f+" !== "+f+") { var op"+o+" = "+S+" ? '"+_+"' : '"+_+"='; ",void 0===s&&(y=m,c=e.errSchemaPath+"/"+m,a=x,d=v)}else{P=_;if((E="number"==typeof h)&&d){var R="'"+P+"'";n+=" if ( ",d&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" ( "+a+" === undefined || "+h+" "+_+"= "+a+" ? "+f+" "+g+"= "+h+" : "+f+" "+g+" "+a+" ) || "+f+" !== "+f+") { "}else{E&&void 0===s?(S=!0,y=m,c=e.errSchemaPath+"/"+m,a=h,g+="="):(E&&(a=Math[p?"min":"max"](h,s)),h===(!E||a)?(S=!0,y=m,c=e.errSchemaPath+"/"+m,g+="="):(S=!1,P+="="));R="'"+P+"'";n+=" if ( ",d&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" "+f+" "+g+" "+a+" || "+f+" !== "+f+") { "}}y=y||t,(w=w||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(y||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+R+", limit: "+a+", exclusive: "+S+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be "+P+" ",n+=d?"' + "+a:a+"'"),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";O=n;return n=w.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+O+"]); ":n+=" validate.errors = ["+O+"]; return false; ":n+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u&&(n+=" else { "),n}},150:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(i||""),d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=s,n+="if ( ",d&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" "+f+".length "+("maxItems"==t?">":"<")+" "+a+") { ";var p=t,m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxItems"==t?"more":"fewer",n+=" than ",n+=d?"' + "+a+" + '":""+s,n+=" items' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var h=n;return n=m.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+h+"]); ":n+=" validate.errors = ["+h+"]; return false; ":n+=" var err = "+h+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},151:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(i||""),d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=s;var p="maxLength"==t?">":"<";n+="if ( ",d&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),!1===e.opts.unicode?n+=" "+f+".length ":n+=" ucs2length("+f+") ",n+=" "+p+" "+a+") { ";var m=t,h=h||[];h.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(m||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be ",n+="maxLength"==t?"longer":"shorter",n+=" than ",n+=d?"' + "+a+" + '":""+s,n+=" characters' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var v=n;return n=h.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},152:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(i||""),d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=s,n+="if ( ",d&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" Object.keys("+f+").length "+("maxProperties"==t?">":"<")+" "+a+") { ";var p=t,m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxProperties"==t?"more":"fewer",n+=" than ",n+=d?"' + "+a+" + '":""+s,n+=" properties' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var h=n;return n=m.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+h+"]); ":n+=" validate.errors = ["+h+"]; return false; ":n+=" var err = "+h+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},153:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},17:function(e,t){e.exports="\nvec4 packDepth( const in float depth ) {\n    vec4 enc = vec4(1.0, 255.0, 65025.0, 160581375.0) * depth;\n    enc = fract(enc);\n    enc -= enc.yzww * vec4(1.0/255.0,1.0/255.0,1.0/255.0,0.0);\n    return enc;\n}\nfloat unpackDepth( const in vec4 rgba_depth ) {\n    return dot( rgba_depth, vec4(1.0, 1.0/255.0, 1.0/65025.0, 1.0/160581375.0) );\n}\n"},18:function(e,t){e.exports="\nuniform sampler2D tDepth;\nuniform vec4 projInfo;\nuniform float isOrtho;\nuniform mat4 worldMatrix_mainPass;\nvec3 reconstructCSPosition(vec2 fragCoords, float z) {\n    return vec3((fragCoords * projInfo.xy + projInfo.zw) * mix(z, -1.0, isOrtho), z);\n}\nvec3 reconstructWorldPosition(vec2 fragCoords, vec2 screenUv) {\n    float zCam = texture2D(tDepth, screenUv).z;\n    vec3 csPos = reconstructCSPosition(fragCoords, zCam);\n    return (worldMatrix_mainPass * vec4(csPos, 1.0)).xyz;\n}\n"},19:function(e,t){e.exports="\nfloat luminance_post(vec3 rgb) {\n    return dot(rgb, vec3(0.299, 0.587, 0.114));\n}\nfloat luminance_pre(vec3 rgb) {\n    return dot(rgb, vec3(0.212671, 0.715160, 0.072169));\n}\nvec3 xyz2rgb(vec3 xyz) {\n    vec3 R = vec3( 3.240479, -1.537150, -0.498535);\n    vec3 G = vec3(-0.969256,  1.875992,  0.041556);\n    vec3 B = vec3( 0.055648, -0.204043,  1.057311);\n    vec3 rgb;\n    rgb.b = dot(xyz, B);\n    rgb.g = dot(xyz, G);\n    rgb.r = dot(xyz, R);\n    return rgb;\n}\nvec3 rgb2xyz(vec3 rgb) {\n    vec3 X = vec3(0.412453, 0.35758, 0.180423);\n    vec3 Y = vec3(0.212671, 0.71516, 0.0721688);\n    vec3 Z = vec3(0.0193338, 0.119194, 0.950227);\n    vec3 xyz;\n    xyz.x = dot(rgb, X);\n    xyz.y = dot(rgb, Y);\n    xyz.z = dot(rgb, Z);\n    return xyz;\n}\nvec3 xyz2xyY(vec3 xyz) {\n    float sum = xyz.x + xyz.y + xyz.z;\n    sum = 1.0 / sum;\n    vec3 xyY;\n    xyY.z = xyz.y;\n    xyY.x = xyz.x * sum;\n    xyY.y = xyz.y * sum;\n    return xyY;\n}\nvec3 xyY2xyz(vec3 xyY) {\n    float x = xyY.x;\n    float y = xyY.y;\n    float Y = xyY.z;\n    vec3 xyz;\n    xyz.y = Y;\n    xyz.x = x * (Y / y);\n    xyz.z = (1.0 - x - y) * (Y / y);\n    return xyz;\n}\nfloat toneMapCanon_T(float x)\n{\n    float xpow = pow(x, 1.60525727);\n    float tmp = ((1.05542877*4.68037409)*xpow) / (4.68037409*xpow + 1.0);\n    return clamp(tmp, 0.0, 1.0);\n}\nconst float Shift = 1.0 / 0.18;\nfloat toneMapCanonFilmic_NoGamma(float x) {\n    x *= Shift;\n    const float A = 0.2;\n    const float B = 0.34;\n    const float C = 0.002;\n    const float D = 1.68;\n    const float E = 0.0005;\n    const float F = 0.252;\n    const float scale = 1.0/0.833837;\n    return (((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F) * scale;\n}\nvec3 toneMapCanonFilmic_WithGamma(vec3 x) {\n    x *= Shift;\n    const float A = 0.27;\n    const float B = 0.29;\n    const float C = 0.052;\n    const float D = 0.2;\n    const float F = 0.18;\n    const float scale = 1.0/0.897105;\n    return (((x*(A*x+C*B))/(x*(A*x+B)+D*F))) * scale;\n}\nvec3 toneMapCanonOGS_WithGamma_WithColorPerserving(vec3 x) {\n    vec3 outColor = x.rgb;\n    outColor = min(outColor, vec3(3.0));\n    float inLum = luminance_pre(outColor);\n    if (inLum > 0.0) {\n        float outLum = toneMapCanon_T(inLum);\n        outColor = outColor * (outLum / inLum);\n        outColor = clamp(outColor, vec3(0.0), vec3(1.0));\n    }\n    float gamma = 1.0/2.2;\n    outColor = pow(outColor, vec3(gamma));\n    return outColor;\n}\n"},20:function(e,t){e.exports="vec3 orderedDithering(vec3 col) {\n    const vec4 m0 = vec4( 1.0, 13.0,  4.0, 16.0);\n    const vec4 m1 = vec4( 9.0,  5.0, 12.0,  8.0);\n    const vec4 m2 = vec4( 3.0, 15.0,  2.0, 14.0);\n    const vec4 m3 = vec4(11.0,  7.0, 10.0,  6.0);\n    int i = int(mod(float(gl_FragCoord.x), 4.0));\n    int j = int(mod(float(gl_FragCoord.y), 4.0));\n    vec4 biasRow;\n    if      (i==0) biasRow = m0;\n    else if (i==1) biasRow = m1;\n    else if (i==2) biasRow = m2;\n    else           biasRow = m3;\n    float bias;\n    if      (j==0) bias = biasRow.x;\n    else if (j==1) bias = biasRow.y;\n    else if (j==2) bias = biasRow.z;\n    else           bias = biasRow.w;\n    return col + bias / 17.0 / 256.0;\n}\n"},21:function(e,t){e.exports="#if NUM_CUTPLANES > 0\nuniform vec4 cutplanes[NUM_CUTPLANES];\nvoid checkCutPlanes(vec3 worldPosition) {\n    for (int i=0; i<NUM_CUTPLANES; i++) {\n        if (dot(vec4(worldPosition, 1.0), cutplanes[i]) > 0.0) {\n            discard;\n        }\n    }\n}\n#endif\n"},22:function(e,t){e.exports="\n#define kPI 3.14159265358979\nvec2 encodeNormal (vec3 n) {\n    return (vec2(atan(n.y,n.x)/kPI, n.z)+1.0)*0.5;\n}\nvec3 decodeNormal (vec2 enc) {\n    vec2 ang = enc * 2.0 - 1.0;\n    vec2 scth = vec2(sin(ang.x * kPI), cos(ang.x * kPI));\n    vec2 scphi = vec2(sqrt(1.0 - ang.y * ang.y), ang.y);\n    return vec3(scth.y * scphi.x, scth.x * scphi.x, scphi.y);\n}\n"},23:function(e,t){e.exports="#ifdef HATCH_PATTERN\nuniform vec2 hatchParams;\nuniform vec3 hatchTintColor;\nuniform float hatchTintIntensity;\nfloat curveGaussian(float r, float invWidth) {\n    float amt = clamp(r * invWidth, 0.0, 1.0);\n    float exponent = amt * 3.5;\n    return exp(-exponent*exponent);\n}\nvec4 calculateHatchPattern(vec2 hatchParams, vec2 coord, vec4 fragColor, vec3 hatchTintColor, float hatchTintIntensity ) {\n    float hatchSlope = hatchParams.x;\n    float hatchPeriod = hatchParams.y;\n    if (abs(hatchSlope) <= 1.0) {\n        float hatchPhase = coord.y - hatchSlope * coord.x;\n        float dist = abs(mod((hatchPhase), (hatchPeriod)));\n        if (dist < 1.0) {\n            fragColor = vec4(0.0,0.0,0.0,1.0);\n        } else {\n            fragColor.xyz = mix(fragColor.xyz, hatchTintColor, hatchTintIntensity);\n        }\n    } else {\n        float hatchPhase = - coord.y / hatchSlope + coord.x;\n        float dist = abs(mod((hatchPhase), (hatchPeriod)));\n        if (dist < 1.0) {\n            fragColor = vec4(0.0,0.0,0.0,1.0);\n        } else {\n            fragColor.xyz = mix(fragColor.xyz, hatchTintColor, hatchTintIntensity);\n        }\n    }\n    return fragColor;\n}\n#endif\n"},24:function(e,t){e.exports="\nuniform float envRotationSin;\nuniform float envRotationCos;\nvec3 adjustLookupVector(in vec3 lookup) {\n    return vec3(\n            envRotationCos * lookup.x - envRotationSin * lookup.z,\n            lookup.y,\n            envRotationSin * lookup.x + envRotationCos * lookup.z);\n}\nvec3 RGBMDecode(in vec4 vRGBM, in float exposure) {\n    vec3 ret = vRGBM.rgb * (vRGBM.a * 16.0);\n    ret *= ret;\n    ret *= exposure;\n    return ret;\n}\nvec3 GammaDecode(in vec4 vRGBA, in float exposure) {\n    return vRGBA.xyz * vRGBA.xyz * exposure;\n}\nvec3 sampleIrradianceMap(vec3 dirWorld, samplerCube irrMap, float exposure) {\n    vec4 cubeColor4 = textureCube(irrMap, adjustLookupVector(dirWorld));\n#ifdef IRR_GAMMA\n    vec3 indirectDiffuse = GammaDecode(cubeColor4, exposure);\n#elif defined(IRR_RGBM)\n    vec3 indirectDiffuse = RGBMDecode(cubeColor4, exposure);\n#else\n    vec3 indirectDiffuse = cubeColor4.xyz;\n#ifdef GAMMA_INPUT\n    indirectDiffuse.xyz *= indirectDiffuse.xyz;\n#endif\n#endif\n    return indirectDiffuse;\n}\n"},25:function(e,t){e.exports="#ifdef USE_VERTEX_ID\nattribute vec3 id;\nvarying   vec3 vId;\n#endif\n"},26:function(e,t){e.exports="\n#ifdef USE_VERTEX_ID\nvId = id;\n#endif\n"},27:function(e,t){e.exports="#if defined(MRT_NORMALS) || defined(MRT_ID_BUFFER)\n    varying highp float depth;\n#endif\n#if defined(MRT_ID_BUFFER) || defined(ID_COLOR)\n    #ifdef USE_VERTEX_ID\n        varying vec3 vId;\n    #elif defined(LINE_2D_SHADER)\n        varying vec4 dbId;\n    #else\n        uniform vec3 dbId;\n    #endif\n#endif\n#if defined(MRT_ID_BUFFER) || defined(MODEL_COLOR)\n    uniform vec3 modelId;\n#endif\n#ifdef _LMVWEBGL2_\n    #if defined(MRT_NORMALS)\n        layout(location = 1) out vec4 outNormal;\n        #if defined(MRT_ID_BUFFER)\n            layout(location = 2) out vec4 outId;\n            #if defined(MODEL_COLOR)\n                layout(location = 3) out vec4 outModelId;\n            #endif\n        #endif\n    #elif defined(MRT_ID_BUFFER)\n        layout(location = 1) out vec4 outId;\n        #if defined(MODEL_COLOR)\n            layout(location = 2) out vec4 outModelId;\n        #endif\n    #endif\n#else\n    #define gl_FragColor gl_FragData[0]\n    #if defined(MRT_NORMALS)\n        #define outNormal gl_FragData[1]\n        #if defined(MRT_ID_BUFFER)\n            #define outId gl_FragData[2]\n            #if defined(MODEL_COLOR)\n                #define outModelId gl_FragData[3]\n            #endif\n        #endif\n    #elif defined(MRT_ID_BUFFER)\n        #define outId gl_FragData[1]\n        #if defined(MODEL_COLOR)\n            #define outModelId gl_FragData[2]\n        #endif\n    #endif\n#endif"},28:function(e,t){e.exports="\n#if defined(USE_VERTEX_ID) && (defined(MRT_ID_BUFFER) || defined(ID_COLOR))\n    vec3 dbId = vId;\n#endif\n#ifdef MRT_ID_BUFFER\n    #ifndef ENABLE_ID_DISCARD\n        const float writeId = 1.0;\n    #endif\n    outId = vec4(dbId.rgb, writeId);\n    #ifdef MODEL_COLOR\n        outModelId = vec4(modelId.rgb, writeId);\n    #endif\n#elif defined(ID_COLOR)\n    #ifdef ENABLE_ID_DISCARD\n        if (writeId==0.0) {\n            discard;\n        }\n    #endif\n    gl_FragColor = vec4(dbId.rgb, 1.0);\n#elif defined(MODEL_COLOR)\n    #ifdef ENABLE_ID_DISCARD\n        if (writeId==0.0) {\n            discard;\n        }\n    #endif\n    gl_FragColor = vec4(modelId.rgb, 1.0);\n#endif\n"},29:function(e,t){e.exports="#ifdef HATCH_PATTERN\ngl_FragColor = calculateHatchPattern(hatchParams, gl_FragCoord.xy, gl_FragColor, hatchTintColor, hatchTintIntensity);\n#endif\n#ifdef MRT_NORMALS\noutNormal = vec4(geomNormal.x, geomNormal.y, depth, gl_FragColor.a < 1.0 ? 0.0 : 1.0);\n#endif\n#include<id_frag>\n"},30:function(e,t){e.exports="uniform vec4 themingColor;\n"},303:function(e,t,r){"use strict";var a=r(535),n=r(94),o=r(539),i=r(146),s=r(147),l=r(540),c=r(541),u=r(562),f=r(57);e.exports=_,_.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var a=this._addSchema(e);r=a.validate||this._compile(a)}var n=r(t);!0!==r.$async&&(this.errors=r.errors);return n},_.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},_.prototype.addSchema=function(e,t,r,a){if(Array.isArray(e)){for(var o=0;o<e.length;o++)this.addSchema(e[o],void 0,r,a);return this}var i=this._getId(e);if(void 0!==i&&"string"!=typeof i)throw new Error("schema id must be string");return E(this,t=n.normalizeId(t||i)),this._schemas[t]=this._addSchema(e,r,a,!0),this},_.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},_.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(m)?m:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var a=this.validate(r,e);if(!a&&t){var n="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(n);this.logger.error(n)}return a},_.prototype.getSchema=function(e){var t=g(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=n.schema.call(e,{schema:{}},t);if(r){var o=r.schema,s=r.root,l=r.baseId,c=a.call(e,o,s,void 0,l);return e._fragments[t]=new i({ref:t,fragment:!0,schema:o,root:s,baseId:l,validate:c}),c}}(this,e)}},_.prototype.removeSchema=function(e){if(e instanceof RegExp)return y(this,this._schemas,e),y(this,this._refs,e),this;switch(typeof e){case"undefined":return y(this,this._schemas),y(this,this._refs),this._cache.clear(),this;case"string":var t=g(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,a=r?r(e):e;this._cache.del(a);var o=this._getId(e);o&&(o=n.normalizeId(o),delete this._schemas[o],delete this._refs[o])}return this},_.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},_.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,a=void 0===t.dataVar?"data":t.dataVar,n="",o=0;o<e.length;o++){var i=e[o];i&&(n+=a+i.dataPath+" "+i.message+r)}return n.slice(0,-r.length)},_.prototype._addSchema=function(e,t,r,a){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,s=o?o(e):e,l=this._cache.get(s);if(l)return l;a=a||!1!==this._opts.addUsedSchema;var c=n.normalizeId(this._getId(e));c&&a&&E(this,c);var u,f=!1!==this._opts.validateSchema&&!t;f&&!(u=c&&c==n.normalizeId(e.$schema))&&this.validateSchema(e,!0);var d=n.ids.call(this,e),p=new i({id:c,schema:e,localRefs:d,cacheKey:s,meta:r});"#"!=c[0]&&a&&(this._refs[c]=p);this._cache.put(s,p),f&&u&&this.validateSchema(e,!0);return p},_.prototype._compile=function(e,t){if(e.compiling)return e.validate=o,o.schema=e.schema,o.errors=null,o.root=t||o,!0===e.schema.$async&&(o.$async=!0),o;var r,n;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{n=a.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=n,e.refs=n.refs,e.refVal=n.refVal,e.root=n.root,n;function o(){var t=e.validate,r=t.apply(this,arguments);return o.errors=t.errors,r}},_.prototype.compileAsync=r(563);var d=r(564);_.prototype.addKeyword=d.add,_.prototype.getKeyword=d.get,_.prototype.removeKeyword=d.remove,_.prototype.validateKeyword=d.validate;var p=r(96);_.ValidationError=p.Validation,_.MissingRefError=p.MissingRef,_.$dataMetaSchema=u;var m="http://json-schema.org/draft-07/schema",h=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],v=["/properties"];function _(e){if(!(this instanceof _))return new _(e);e=this._opts=f.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:P,warn:P,error:P};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=l(e.format),this._cache=e.cache||new o,this._loadingSchemas={},this._compilations=[],this.RULES=c(),this._getId=function(e){switch(e.schemaId){case"auto":return b;case"id":return x;default:return S}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=s),this._metaOpts=function(e){for(var t=f.copy(e._opts),r=0;r<h.length;r++)delete t[h[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;e._opts.$data&&(t=r(567),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var a=r(153);e._opts.$data&&(a=u(a,v));e.addMetaSchema(a,m,!0),e._refs["http://json-schema.org/schema"]=m}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function g(e,t){return t=n.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function y(e,t,r){for(var a in t){var n=t[a];n.meta||r&&!r.test(a)||(e._cache.del(n.cacheKey),delete t[a])}}function x(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function S(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function b(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function E(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function P(){}},304:function(e){e.exports=JSON.parse('{"definitions":{"color":{"type":"object","required":["value"],"properties":{"value":{"type":"object","required":["r","g","b"],"properties":{"r":{"type":"number","minimum":0,"maximum":1},"g":{"type":"number","minimum":0,"maximum":1},"b":{"type":"number","minimum":0,"maximum":1}}}}},"colorOrTextureReference":{"oneOf":[{"$ref":"#/definitions/color"},{"$ref":"#/definitions/textureReference"}]},"angleZeroToTwoPi":{"oneOf":[{"type":"object","required":["units","value"],"properties":{"units":{"type":"string","const":"radian"},"value":{"type":"number","minimum":0,"maximum":6.283185307179586}}},{"type":"object","required":["units","value"],"properties":{"units":{"type":"string","const":"degree"},"value":{"type":"number","minimum":0,"maximum":360}}}]},"angleZeroToTwoPiOrTextureReference":{"oneOf":[{"$ref":"#/definitions/angleZeroToTwoPi"},{"allOf":[{"type":"object","required":["units"],"properties":{"units":{"type":"string","enum":["degree","radian"]}}},{"$ref":"#/definitions/textureReference"}]}]},"distanceUnits":{"type":"object","required":["units"],"properties":{"units":{"type":"string","enum":["nanometer","millimeter","decimeter","centimeter","meter","kilometer","inch","foot","mile","yard",""]}}},"distanceZeroToInfinityOrTextureReference":{"allOf":[{"$ref":"#/definitions/distanceUnits"},{"oneOf":[{"$ref":"#/definitions/scalarZeroToInfinity"},{"$ref":"#/definitions/textureReference"}]}]},"scalarNegativeOneToOne":{"type":"object","required":["value"],"properties":{"value":{"type":"number","minimum":-1,"maximum":1}}},"scalarNegativeOneToOneOrTextureReference":{"oneOf":[{"$ref":"#/definitions/scalarNegativeOneToOne"},{"$ref":"#/definitions/textureReference"}]},"scalarUnlimited":{"type":"object","required":["value"],"properties":{"value":{"type":"number"}}},"scalarUnlimitedOrTextureReference":{"oneOf":[{"$ref":"#/definitions/scalarUnlimited"},{"$ref":"#/definitions/textureReference"}]},"scalarZeroToInfinity":{"type":"object","required":["value"],"properties":{"value":{"type":"number","minimum":0}}},"scalarZeroToInfinityOrTextureReference":{"oneOf":[{"$ref":"#/definitions/scalarZeroToInfinity"},{"$ref":"#/definitions/textureReference"}]},"scalarZeroToOne":{"type":"object","required":["value"],"properties":{"value":{"type":"number","minimum":0,"maximum":1}}},"scalarZeroToOneOrTextureReference":{"oneOf":[{"$ref":"#/definitions/scalarZeroToOne"},{"$ref":"#/definitions/textureReference"}]},"textureReference":{"type":"object","required":["texture"],"properties":{"texture":{"description":"A reference to a texture; when using a texture for a scalar-valued parameter, the first channel of the sampled value (after scaling by \'rgbScale\') is used.","type":"object","required":["$ref"],"properties":{"$ref":{"description":"JSON reference to the texture; must be within the same JSON document.","type":"string","pattern":"^#/.+$"}}}}},"vector":{"type":"object","required":["value"],"properties":{"value":{"type":"object","required":["x","y","z"],"properties":{"x":{"type":"number","minimum":0,"maximum":1},"y":{"type":"number","minimum":0,"maximum":1},"z":{"type":"number","minimum":0,"maximum":1}}}}},"vectorOrTextureReference":{"oneOf":[{"$ref":"#/definitions/vector"},{"$ref":"#/definitions/textureReference"}]}},"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://autodesk.com/schemas/standard-surface.schema.json","type":"object","required":["tag","definition","transparent","parameters"],"properties":{"tag":{"description":"Unique name or identifier for the material. MUST NOT be empty. Could be displayed to users.","type":"string","pattern":"^.+$"},"definition":{"description":"Identifier for the type of this material. MUST be \'StandardSurface\'.","type":"string","const":"StandardSurface"},"transparent":{"description":"Transparency hint. SHOULD be true if the material is transparent.","type":"boolean","default":false},"parameters":{"description":"Standard Surface material parameter values.","type":"object","properties":{"base":{"description":"Scalar multiplier for base_color; reflection weight of diffuse_brdf.","default":{"value":0.8},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"base_color":{"description":"Reflection color at normal incidence (i.e., surface seen from straight up); reflection color of diffuse_brdf.","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"coat":{"description":"Coating reflection weight (coating reflection color is fixed to white).","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"coat_affect_color":{"description":"How much to additionally modulate diffuse reflection and subsurface scattering saturation.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"coat_affect_roughness":{"description":"How much to affect the roughness of the specular reflection layers below.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"coat_anisotropy":{"description":"Reflection anisotropy of coat_brdf.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"coat_color":{"description":"Tint color for the light coming from all layers below.","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"coat_IOR":{"description":"Refractive index of coat_brdf.","default":{"value":1.5},"allOf":[{"$ref":"#/definitions/scalarUnlimitedOrTextureReference"}]},"coat_normal":{"description":"Shading normal for the coating reflections; optional, overrides the default shading normal; has no effect on the closure combination weights; if present and of non-zero length, will be normalized.","default":{"value":{"x":0,"y":0,"z":0}},"allOf":[{"$ref":"#/definitions/vectorOrTextureReference"}]},"coat_rotation":{"description":"Orientation of coating anisotropy. Units apply to this value and MUST be one of \'radian\' or \'degree\'.","default":{"units":"radian","value":0},"allOf":[{"$ref":"#/definitions/angleZeroToTwoPiOrTextureReference"}]},"coat_roughness":{"description":"Coat reflection roughness; squared internally before being passed to the BSDF to achieve a more linear perceptual response.","default":{"value":0.1},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"diffuse_roughness":{"description":"Reflection roughness of diffuse_brdf; transmission roughness of diffuse_btdf.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"emission":{"description":"Emission color multiplier.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"emission_color":{"description":"Emission color.","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"metalness":{"description":"Weight of metal_brdf vs the specular reflection layer.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"normal":{"description":"Shading normal for the base layer; optional, overrides the default shading normal; has no effect on the closure combination weights; if present and of non-zero length, will be normalized.","default":{"value":{"x":0,"y":0,"z":0}},"allOf":[{"$ref":"#/definitions/vectorOrTextureReference"}]},"sheen":{"description":"Reflection weight of sheen_brdf.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"sheen_color":{"description":"Reflection color of sheen_brdf","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"sheen_roughness":{"description":"Reflection roughness of sheen_brdf.","default":{"value":0.3},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"specular":{"description":"Scalar multiplier to specular_color; specular reflection weight.","default":{"value":1},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"specular_anisotropy":{"description":"Reflection anisotropy of metal_brdf and specular_brdf.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"specular_color":{"description":"Reflection color at grazing incidence (i.e., around silhouettes); specular reflection color.","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"specular_IOR":{"description":"Refractive index of specular_brdf and specular_btdf.","default":{"value":1.52},"allOf":[{"$ref":"#/definitions/scalarUnlimitedOrTextureReference"}]},"specular_rotation":{"description":"Orientation of specular anisotropy. Units apply to this value and MUST be one of \'radian\' or \'degree\'.","default":{"units":"radian","value":0},"allOf":[{"$ref":"#/definitions/angleZeroToTwoPiOrTextureReference"}]},"specular_roughness":{"description":"Reflection roughness of specular_brdf; refraction roughness of specular_btdf; squared internally before being passed to the BxDFs to achieve a more uniform roughness look over the parameter range.","default":{"value":0.1},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"subsurface":{"description":"Diffuse transmission weight; subsurface scattering weight.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"subsurface_anisotropy":{"description":"Anisotropy of the subsurface medium phase function.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarNegativeOneToOneOrTextureReference"}]},"subsurface_color":{"description":"Diffuse transmission color; subsurface color, used by subsurface(...) closure.","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"subsurface_radius":{"description":"Subsurface radii (i.e., mean free paths) of the red, green, and blue channels","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"subsurface_scale":{"description":"Scalar scale for subsurface_radius. Units apply to this value and MUST be one of \'nanometer\', \'millimeter\', \'decimeter\', \'centimeter\', \'meter\', \'kilometer\', \'inch\', \'foot\', \'mile\', \'yard\', or \'\' (to use scene units).","default":{"units":"","value":1},"allOf":[{"$ref":"#/definitions/distanceZeroToInfinityOrTextureReference"}]},"thin_film_IOR":{"description":"Refractive index of the film.","default":{"value":1.5},"allOf":[{"$ref":"#/definitions/scalarUnlimitedOrTextureReference"}]},"thin_film_thickness":{"description":"Thickness of the film. Units apply to this value and MUST be one of \'nanometer\', \'millimeter\', \'decimeter\', \'centimeter\', \'meter\', \'kilometer\', \'inch\', \'foot\', \'mile\', \'yard\', or \'\' (to use scene units).","default":{"units":"nanometer","value":0},"allOf":[{"$ref":"#/definitions/distanceZeroToInfinityOrTextureReference"}]},"thin_walled":{"description":"If true, the object is considered infinitely thin and the surface double-sided.","type":"boolean","default":false},"transmission":{"description":"Transmission weight.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"transmission_color":{"description":"Transmission color, i.e., tint.","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"transmission_depth":{"description":"The distance travelled inside the material by white light before its color becomes exactly transmission_color by Beer\'s law, determining the extinction coefficient of the interior medium; if zero, transmission_color acts as a constant (on-surface) transmission tint. Units apply to this value and MUST be one of \'nanometer\', \'millimeter\', \'decimeter\', \'centimeter\', \'meter\', \'kilometer\', \'inch\', \'foot\', \'mile\', \'yard\', or \'\' (to use scene units).","default":{"units":"","value":0},"allOf":[{"$ref":"#/definitions/distanceZeroToInfinityOrTextureReference"}]},"transmission_dispersion":{"description":"Dispersion Abbe number, describing how much the index of refraction varies across wavelengths.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToInfinityOrTextureReference"}]},"transmission_extra_roughness":{"description":"Additional (positive or negative) roughness on top of specular_roughness. Values other than 0 are not physically correct.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarNegativeOneToOneOrTextureReference"}]},"transmission_scatter":{"description":"Scattering coefficient of the interior medium.","default":{"value":{"r":0,"g":0,"b":0}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"transmission_scatter_anisotropy":{"description":"The anisotropy of the Henyey-Greenstein phase function of the interior medium.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarNegativeOneToOneOrTextureReference"}]}}},"textures":{"description":"Texture definitions; each texture key MUST begin with any number of digits followed by an underscore and one or more additional characters.","type":"object","additionalProperties":{"type":"object","required":["bitmap"],"properties":{"bitmap":{"description":"SVF path to the image file.","type":"string"},"filtering":{"description":"Type of filtering to use when sampling the image; MUST be either \'linear\' (linear interpolation) or \'nearest\' (nearest pixel).","default":"linear","type":"string","enum":["linear","nearest"]},"encoding":{"description":"Color space encoding of the supplied bitmap file; MUST be either \'linear\' (linear RGB) or \'srgb\' (sRGB); default is \'srgb\'.","default":"srgb","type":"string","enum":["linear","srgb"]},"isHeightMap":{"description":"Whether this texture represents a height (bump) map that should be converted to a normal map; this MUST be true when using a height (bump) map for a parameter that expects a vector (e.g., \'coat_normal\').","default":false,"type":"boolean"},"heightMapScale":{"description":"Real-world scale of the height (bump) map; ignored if \'isHeightMap\' is not true; Units apply to this value and MUST be one of \'nanometer\', \'millimeter\', \'decimeter\', \'centimeter\', \'meter\', \'kilometer\', \'inch\', \'foot\', \'mile\', \'yard\', or \'\' (to use scene units).","default":{"units":"","value":1},"allOf":[{"$ref":"#/definitions/distanceUnits"},{"$ref":"#/definitions/scalarZeroToInfinity"}]},"invert":{"description":"Whether the sampled texture values should be inverted; inversion of each channel is done independently.","default":false,"type":"boolean"},"realWorldOffsetX":{"description":"Offset of the texture in the X/U direction in real-world units.","default":{"units":"","value":0},"allOf":[{"$ref":"#/definitions/distanceUnits"},{"$ref":"#/definitions/scalarUnlimited"}]},"realWorldOffsetY":{"description":"Offset of the texture in the Y/V direction in real-world units.","default":{"units":"","value":0},"allOf":[{"$ref":"#/definitions/distanceUnits"},{"$ref":"#/definitions/scalarUnlimited"}]},"realWorldScaleX":{"description":"Size of the texture in the X/U direction in real-world units.","default":{"units":"","value":1},"allOf":[{"$ref":"#/definitions/distanceUnits"},{"$ref":"#/definitions/scalarZeroToInfinity"}]},"realWorldScaleY":{"description":"Size of the texture in the Y/V direction in real-world units.","default":{"units":"","value":1},"allOf":[{"$ref":"#/definitions/distanceUnits"},{"$ref":"#/definitions/scalarZeroToInfinity"}]},"rgbScale":{"description":"Scalar multiplier for the sampled value.","default":{"value":1},"allOf":[{"$ref":"#/definitions/scalarZeroToInfinity"}]},"uOffset":{"description":"Offset of the texture in the X/U direction in UV coordinate space; this offset is added after converting the real-world offset into UV space.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarNegativeOneToOne"}]},"uRepeat":{"description":"Whether the texture should repeat in the X/U direction; when false, out-of-range samples will be clamped to the nearest edge.","default":true,"type":"boolean"},"uScale":{"description":"Size of the texture in the X/U direction in UV coordinate space; this scaling factor is added after converting the real-world scaling factor into UV space.","default":{"value":1},"allOf":[{"$ref":"#/definitions/scalarZeroToInfinity"}]},"vOffset":{"description":"Offset of the texture in the Y/V direction in UV coordinate space; this offset is added after converting the real-world offset into UV space.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarNegativeOneToOne"}]},"vRepeat":{"description":"Whether the texture should repeat in the Y/V direction; when false, out-of-range samples will be clamped to the nearest edge.","default":true,"type":"boolean"},"vScale":{"description":"Size of the texture in the Y/V direction in UV coordinate space; this scaling factor is added after converting the real-world scaling factor into UV space.","default":{"value":1},"allOf":[{"$ref":"#/definitions/scalarZeroToInfinity"}]},"wAngle":{"description":"Rotation of the texture about its center.","default":{"units":"radian","value":0},"allOf":[{"$ref":"#/definitions/angleZeroToTwoPi"}]}}}}}}')},305:function(e,t){e.exports="varying vec3 vWorldNormal;\nvarying vec3 vWorldPosition;\n#if defined(USE_MAP) || defined(USE_BASE_MAP) || defined(USE_BASE_COLOR_MAP) || defined(USE_COAT_MAP) || defined(USE_COAT_AFFECT_COLOR_MAP) || defined(USE_COAT_AFFECT_ROUGHNESS_MAP) || defined(USE_COAT_ANISOTROPY_MAP) || defined(USE_COAT_COLOR_MAP) || defined(USE_COAT_IOR_MAP) || defined(USE_COAT_NORMAL_MAP) || defined(USE_COAT_ROTATION_MAP) || defined(USE_COAT_ROUGHNESS_MAP) || defined(USE_DIFFUSE_ROUGHNESS_MAP) || defined(USE_EMISSION_MAP) || defined(USE_EMISSION_COLOR_MAP) || defined(USE_METALNESS_MAP) || defined(USE_NORMAL_MAP) || defined(USE_OPACITY_MAP) || defined(USE_SHEEN_MAP) || defined(USE_SHEEN_COLOR_MAP) || defined(USE_SHEEN_ROUGHNESS_MAP) || defined(USE_SPECULAR_MAP) || defined(USE_SPECULAR_ANISOTROPY_MAP) || defined(USE_SPECULAR_COLOR_MAP) || defined(USE_SPECULAR_IOR_MAP) || defined(USE_SPECULAR_ROTATION_MAP) || defined(USE_SPECULAR_ROUGHNESS_MAP) || defined(USE_SUBSURFACE_MAP) || defined(USE_SUBSURFACE_ANISOTROPY_MAP) || defined(USE_SUBSURFACE_COLOR_MAP) || defined(USE_SUBSURFACE_RADIUS_MAP) || defined(USE_SUBSURFACE_SCALE_MAP) || defined(USE_THIN_FILM_IOR_MAP) || defined(USE_THIN_FILM_THICKNESS_MAP) || defined(USE_THIN_WALLED_MAP) || defined(USE_TRANSMISSION_MAP) || defined(USE_TRANSMISSION_COLOR_MAP) || defined(USE_TRANSMISSION_DEPTH_MAP) || defined(USE_TRANSMISSION_DISPERSION_MAP) || defined(USE_TRANSMISSION_EXTRA_ROUGHNESS_MAP) || defined(USE_TRANSMISSION_SCATTER_MAP) || defined(USE_TRANSMISSION_SCATTER_ANISOTROPY_MAP)\n#define USE_MAP\n#endif\nvarying vec2 vUv;\n#ifdef MRT_NORMALS\nvarying float depth;\nvarying vec3 vGeomNormal;\n#endif\n#include<pack_normals>\n#include<instancing_decl_vert>\n#include<id_decl_vert>\n#include<shadowmap_decl_vert>\nvoid main() {\n#ifdef UNPACK_NORMALS\n    vec3 instNorm = decodeNormal(normal);\n#else\n    vec3 instNorm = normal;\n#endif\n    instNorm = getInstanceNormal(instNorm);\n    vec3 instPos = getInstancePos(position);\n#ifdef MRT_NORMALS\n    vGeomNormal = normalize(normalMatrix * instNorm);\n#endif\n    vec4 positionWorld = modelMatrix * vec4(instPos, 1.0);\n    mat3 worldInverseTransposeMatrix = mat3(modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz);\n    vec4 mvPosition = modelViewMatrix * vec4(instPos, 1.0);\n    gl_Position = projectionMatrix * mvPosition;\n    vWorldNormal = normalize(worldInverseTransposeMatrix * instNorm);\n    vWorldPosition = positionWorld.xyz;\n    vUv = uv;\n#ifdef MRT_NORMALS\n    depth = mvPosition.z;\n#endif\n#include<id_vert>\n#include<shadowmap_vert>\n}\n"},306:function(e,t){e.exports="#include<common>\n#define M_PI_INV 1.0/PI\n#define M_GOLDEN_RATIO 1.6180339887498948482045868343656\n#define M_FLOAT_EPS 0.000001\n#define MAX_LIGHTS (MAX_POINT_LIGHTS + MAX_SPOT_LIGHTS + MAX_DIR_LIGHTS)\n#define BSDF vec3\n#define EDF vec3\nstruct VDF { vec3 absorption; vec3 scattering; };\nstruct surfaceshader { vec3 color; vec3 transparency; };\nstruct volumeshader { VDF vdf; EDF edf; };\nstruct displacementshader { vec3 offset; float scale; };\nstruct lightshader { vec3 intensity; vec3 direction; };\nuniform sampler2D u_sheenAlbedo;\nuniform sampler2D u_samplingRandomMap;\n#inject<uniforms>\n#ifdef USE_TILING\nuniform mat4 tilingOverallTransform;\nuniform sampler2D TilingMap;\nuniform mat3 TilingMap_texMatrix;\nuniform vec4 uv2tile;\nuniform vec4 tile2uv;\nuniform vec2 tileAlignOffset;\nuniform mat4 tilingUVTransform;\n#ifdef USE_TILING_NORMAL\nuniform sampler2D TilingNormalMap;\nuniform mat3 TilingNormalMap_texMatrix;\n#endif\n#ifdef USE_TILING_RANDOM\nuniform sampler2D TilingRandomMap;\nuniform mat3 TilingRandomMap_texMatrix;\nuniform vec2 tilingRandomAxisS;\nuniform vec2 tilingRandomAxisT;\nuniform vec2 tilingRandomAlignmentOffset;\n#endif\n#endif\nuniform float envExponentMin;\nuniform float envExponentMax;\nuniform float envExponentCount;\n#include<env_sample>\n#if TONEMAP_OUTPUT > 0\nuniform float exposureBias;\n#include<tonemap>\n#endif\nvarying vec3 vWorldPosition;\n#include<id_decl_frag>\n#include<theming_decl_frag>\n#include<shadowmap_decl_frag>\n#ifdef MRT_NORMALS\nvarying vec3 vGeomNormal;\n#endif\n#ifdef USE_FOG\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#if defined(USE_MAP) || defined(USE_BASE_MAP) || defined(USE_BASE_COLOR_MAP) || defined(USE_COAT_MAP) || defined(USE_COAT_AFFECT_COLOR_MAP) || defined(USE_COAT_AFFECT_ROUGHNESS_MAP) || defined(USE_COAT_ANISOTROPY_MAP) || defined(USE_COAT_COLOR_MAP) || defined(USE_COAT_IOR_MAP) || defined(USE_COAT_NORMAL_MAP) || defined(USE_COAT_ROTATION_MAP) || defined(USE_COAT_ROUGHNESS_MAP) || defined(USE_DIFFUSE_ROUGHNESS_MAP) || defined(USE_EMISSION_MAP) || defined(USE_EMISSION_COLOR_MAP) || defined(USE_METALNESS_MAP) || defined(USE_NORMAL_MAP) || defined(USE_OPACITY_MAP) || defined(USE_SHEEN_MAP) || defined(USE_SHEEN_COLOR_MAP) || defined(USE_SHEEN_ROUGHNESS_MAP) || defined(USE_SPECULAR_MAP) || defined(USE_SPECULAR_ANISOTROPY_MAP) || defined(USE_SPECULAR_COLOR_MAP) || defined(USE_SPECULAR_IOR_MAP) || defined(USE_SPECULAR_ROTATION_MAP) || defined(USE_SPECULAR_ROUGHNESS_MAP) || defined(USE_SUBSURFACE_MAP) || defined(USE_SUBSURFACE_ANISOTROPY_MAP) || defined(USE_SUBSURFACE_COLOR_MAP) || defined(USE_SUBSURFACE_RADIUS_MAP) || defined(USE_SUBSURFACE_SCALE_MAP) || defined(USE_THIN_FILM_IOR_MAP) || defined(USE_THIN_FILM_THICKNESS_MAP) || defined(USE_THIN_WALLED_MAP) || defined(USE_TRANSMISSION_MAP) || defined(USE_TRANSMISSION_COLOR_MAP) || defined(USE_TRANSMISSION_DEPTH_MAP) || defined(USE_TRANSMISSION_DISPERSION_MAP) || defined(USE_TRANSMISSION_EXTRA_ROUGHNESS_MAP) || defined(USE_TRANSMISSION_SCATTER_MAP) || defined(USE_TRANSMISSION_SCATTER_ANISOTROPY_MAP)\n#define USE_MAP\n#endif\nvarying vec2 vUv;\nfloat linear_to_srgb(in float v) {\n    float o = v;\n    if (o <= 0.0031308) {\n        o *= 12.92;\n    } else {\n        o = 1.055 * pow(o, 1.0 / 2.4) - 0.055;\n    }\n    return o;\n}\nvec3 linear_to_srgb(in vec3 v) {\n    vec3 o = v;\n    o.r = linear_to_srgb(o.r);\n    o.g = linear_to_srgb(o.g);\n    o.b = linear_to_srgb(o.b);\n    return o;\n}\nfloat srgb_to_linear(in float v) {\n    float o = v;\n    if (o <= 0.04045) {\n        o *= 0.07739938;\n    } else {\n        o = pow(abs((o + 0.055) * 0.947867298), 2.4);\n    }\n    return o;\n}\nvec3 srgb_to_linear(in vec3 v) {\n    vec3 o = v;\n    o.r = srgb_to_linear(o.r);\n    o.g = srgb_to_linear(o.g);\n    o.b = srgb_to_linear(o.b);\n    return o;\n}\n#if defined(USE_ENVMAP)\nuniform samplerCube envMap;\nuniform float envMapExposure;\nuniform int envMapMipLevels;\n#if defined(USE_IRRADIANCEMAP)\nuniform samplerCube irradianceMap;\n#endif\n#endif\nvarying vec3 vWorldNormal;\n#ifndef _LMVWEBGL2_\nint clamp(int x, int minVal, int maxVal) {\n    if (x < minVal) return minVal;\n    if (x > maxVal) return maxVal;\n    return x;\n}\n#endif\nvec3 sample_map(vec2 st, sampler2D map, int invert, int encoding, float valueScale) {\n    vec3 raw = texture2D(map, st).rgb;\n    if (encoding == 0) {\n        raw = srgb_to_linear(raw);\n    }\n    if (invert == 1) {\n        raw = vec3(1.0) - raw;\n    }\n    return raw * valueScale;\n}\nmat3 two_vector(in vec3 N, in vec3 Np) {\n    vec3 v = cross(N, Np);\n    float c = dot(N, Np);\n    mat3 vX = mat3(0.0, v.z, -v.y, -v.z, 0.0, v.x, v.y, -v.x, 0.0);\n    return mat3(1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0) + vX + (vX * vX) / (1.0 + c);\n}\nvoid transform_basis(inout vec3 T, inout vec3 B, inout vec3 N, in vec2 uv, in sampler2D map, in mat3 texMatrix, in int invert, in int encoding, in float valueScale, in int isHeight, in vec2 heightScale) {\n    vec2 st = (texMatrix * vec3(uv, 1.0)).xy;\n    mat3 rot;\n    if (isHeight == 1) {\n        mat3 TBN = mat3(T, B, N);\n        vec3 Tloc = normalize(TBN * (texMatrix * vec3(1.0, 0.0, 0.0)));\n        vec3 Bloc = normalize(TBN * (texMatrix * vec3(0.0, 1.0, 0.0)));\n        const float oneThird = 1.0 / 3.0;\n        vec3 avg = vec3(oneThird);\n        vec2 offset = fwidth(st);\n        float h0 = dot(sample_map(st, map, invert, encoding, valueScale).xyz, avg);\n        float hx = dot(sample_map(st + vec2(offset.x, 0.0), map, invert, encoding, valueScale).xyz, avg);\n        float hy = dot(sample_map(st + vec2(0.0, offset.y), map, invert, encoding, valueScale).xyz, avg);\n        vec2 diff = vec2(h0 - hx, h0 - hy) / offset;\n        vec3 Np = normalize(N + (diff.x * Tloc * heightScale.x + diff.y * Bloc * heightScale.y));\n        rot = two_vector(N, Np);\n    } else {\n        vec3 mapN = 2.0 * sample_map(st, map, invert, encoding, valueScale).xyz - 1.0;\n        vec3 v = vec3(mapN.y, -mapN.x, 0.0);\n        float c = -mapN.z;\n        mat3 skewV = mat3(0.0, v.z, -v.y, -v.z, 0.0, v.x, v.y, -v.x, 0.0);\n        rot = mat3(1.0) + skewV + skewV * skewV * 1.0 / (1.0 - c);\n    }\n    T = normalize(T * rot);\n    B = normalize(B * rot);\n    N = normalize(N * rot);\n}\nvec3 sample_irradiance_map(vec3 dir) {\n    return applyEnvShadow(sampleIrradianceMap(dir, irradianceMap, envMapExposure), dir);\n}\nvec3 sample_radiance_map(vec3 dir, float lod) {\n    vec3 direction = adjustLookupVector(dir);\n#ifdef HAVE_TEXTURE_LOD\n    vec4 val = textureCubeLodEXT(envMap, direction, lod);\n#else\n    vec4 val = textureCube(envMap, direction, lod);\n#endif\n#ifdef ENV_GAMMA\n    return GammaDecode(val, envMapExposure);\n#elif defined(ENV_RGBM)\n    return RGBMDecode(val, envMapExposure);\n#else\n#ifdef GAMMA_INPUT\n    return val.xyz * val.xyz;\n#else\n    return val.xyz;\n#endif\n#endif\n}\n#include<hatch_pattern>\nfloat read_sheen_albedo_table(vec2 uv) {\n    vec4 tex = texture2D(u_sheenAlbedo, vec2(uv.x, 1.0 - uv.y));\n    float adj = 256.0 / 255.0;\n    float val = dot(tex, vec4(adj, adj / 255.0, adj / 65025.0, adj / 16581375.0));\n    return val * SHEEN_ALBEDO_TABLE_RANGE + SHEEN_ALBEDO_TABLE_MIN;\n}\n#if MAX_LIGHTS > 0\nfloat calc_light_attenuation(float distance, float cutoffDistance, float decayExp) {\n    if (decayExp > 0.0) {\n        return pow(clamp(1.0 - distance / cutoffDistance, 0.0, 1.0), decayExp);\n    }\n    return 1.0;\n}\n#if MAX_POINT_LIGHTS > 0\nuniform vec3  pointLightColor[MAX_POINT_LIGHTS];\nuniform vec3  pointLightPosition[MAX_POINT_LIGHTS];\nuniform float pointLightDistance[MAX_POINT_LIGHTS];\nuniform float pointLightDecay[MAX_POINT_LIGHTS];\nvoid sample_point_light(int idx, vec3 position, out lightshader result) {\n    for (int i = 0; i < MAX_POINT_LIGHTS; ++i) {\n        if (i == idx) {\n            vec3 lightWorldPosition = pointLightPosition[i];\n            vec3 lightWorldVector = lightWorldPosition - position;\n            float attenuation = calc_light_attenuation(length(lightWorldVector), pointLightDistance[i], pointLightDecay[i]);\n            result.direction = normalize(lightWorldVector);\n            result.intensity = pointLightColor[i] * attenuation;\n            return;\n        }\n    }\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3  spotLightColor[MAX_SPOT_LIGHTS];\nuniform vec3  spotLightPosition[MAX_SPOT_LIGHTS];\nuniform vec3  spotLightDirection[MAX_SPOT_LIGHTS];\nuniform float spotLightAngleCos[MAX_SPOT_LIGHTS];\nuniform float spotLightExponent[MAX_SPOT_LIGHTS];\nuniform float spotLightDistance[MAX_SPOT_LIGHTS];\nuniform float spotLightDecay[MAX_SPOT_LIGHTS];\nvoid sample_spot_light(int idx, vec3 position, out lightshader result) {\n    for (int i = 0; i < MAX_SPOT_LIGHTS; ++i) {\n        if (i == idx) {\n            vec3 lightWorldPosition = spotLightPosition[i];\n            vec3 lightWorldVector = lightWorldPosition + position;\n            float attenuation = calc_light_attenuation(length(lightWorldVector), spotLightDistance[i], spotLightDecay[i]);\n            float spotEffect = dot(spotLightDirection[i], normalize(spotLightPosition[i] - position));\n            result.direction = normalize(lightWorldVector);\n            if (spotEffect > spotLightAngleCos[i]) {\n                spotEffect = max(pow(max(spotEffect, 0.0), spotLightExponent[i]), 0.0);\n                result.intensity = spotLightColor[i] * attenuation * spotEffect;\n            } else {\n                result.intensity = vec3(0.0);\n            }\n            return;\n        }\n    }\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\nvoid sample_dir_light(int idx, vec3 position, out lightshader result) {\n    for (int i = 0; i < MAX_DIR_LIGHTS; ++i) {\n        if (i == idx) {\n            vec3 lightWorldVector = directionalLightDirection[i];\n            result.direction = normalize(lightWorldVector);\n            result.intensity = directionalLightColor[i];\n            return;\n        }\n    }\n}\n#endif\nvoid sample_light(int idx, vec3 position, out lightshader result) {\n#if MAX_POINT_LIGHTS > 0\n    if (idx < MAX_POINT_LIGHTS) {\n        sample_point_light(idx, position, result);\n        return;\n    }\n#endif\n#if MAX_SPOT_LIGHTS > 0\n    if (idx < MAX_POINT_LIGHTS + MAX_SPOT_LIGHTS) {\n        sample_spot_light(idx - MAX_POINT_LIGHTS, position, result);\n        return;\n    }\n#endif\n#if MAX_DIR_LIGHTS > 0\n    if (idx < MAX_POINT_LIGHTS + MAX_SPOT_LIGHTS + MAX_DIR_LIGHTS) {\n        sample_dir_light(idx - (MAX_POINT_LIGHTS + MAX_SPOT_LIGHTS), position, result);\n        return;\n    }\n#endif\n    result.intensity = vec3(0.0);\n}\n#endif\n#inject<getters>\nvoid computeTangets(in vec3 pos, in vec2 uv, out vec3 T, out vec3 B) {\n    vec3 q0 = dFdx( pos );\n    vec3 q1 = dFdy( pos );\n    vec2 st0 = dFdx( uv );\n    vec2 st1 = dFdy( uv );\n    float scale = sign( st1.t * st0.s - st0.t * st1.s );\n    T = normalize(  q0 * st1.t - q1 * st0.t ) * scale;\n    B = (-q0 * st1.s + q1 * st0.s) * scale;\n}\nfloat mx_square(float x) { return x*x; }\nvec2 mx_square(vec2 x) { return x*x; }\nvec3 mx_square(vec3 x) { return x*x; }\nvec4 mx_square(vec4 x) { return x*x; }\nfloat mx_pow5(float x) { return mx_square(mx_square(x)) * x; }\nfloat mx_max_component(vec2 v) { return max(v.x, v.y); }\nfloat mx_max_component(vec3 v) { return max(max(v.x, v.y), v.z); }\nfloat mx_max_component(vec4 v) { return max(max(max(v.x, v.y), v.z), v.w); }\nbool mx_is_tiny(float v) { return abs(v) < EPSILON; }\nbool mx_is_tiny(vec3 v) { return all(lessThan(abs(v), vec3(EPSILON))); }\nfloat mx_mix(float v00, float v01, float v10, float v11, float x, float y) {\n    float v0_ = mix(v00, v01, x);\n    float v1_ = mix(v10, v11, x);\n    return mix(v0_, v1_, y);\n}\n#ifdef USE_LMV_SAMPLING\nvec2 hammersley(int index, int envSamples) {\n    float u = (float(index) + 0.5) / float(SAMPLING_RANDOM_TABLE_SIZE);\n    const float v = 0.5;\n    float noise = texture2D(u_samplingRandomMap, vec2(u, v), 0.0).r;\n    return vec2(float(index/envSamples), noise);\n}\n#else\nfloat mx_golden_ratio_sequence(int i) {\n    return fract((float(i) + 1.0) * M_GOLDEN_RATIO);\n}\nvec2 mx_spherical_fibonacci(int i, int numSamples) {\n    return vec2((float(i) + 0.5) / float(numSamples), mx_golden_ratio_sequence(i));\n}\n#endif\nfloat mx_orennayar(vec3 L, vec3 V, vec3 N, float NdotL, float roughness) {\n    float LdotV = dot(L, V);\n    float NdotV = dot(N, V);\n    float t = LdotV - NdotL * NdotV;\n    t = t > 0.0 ? t / max(NdotL, NdotV) : 0.0;\n    float sigma2 = mx_square(roughness * PI);\n    float A = 1.0 - 0.5 * (sigma2 / (sigma2 + 0.33));\n    float B = 0.45 * sigma2 / (sigma2 + 0.09);\n    return A + B * t;\n}\nfloat mx_microfacet_ggx_NDF(vec3 X, vec3 Y, vec3 H, float NdotH, float alphaX, float alphaY) {\n    float XdotH = dot(X, H);\n    float YdotH = dot(Y, H);\n    float denom = mx_square(XdotH / alphaX) + mx_square(YdotH / alphaY) + mx_square(NdotH);\n    return 1.0 / (PI * alphaX * alphaY * mx_square(denom));\n}\nfloat mx_microfacet_ggx_PDF(vec3 X, vec3 Y, vec3 H, float NdotH, float LdotH, float alphaX, float alphaY) {\n    return mx_microfacet_ggx_NDF(X, Y, H, NdotH, alphaX, alphaY) * NdotH / (4.0 * LdotH);\n}\nvec3 mx_microfacet_ggx_IS(vec2 Xi, vec3 X, vec3 Y, vec3 N, float alphaX, float alphaY) {\n    float phi = 2.0 * PI * Xi.x;\n    float tanTheta = sqrt(Xi.y / (1.0 - Xi.y));\n    vec3 H = vec3(X * (tanTheta * alphaX * cos(phi)) +\n    Y * (tanTheta * alphaY * sin(phi)) +\n    N);\n    return normalize(H);\n}\nfloat mx_microfacet_ggx_G1(float cosTheta, float alpha) {\n    float cosTheta2 = cosTheta * cosTheta;\n    float tanTheta2 = (1.0 - cosTheta2) / cosTheta2;\n    return 2.0 / (1.0 + sqrt(1.0 + alpha * alpha * tanTheta2));\n}\nfloat mx_microfacet_ggx_smith_G(float NdotL, float NdotV, float alpha) {\n    return mx_microfacet_ggx_G1(NdotL, alpha) * mx_microfacet_ggx_G1(NdotV, alpha);\n}\nfloat mx_microfacet_sheen_NDF(float cosTheta, float roughness) {\n    float invRoughness = 1.0 / roughness;\n    float cos2 = cosTheta * cosTheta;\n    float sin2 = 1.0 - cos2;\n    return (2.0 + invRoughness) * pow(sin2, invRoughness * 0.5) / (2.0 * PI);\n}\nfloat mx_microfacet_sheen_albedo(float cosTheta, float roughness) {\n    return clamp(read_sheen_albedo_table(vec2(cosTheta, roughness)), 0.0, 1.0);\n}\nfloat mx_fresnel_schlick(float cosTheta, float F0, float F90, float exponent) {\n    float x = clamp(1.0 - cosTheta, 0.0, 1.0);\n    return mix(F0, F90, pow(x, exponent));\n}\nvec3 mx_fresnel_schlick(float cosTheta, vec3 F0, vec3 F90, float exponent) {\n    float x = clamp(1.0 - cosTheta, 0.0, 1.0);\n    return mix(F0, F90, pow(x, exponent));\n}\nvec3 mx_fresnel_schlick(float cosTheta, vec3 F0) {\n    if (cosTheta < 0.0) return vec3(1.0);\n    float x = 1.0 - cosTheta;\n    float x2 = x*x;\n    float x5 = x2*x2*x;\n    return F0 + (1.0 - F0) * x5;\n}\nfloat mx_fresnel_schlick(float cosTheta, float ior) {\n    if (cosTheta < 0.0) return 1.0;\n    float F0 = (ior - 1.0) / (ior + 1.0);\n    F0 *= F0;\n    float x = 1.0 - cosTheta;\n    float x2 = x*x;\n    float x5 = x2*x2*x;\n    return F0 + (1.0 - F0) * x5;\n}\nfloat mx_fresnel_schlick_roughness(float cosTheta, float ior, float roughness) {\n    cosTheta = abs(cosTheta);\n    float F0 = (ior - 1.0) / (ior + 1.0);\n    F0 *= F0;\n    float x = 1.0 - cosTheta;\n    float x2 = x*x;\n    float x5 = x2*x2*x;\n    return F0 + (max(1.0 - roughness, F0) - F0) * x5;\n}\nfloat mx_fresnel_dielectric(float cosTheta, float ior) {\n    if (cosTheta < 0.0) return 1.0;\n    float g =  ior*ior + cosTheta*cosTheta - 1.0;\n    if (g < 0.0) return 1.0;\n    g = sqrt(g);\n    float gmc = g - cosTheta;\n    float gpc = g + cosTheta;\n    float x = gmc / gpc;\n    float y = (gpc * cosTheta - 1.0) / (gmc * cosTheta + 1.0);\n    return 0.5 * x * x * (1.0 + y * y);\n}\nvec3 mx_fresnel_conductor(float cosTheta, vec3 n, vec3 k) {\n    float c2 = cosTheta*cosTheta;\n    vec3 n2_k2 = n*n + k*k;\n    vec3 nc2 = 2.0 * n * cosTheta;\n    vec3 rs_a = n2_k2 + c2;\n    vec3 rp_a = n2_k2 * c2 + 1.0;\n    vec3 rs = (rs_a - nc2) / (rs_a + nc2);\n    vec3 rp = (rp_a - nc2) / (rp_a + nc2);\n    return 0.5 * (rs + rp);\n}\nfloat mx_burley_diffuse(vec3 L, vec3 V, vec3 N, float NdotL, float roughness) {\n    vec3 H = normalize(L + V);\n    float LdotH = max(dot(L, H), 0.0);\n    float NdotV = max(dot(N, V), 0.0);\n    float F90 = 0.5 + (2.0 * roughness * mx_square(LdotH));\n    float refL = mx_fresnel_schlick(NdotL, 1.0, F90, 5.0);\n    float refV = mx_fresnel_schlick(NdotV, 1.0, F90, 5.0);\n    return refL * refV * M_PI_INV;\n}\nfloat mx_burley_directional_albedo(vec3 V, vec3 N, float roughness) {\n    float x = dot(N, V);\n    float fit0 = 0.97619 - 0.488095 * mx_pow5(1.0 - x);\n    float fit1 = 1.55754 + (-2.02221 + (2.56283 - 1.06244 * x) * x) * x;\n    return mix(fit0, fit1, roughness);\n}\nfloat mx_compute_lod(vec3 dir, float pdf, int maxMipLevel, int envSamples) {\n    const float MIP_LEVEL_OFFSET = 1.5;\n    float effectiveMaxMipLevel = float(maxMipLevel) - MIP_LEVEL_OFFSET;\n    float distortion = sqrt(1.0 - mx_square(dir.y));\n    return max(effectiveMaxMipLevel - 0.5 * log2(float(envSamples) * pdf * distortion), 0.0);\n}\nvec3 mx_environment_radiance(vec3 N, vec3 V, vec3 X, vec2 roughness, int distribution) {\n    vec3 Y = normalize(cross(N, X));\n    X = cross(Y, N);\n    float NdotV = clamp(dot(N, V), 1e-8, 1.0);\n    vec3 radiance = vec3(0.0);\n    for (int i = 0; i < NUM_SAMPLES; i++) {\n#ifdef USE_LMV_SAMPLING\n        vec2 Xi = hammersley(i, NUM_SAMPLES);\n#else\n        vec2 Xi = mx_spherical_fibonacci(i, NUM_SAMPLES);\n#endif\n        vec3 H = mx_microfacet_ggx_IS(Xi, X, Y, N, roughness.x, roughness.y);\n        vec3 L = -reflect(V, H);\n        float NdotH = clamp(dot(N, H), 1e-8, 1.0);\n        float NdotL = clamp(dot(N, L), 1e-8, 1.0);\n        float VdotH = clamp(dot(V, H), 1e-8, 1.0);\n        float LdotH = VdotH;\n        float pdf = mx_microfacet_ggx_PDF(X, Y, H, NdotH, LdotH, roughness.x, roughness.y);\n        float lod = mx_compute_lod(L, pdf, envMapMipLevels, NUM_SAMPLES);\n        vec3 sampleColor = sample_radiance_map(L, lod);\n        float G = mx_microfacet_ggx_smith_G(NdotL, NdotV, max(roughness.x, roughness.y));\n        const float F = 1.0;\n        radiance += sampleColor * G * F * VdotH / (NdotV * NdotH);\n    }\n    radiance /= float(NUM_SAMPLES);\n    return radiance;\n}\nvec3 mx_environment_irradiance(vec3 N) {\n    return sample_irradiance_map(N);\n}\nvoid mx_luminance_color3(vec3 _in, vec3 lumacoeffs, out vec3 result) {\n    result = vec3(dot(_in, lumacoeffs));\n}\nvoid mx_roughness_anisotropy(float roughness, float anisotropy, out vec2 result) {\n    float roughness_sqr = clamp(roughness*roughness, EPSILON, 1.0);\n    if (anisotropy > 0.0) {\n        float aspect = sqrt(1.0 - clamp(anisotropy, 0.0, 0.98));\n        result.x = min(roughness_sqr / aspect, 1.0);\n        result.y = roughness_sqr * aspect;\n    } else {\n        result.x = roughness_sqr;\n        result.y = roughness_sqr;\n    }\n}\nvoid mx_fresnel_ior(float ior, vec3 N, vec3 V, out float result) {\n    float cosTheta = dot(N, -V);\n    result = mx_fresnel_dielectric(cosTheta, ior);\n}\nmat4 mx_rotationMatrix(vec3 axis, float angle) {\n    axis = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                0.0,                                0.0,                                0.0,                                1.0);\n}\nvoid mx_rotate_vector3(vec3 v, float amount, vec3 axis, out vec3 result) {\n    float rotationRadians = radians(amount);\n    mat4 m = mx_rotationMatrix(axis, rotationRadians);\n    result = (m * vec4(v, 1.0)).xyz;\n}\nvoid mx_complex_to_artistic_ior(vec3 ior, vec3 extinction, out vec3 reflectivity, out vec3 edge_color) {\n    vec3 nm1 = ior - 1.0;\n    vec3 np1 = ior + 1.0;\n    vec3 k2  = extinction * extinction;\n    vec3 r = (nm1*nm1 + k2) / (np1*np1 + k2);\n    reflectivity = r;\n    vec3 r_sqrt = sqrt(r);\n    vec3 n_min = (1.0 - r) / (1.0 + r);\n    vec3 n_max = (1.0 + r_sqrt) / (1.0 - r_sqrt);\n    edge_color = (n_max - ior) / (n_max - n_min);\n}\nvoid mx_artistic_to_complex_ior(vec3 reflectivity, vec3 edge_color, out vec3 ior, out vec3 extinction) {\n    vec3 r = clamp(reflectivity, 0.0, 0.99);\n    vec3 r_sqrt = sqrt(r);\n    vec3 n_min = (1.0 - r) / (1.0 + r);\n    vec3 n_max = (1.0 + r_sqrt) / (1.0 - r_sqrt);\n    ior = mix(n_max, n_min, edge_color);\n    vec3 np1 = ior + 1.0;\n    vec3 nm1 = ior - 1.0;\n    vec3 k2 = (np1*np1 * r - nm1*nm1) / (1.0 - r);\n    k2 = max(k2, 0.0);\n    extinction = sqrt(k2);\n}\nvoid mx_conductor_brdf_reflection(vec3 L, vec3 V, float weight, vec3 reflectivity, vec3 edge_color, vec2 roughness, vec3 N, vec3 X, int distribution, out BSDF result) {\n    if (weight < EPSILON) {\n        result = BSDF(0.0);\n        return;\n    }\n    float NdotL = dot(N, L);\n    float NdotV = dot(N, V);\n    if (NdotL <= 0.0 || NdotV <= 0.0) {\n        result = BSDF(0.0);\n        return;\n    }\n    vec3 Y = normalize(cross(N, X));\n    vec3 H = normalize(L + V);\n    float NdotH = dot(N, H);\n    float D = mx_microfacet_ggx_NDF(X, Y, H, NdotH, roughness.x, roughness.y);\n    float G = mx_microfacet_ggx_smith_G(NdotL, NdotV, max(roughness.x, roughness.y));\n    vec3 ior_n, ior_k;\n    mx_artistic_to_complex_ior(reflectivity, edge_color, ior_n, ior_k);\n    float VdotH = dot(V, H);\n    vec3 F = mx_fresnel_conductor(VdotH, ior_n, ior_k);\n    F *= weight;\n    result = F * D * G / (4.0 * NdotV);\n}\nvoid mx_conductor_brdf_indirect(vec3 V, float weight, vec3 reflectivity, vec3 edge_color, vec2 roughness, vec3 N, vec3 Li, out vec3 result) {\n    if (weight < EPSILON) {\n        result = vec3(0.0);\n        return;\n    }\n    vec3 ior_n, ior_k;\n    mx_artistic_to_complex_ior(reflectivity, edge_color, ior_n, ior_k);\n    vec3 F = mx_fresnel_conductor(dot(N, V), ior_n, ior_k);\n    F *= weight;\n    result = Li * F;\n}\nvoid mx_dielectric_btdf_transmission(vec3 V, float weight, vec3 tint, float ior, vec2 roughness, vec3 normal, vec3 tangent, int distribution, VDF interior, out BSDF result) {\n    result = tint * weight;\n}\nvoid mx_diffuse_btdf_reflection(vec3 L, vec3 V, float weight, vec3 color, vec3 normal, out BSDF result) {\n    float NdotL = dot(L, -normal);\n    if (NdotL <= 0.0 || weight < EPSILON) {\n        result = BSDF(0.0);\n        return;\n    }\n    result = color * weight * NdotL * M_PI_INV;\n}\nvoid mx_diffuse_btdf_indirect(vec3 V, float weight, vec3 color, vec3 normal, out vec3 result) {\n    if (weight < EPSILON) {\n        result = vec3(0.0);\n        return;\n    }\n    vec3 Li = mx_environment_irradiance(-normal);\n    result = Li * color * weight;\n}\nvoid mx_subsurface_brdf_reflection(vec3 L, vec3 V, float weight, vec3 color, vec3 radius, float anisotropy, vec3 normal, out BSDF result) {\n    float NdotL = dot(L, -normal);\n    if (NdotL <= 0.0 || weight < EPSILON) {\n        result = BSDF(0.0);\n        return;\n    }\n    result = color * weight * NdotL * M_PI_INV;\n}\nvoid mx_subsurface_brdf_indirect(vec3 V, float weight, vec3 color, vec3 radius, float anisotropy, vec3 normal, out vec3 result) {\n    if (weight < EPSILON) {\n        result = vec3(0.0);\n        return;\n    }\n    vec3 Li = mx_environment_irradiance(-normal);\n    result = Li * color * weight;\n}\nvoid mx_diffuse_brdf_reflection(vec3 L, vec3 V, float weight, vec3 color, float roughness, vec3 normal, out BSDF result) {\n    float NdotL = dot(L, normal);\n    if (NdotL <= 0.0 || weight < EPSILON) {\n        result = BSDF(0.0);\n        return;\n    }\n    result = color * weight * NdotL * M_PI_INV;\n    if (roughness > 0.0) {\n        result *= mx_orennayar(L, V, normal, NdotL, roughness);\n    }\n}\nvoid mx_diffuse_brdf_indirect(vec3 V, float weight, vec3 color, float roughness, vec3 normal, out vec3 result) {\n    if (weight < EPSILON) {\n        result = vec3(0.0);\n        return;\n    }\n    vec3 Li = mx_environment_irradiance(normal);\n    result = Li * color * weight;\n}\nvoid mx_mix_bsdf_reflection(vec3 L, vec3 V, BSDF fg, BSDF bg, float w, out BSDF result) {\n    result = mix(bg, fg, clamp(w, 0.0, 1.0));\n}\nvoid mx_mix_bsdf_transmission(vec3 V, BSDF fg, BSDF bg, float w, out BSDF result) {\n    result = mix(bg, fg, clamp(w, 0.0, 1.0));\n}\nvoid mx_mix_bsdf_indirect(vec3 V, vec3 fg, vec3 bg, float w, out vec3 result) {\n    result = mix(bg, fg, clamp(w, 0.0, 1.0));\n}\nvoid mx_sheen_brdf_reflection(vec3 L, vec3 V, float weight, vec3 color, float roughness, vec3 N, BSDF base, out BSDF result) {\n    if (weight < EPSILON) {\n        result = base;\n        return;\n    }\n    float NdotL = dot(N, L);\n    float NdotV = dot(N, V);\n    if (NdotL <= 0.0 || NdotV <= 0.0) {\n        result = base;\n        return;\n    }\n    vec3 H = normalize(L + V);\n    float NdotH = dot(N, H);\n    float alpha = clamp(roughness, EPSILON, 1.0);\n    float D = mx_microfacet_sheen_NDF(NdotH, alpha);\n    vec3 F = color * weight;\n    vec3 fr = D * F / (4.0 * (NdotL + NdotV - NdotL*NdotV));\n    float albedo = weight * mx_microfacet_sheen_albedo(NdotV, alpha);\n    result = fr * NdotL + base * (1.0 - albedo);\n}\nvoid mx_sheen_brdf_indirect(vec3 V, float weight, vec3 color, float roughness, vec3 N, BSDF base, out vec3 result) {\n    if (weight <= 0.0) {\n        result = base;\n        return;\n    }\n    float NdotV = abs(dot(N, V));\n    float alpha = clamp(roughness, EPSILON, 1.0);\n    float albedo = weight * mx_microfacet_sheen_albedo(NdotV, alpha);\n    vec3 Li = mx_environment_irradiance(N);\n    result = Li * color * albedo + base * (1.0 - albedo);\n}\nvoid mx_uniform_edf(vec3 N, vec3 L, vec3 color, out EDF result) {\n    result = color;\n}\nvoid mx_dielectric_brdf_reflection(vec3 L, vec3 V, float weight, vec3 tint, float ior, vec2 roughness, vec3 N, vec3 X, int distribution, BSDF base, out BSDF result) {\n    if (weight < EPSILON) {\n        result = base;\n        return;\n    }\n    float NdotL = dot(N, L);\n    float NdotV = dot(N, V);\n    if (NdotL <= 0.0 || NdotV <= 0.0) {\n        result = base;\n        return;\n    }\n    vec3 Y = normalize(cross(N, X));\n    vec3 H = normalize(L + V);\n    float NdotH = dot(N, H);\n    float D = mx_microfacet_ggx_NDF(X, Y, H, NdotH, roughness.x, roughness.y);\n    float G = mx_microfacet_ggx_smith_G(NdotL, NdotV, max(roughness.x, roughness.y));\n    float VdotH = dot(V, H);\n    float F = mx_fresnel_schlick(VdotH, ior);\n    F *= weight;\n    result = tint * D * G * F / (4.0 * NdotV) + base * (1.0 - F);\n}\nvoid mx_dielectric_brdf_transmission(vec3 V, float weight, vec3 tint, float ior, vec2 roughness, vec3 N, vec3 X, int distribution, BSDF base, out BSDF result) {\n    if (weight < EPSILON) {\n        result = base;\n        return;\n    }\n    float NdotV = abs(dot(N, V));\n    float F = mx_fresnel_schlick(NdotV, ior);\n    F *= weight;\n    result = base * (1.0 - F);\n}\nvoid mx_dielectric_brdf_indirect(vec3 V, float weight, vec3 tint, float ior, vec2 roughness, vec3 N, vec3 Li, BSDF base, out BSDF result) {\n    if (weight < EPSILON) {\n        result = base;\n        return;\n    }\n    float NdotV = dot(N, V);\n    float F = mx_fresnel_schlick_roughness(NdotV, ior, max(roughness.x, roughness.y));\n    F *= weight;\n    result = Li * tint * F + base * (1.0 - F);\n}\nvoid mx_multiply_bsdf_color_reflection(vec3 L, vec3 V, BSDF in1, vec3 in2, out BSDF result) {\n    result = in1 * clamp(in2, 0.0, 1.0);\n}\nvoid mx_multiply_bsdf_color_transmission(vec3 V, BSDF in1, vec3 in2, out BSDF result) {\n    result = in1 * clamp(in2, 0.0, 1.0);\n}\nvoid mx_multiply_bsdf_color_indirect(vec3 V, vec3 in1, vec3 in2, out vec3 result) {\n    result = in1 * clamp(in2, 0.0, 1.0);\n}\nvoid IMPL_standard_surface_surfaceshader(float base, vec3 base_color, float diffuse_roughness, float metalness, float specular, vec3 specular_color, float specular_roughness, float specular_IOR, float specular_anisotropy, float specular_rotation, float transmission, vec3 transmission_color, float transmission_depth, vec3 transmission_scatter, float transmission_scatter_anisotropy, float transmission_dispersion, float transmission_extra_roughness, float subsurface, vec3 subsurface_color, vec3 subsurface_radius, float subsurface_scale, float subsurface_anisotropy, float sheen, vec3 sheen_color, float sheen_roughness, float coat, vec3 coat_color, float coat_roughness, float coat_anisotropy, float coat_rotation, float coat_IOR, vec3 coat_normal, float coat_affect_color, float coat_affect_roughness, float thin_film_thickness, float thin_film_IOR, float emission, vec3 emission_color, vec3 opacity, int thin_walled, vec3 normal, vec3 tangent, vec3 geomWorldPosition, vec3 geomWorldNormal, vec3 camWorldPosition, out surfaceshader out275) {\n    vec3 opacity_luminance_out = vec3(0.0);\n    const vec3 lum = vec3(0.272287, 0.674082, 0.053689);\n    mx_luminance_color3(opacity, lum, opacity_luminance_out);\n    vec3 emission_weight_out = emission_color * emission;\n    float subsurface_selector_out = float(thin_walled);\n    vec3 geomprop_Vworld_out = normalize(geomWorldPosition - camWorldPosition);\n    float coat_affect_roughness_multiply1_out = coat_affect_roughness * coat;\n    const float tangent_rotate_degree_in2_tmp = 360.0;\n    float tangent_rotate_degree_out = specular_rotation * tangent_rotate_degree_in2_tmp;\n    vec3 metal_edgecolor_out = specular_color * specular;\n    vec3 subsurface_radius_vector_out = vec3(subsurface_radius.x, subsurface_radius.y, subsurface_radius.z);\n    vec3 metal_reflectivity_out = base_color * base;\n    const float coat_tangent_rotate_degree_in2_tmp = 360.0;\n    float coat_tangent_rotate_degree_out = coat_rotation * coat_tangent_rotate_degree_in2_tmp;\n    float coat_clamped_out = clamp(coat, 0.0, 1.0);\n    vec3 coat_attenuation_out = mix(vec3(1.0), coat_color, coat);\n    vec2 coat_roughness_out = vec2(0.0);\n    mx_roughness_anisotropy(coat_roughness, coat_anisotropy, coat_roughness_out);\n    float coat_fresnel_out = 0.0;\n    mx_fresnel_ior(coat_IOR, coat_normal, geomprop_Vworld_out, coat_fresnel_out);\n    float coat_affect_roughness_multiply2_out = coat_affect_roughness_multiply1_out * coat_roughness;\n    vec3 tangent_rotate_out = vec3(0.0);\n    mx_rotate_vector3(tangent, tangent_rotate_degree_out, normal, tangent_rotate_out);\n    vec3 subsurface_radius_scaled_out = subsurface_radius_vector_out * subsurface_scale;\n    vec3 coat_tangent_rotate_out = vec3(0.0);\n    mx_rotate_vector3(tangent, coat_tangent_rotate_degree_out, coat_normal, coat_tangent_rotate_out);\n    float coat_gamma_multiply_out = coat_clamped_out * coat_affect_color;\n    float coat_fresnel_inv_out = 1.0 - coat_fresnel_out;\n    float coat_affected_roughness_out = mix(specular_roughness, 1.0, coat_affect_roughness_multiply2_out);\n    vec3 tangent_rotate_normalize_out = normalize(tangent_rotate_out);\n    vec3 coat_tangent_rotate_normalize_out = normalize(coat_tangent_rotate_out);\n    float coat_gamma_out = coat_gamma_multiply_out + 1.0;\n    vec3 coat_color_fresnel_out = coat_color * coat_fresnel_inv_out;\n    vec2 main_roughness_out = vec2(0.0);\n    mx_roughness_anisotropy(coat_affected_roughness_out, specular_anisotropy, main_roughness_out);\n    vec3 main_tangent_out = vec3(0.0);\n    if (specular_anisotropy > 0.0) {\n        main_tangent_out = tangent_rotate_normalize_out;\n    } else {\n        main_tangent_out = tangent;\n    }\n    vec3 coat_tangent_out = vec3(0.0);\n    if (coat_anisotropy > 0.0) {\n        coat_tangent_out = coat_tangent_rotate_normalize_out;\n    } else {\n        coat_tangent_out = tangent;\n    }\n    vec3 coat_affected_subsurface_color_out = pow(subsurface_color, vec3(coat_gamma_out));\n    vec3 coat_affected_diffuse_color_out = pow(base_color, vec3(coat_gamma_out));\n    vec3 coat_emission_attenuation_out = mix(vec3(1.0), coat_color_fresnel_out, coat);\n    vec3 emission_weight_attenuated_out = emission_weight_out * coat_emission_attenuation_out;\n    surfaceshader standard_surface_constructor_out = surfaceshader(vec3(0.0), vec3(0.0));\n    {\n        float surfaceOpacity = opacity_luminance_out.x;\n        if (surfaceOpacity < 0.001) discard;\n        vec3 N = normalize(geomWorldNormal);\n        vec3 V = normalize(camWorldPosition - geomWorldPosition);\n        lightshader lightShader;\n#if MAX_LIGHTS > 0\n        for (int lightIdx = 0; lightIdx < MAX_LIGHTS; ++lightIdx) {\n            sample_light(lightIdx, geomWorldPosition, lightShader);\n            vec3 L = lightShader.direction;\n            BSDF transmission_bsdf_out = BSDF(0.0);\n            BSDF metal_bsdf_out = BSDF(0.0);\n            mx_conductor_brdf_reflection(L, V, 1.0, metal_reflectivity_out, metal_edgecolor_out, main_roughness_out, normal, main_tangent_out, 0, metal_bsdf_out);\n            BSDF translucent_bsdf_out = BSDF(0.0);\n            mx_diffuse_btdf_reflection(L, V, 1.0, coat_affected_subsurface_color_out, normal, translucent_bsdf_out);\n            BSDF subsurface_bsdf_out = BSDF(0.0);\n            mx_subsurface_brdf_reflection(L, V, 1.0, coat_affected_subsurface_color_out, subsurface_radius_scaled_out, subsurface_anisotropy, normal, subsurface_bsdf_out);\n            BSDF diffuse_bsdf_out = BSDF(0.0);\n            mx_diffuse_brdf_reflection(L, V, base, coat_affected_diffuse_color_out, diffuse_roughness, normal, diffuse_bsdf_out);\n            BSDF selected_subsurface_bsdf_out = BSDF(0.0);\n            mx_mix_bsdf_reflection(L, V, translucent_bsdf_out, subsurface_bsdf_out, subsurface_selector_out, selected_subsurface_bsdf_out);\n            BSDF sheen_bsdf_out = BSDF(0.0);\n            mx_sheen_brdf_reflection(L, V, sheen, sheen_color, sheen_roughness, normal, diffuse_bsdf_out, sheen_bsdf_out);\n            BSDF subsurface_mix_out = BSDF(0.0);\n            mx_mix_bsdf_reflection(L, V, selected_subsurface_bsdf_out, sheen_bsdf_out, subsurface, subsurface_mix_out);\n            BSDF transmission_mix_out = BSDF(0.0);\n            mx_mix_bsdf_reflection(L, V, transmission_bsdf_out, subsurface_mix_out, transmission, transmission_mix_out);\n            BSDF specular_bsdf_out = BSDF(0.0);\n            mx_dielectric_brdf_reflection(L, V, specular, specular_color, specular_IOR, main_roughness_out, normal, main_tangent_out, 0, transmission_mix_out, specular_bsdf_out);\n            BSDF metalness_mix_out = BSDF(0.0);\n            mx_mix_bsdf_reflection(L, V, metal_bsdf_out, specular_bsdf_out, metalness, metalness_mix_out);\n            BSDF metalness_mix_attenuated_out = BSDF(0.0);\n            mx_multiply_bsdf_color_reflection(L, V, metalness_mix_out, coat_attenuation_out, metalness_mix_attenuated_out);\n            BSDF coat_bsdf_out = BSDF(0.0);\n            mx_dielectric_brdf_reflection(L, V, coat, vec3(1.0), coat_IOR, coat_roughness_out, coat_normal, coat_tangent_out, 0, metalness_mix_attenuated_out, coat_bsdf_out);\n            standard_surface_constructor_out.color += lightShader.intensity * coat_bsdf_out;\n        }\n#endif\n        {\n            EDF emission_edf_out = EDF(0.0);\n            mx_uniform_edf(N, V, emission_weight_attenuated_out, emission_edf_out);\n            standard_surface_constructor_out.color += emission_edf_out;\n        }\n        {\n            BSDF transmission_bsdf_out = BSDF(0.0);\n            BSDF metal_bsdf_out = BSDF(0.0);\n            vec3 Li = mx_environment_radiance(normal, V, main_tangent_out, main_roughness_out, 0);\n            mx_conductor_brdf_indirect(V, 1.0, metal_reflectivity_out, metal_edgecolor_out, main_roughness_out, normal, Li, metal_bsdf_out);\n            BSDF translucent_bsdf_out = BSDF(0.0);\n            mx_diffuse_btdf_indirect(V, 1.0, coat_affected_subsurface_color_out, normal, translucent_bsdf_out);\n            BSDF subsurface_bsdf_out = BSDF(0.0);\n            mx_subsurface_brdf_indirect(V, 1.0, coat_affected_subsurface_color_out, subsurface_radius_scaled_out, subsurface_anisotropy, normal, subsurface_bsdf_out);\n            BSDF diffuse_bsdf_out = BSDF(0.0);\n            mx_diffuse_brdf_indirect(V, base, coat_affected_diffuse_color_out, diffuse_roughness, normal, diffuse_bsdf_out);\n            BSDF selected_subsurface_bsdf_out = BSDF(0.0);\n            mx_mix_bsdf_indirect(V, translucent_bsdf_out, subsurface_bsdf_out, subsurface_selector_out, selected_subsurface_bsdf_out);\n            BSDF sheen_bsdf_out = BSDF(0.0);\n            mx_sheen_brdf_indirect(V, sheen, sheen_color, sheen_roughness, normal, diffuse_bsdf_out, sheen_bsdf_out);\n            BSDF subsurface_mix_out = BSDF(0.0);\n            mx_mix_bsdf_indirect(V, selected_subsurface_bsdf_out, sheen_bsdf_out, subsurface, subsurface_mix_out);\n            BSDF transmission_mix_out = BSDF(0.0);\n            mx_mix_bsdf_indirect(V, transmission_bsdf_out, subsurface_mix_out, transmission, transmission_mix_out);\n            BSDF specular_bsdf_out = BSDF(0.0);\n            mx_dielectric_brdf_indirect(V, specular, specular_color, specular_IOR, main_roughness_out, normal, Li, transmission_mix_out, specular_bsdf_out);\n            BSDF metalness_mix_out = BSDF(0.0);\n            mx_mix_bsdf_indirect(V, metal_bsdf_out, specular_bsdf_out, metalness, metalness_mix_out);\n            BSDF metalness_mix_attenuated_out = BSDF(0.0);\n            mx_multiply_bsdf_color_indirect(V, metalness_mix_out, coat_attenuation_out, metalness_mix_attenuated_out);\n            BSDF coat_bsdf_out = BSDF(0.0);\n            if (coat > EPSILON && (normal != coat_normal || main_tangent_out != coat_tangent_out || main_roughness_out != coat_roughness_out)) {\n                Li = mx_environment_radiance(coat_normal, V, coat_tangent_out, coat_roughness_out, 0);\n            }\n            mx_dielectric_brdf_indirect(V, coat, vec3(1.0), coat_IOR, coat_roughness_out, coat_normal, Li, metalness_mix_attenuated_out, coat_bsdf_out);\n            standard_surface_constructor_out.color += coat_bsdf_out;\n        }\n        {\n            BSDF transmission_bsdf_out = BSDF(0.0);\n            mx_dielectric_btdf_transmission(V, 1.0, transmission_color, specular_IOR, main_roughness_out, normal, main_tangent_out, 0, VDF(vec3(0.0),vec3(0.0)), transmission_bsdf_out);\n            BSDF metal_bsdf_out = BSDF(0.0);\n            BSDF translucent_bsdf_out = BSDF(0.0);\n            BSDF subsurface_bsdf_out = BSDF(0.0);\n            BSDF diffuse_bsdf_out = BSDF(0.0);\n            BSDF selected_subsurface_bsdf_out = BSDF(0.0);\n            mx_mix_bsdf_transmission(V, translucent_bsdf_out, subsurface_bsdf_out, subsurface_selector_out, selected_subsurface_bsdf_out);\n            BSDF sheen_bsdf_out = BSDF(0.0);\n            BSDF subsurface_mix_out = BSDF(0.0);\n            mx_mix_bsdf_transmission(V, selected_subsurface_bsdf_out, sheen_bsdf_out, subsurface, subsurface_mix_out);\n            BSDF transmission_mix_out = BSDF(0.0);\n            mx_mix_bsdf_transmission(V, transmission_bsdf_out, subsurface_mix_out, transmission, transmission_mix_out);\n            BSDF specular_bsdf_out = BSDF(0.0);\n            mx_dielectric_brdf_transmission(V, specular, specular_color, specular_IOR, main_roughness_out, normal, main_tangent_out, 0, transmission_mix_out, specular_bsdf_out);\n            BSDF metalness_mix_out = BSDF(0.0);\n            mx_mix_bsdf_transmission(V, metal_bsdf_out, specular_bsdf_out, metalness, metalness_mix_out);\n            BSDF metalness_mix_attenuated_out = BSDF(0.0);\n            mx_multiply_bsdf_color_transmission(V, metalness_mix_out, coat_attenuation_out, metalness_mix_attenuated_out);\n            BSDF coat_bsdf_out = BSDF(0.0);\n            mx_dielectric_brdf_transmission(V, coat, vec3(1.0), coat_IOR, coat_roughness_out, coat_normal, coat_tangent_out, 0, metalness_mix_attenuated_out, coat_bsdf_out);\n            standard_surface_constructor_out.transparency = coat_bsdf_out;\n        }\n        standard_surface_constructor_out.color *= surfaceOpacity;\n        standard_surface_constructor_out.transparency = mix(vec3(1.0), standard_surface_constructor_out.transparency, surfaceOpacity);\n    }\n    out275 = standard_surface_constructor_out;\n}\n#include<cutplanes>\nvoid main() {\n#if NUM_CUTPLANES > 0\n    checkCutPlanes(vWorldPosition);\n#endif\n    vec2 uv = vec2(0.0);\n    uv = vUv;\n#ifdef USE_TILING\n    vec3 tilingXform = tilingTransform(vUv, tilingOverallTransform);\n    vec4 tilingMap = tilingMapText(TilingMap, TilingMap_texMatrix, tilingXform, uv2tile, tile2uv);\n    uv = tilingSubMaterialRelocate(tilingXform, tilingMap, tile2uv) + tileAlignOffset;\n#ifdef USE_TILING_NORMAL\n    vec2 uvNorm = uv;\n#endif\n#ifdef USE_TILING_RANDOM\n    uv = tilingRandom(uv, tilingMap, TilingRandomMap, TilingRandomMap_texMatrix, tilingRandomAxisS, tilingRandomAxisT, tilingRandomAlignmentOffset);\n#endif\n    uv = tilingTransform(uv, tilingUVTransform).xy;\n#endif\n#ifdef USE_TILING_NORMAL\n    tilingNormalOffset(TilingNormalMap, uvNorm, TilingNormalMap_texMatrix, TBN[0], TBN[1], TBN[2]);\n#endif\n    vec3 T, B;\n    computeTangets(vWorldPosition, uv, T, B);\n    mat3 TBN = get_TBN(vWorldNormal, T, B, uv);\n    mat3 coat_TBN = get_coat_TBN(vWorldNormal, T, B, uv);\n    surfaceshader SR_out = surfaceshader(vec3(0.0), vec3(0.0));\n    IMPL_standard_surface_surfaceshader(\n        get_base(uv),\n        get_base_color(uv),\n        get_diffuse_roughness(uv),\n        get_metalness(uv),\n        get_specular(uv),\n        get_specular_color(uv),\n        get_specular_roughness(uv),\n        get_specular_IOR(uv),\n        get_specular_anisotropy(uv),\n        get_specular_rotation(uv),\n        get_transmission(uv),\n        get_transmission_color(uv),\n        get_transmission_depth(uv),\n        get_transmission_scatter(uv),\n        get_transmission_scatter_anisotropy(uv),\n        get_transmission_dispersion(uv),\n        get_transmission_extra_roughness(uv),\n        get_subsurface(uv),\n        get_subsurface_color(uv),\n        get_subsurface_radius(uv),\n        get_subsurface_scale(uv),\n        get_subsurface_anisotropy(uv),\n        get_sheen(uv),\n        get_sheen_color(uv),\n        get_sheen_roughness(uv),\n        get_coat(uv),\n        get_coat_color(uv),\n        get_coat_roughness(uv),\n        get_coat_anisotropy(uv),\n        get_coat_rotation(uv),\n        get_coat_IOR(uv),\n        coat_TBN[2],\n        get_coat_affect_color(uv),\n        get_coat_affect_roughness(uv),\n        get_thin_film_thickness(uv),\n        get_thin_film_IOR(uv),\n        get_emission(uv),\n        get_emission_color(uv),\n        get_opacity(uv),\n        get_thin_walled(uv),\n        TBN[2],\n        TBN[0],\n        vWorldPosition,\n        vWorldNormal,\n        cameraPosition,\n        SR_out);\n    float outAlpha = clamp(1.0 - dot(SR_out.transparency, vec3(0.3333)), 0.0, 1.0);\n    gl_FragColor = vec4(SR_out.color, outAlpha);\n#ifdef MRT_NORMALS\n    vec3 geomNormal = vGeomNormal;\n#endif\n#if TONEMAP_OUTPUT == 1\n    gl_FragColor.rgb = toneMapCanonOGS_WithGamma_WithColorPerserving(exposureBias * gl_FragColor.rgb);\n#elif TONEMAP_OUTPUT == 2\n    gl_FragColor.rgb = toneMapCanonFilmic_WithGamma(exposureBias * gl_FragColor.rgb);\n#endif\n#ifdef USE_FOG\n    float fogdepth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep(fogNear, fogFar, fogdepth);\n    gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.a), fogFactor);\n#endif\n#ifdef USE_TILING\n    gl_FragColor.a *= tilingMap.a;\n#endif\n#include<theming_frag>\n#include<final_frag>\n}\n"},31:function(e,t){e.exports="gl_FragColor.rgb = mix(gl_FragColor.rgb, themingColor.rgb, themingColor.a);\n"},32:function(e,t){e.exports="\n#ifdef USE_INSTANCING\nattribute vec3 instOffset;\nattribute vec4 instRotation;\nattribute vec3 instScaling;\nvec3 applyQuaternion(vec3 p, vec4 q) {\n    return p + 2.0 * cross(q.xyz, cross(q.xyz, p) + q.w * p);\n}\nvec3 getInstancePos(vec3 pos) {\n    return instOffset + applyQuaternion(instScaling * pos, instRotation);\n}\nvec3 getInstanceNormal(vec3 normal) {\n    return applyQuaternion(normal/instScaling, instRotation);\n}\n#else\nvec3 getInstancePos(vec3 pos)       { return pos;    }\nvec3 getInstanceNormal(vec3 normal) { return normal; }\n#endif\n"},33:function(e,t){e.exports="\nuniform float shadowESMConstant;\nuniform float shadowMapRangeMin;\nuniform float shadowMapRangeSize;\n"},34:function(e,t){e.exports="\n#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord;\nuniform mat4 shadowMatrix;\n#endif\n"},35:function(e,t){e.exports="\n#ifdef USE_SHADOWMAP\n{\n    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n    vShadowCoord = shadowMatrix * worldPosition;\n}\n#endif\n"},36:function(e,t){e.exports="\n#ifdef USE_SHADOWMAP\nuniform sampler2D shadowMap;\nuniform vec2      shadowMapSize;\nuniform float     shadowDarkness;\nuniform float     shadowBias;\nuniform vec3      shadowLightDir;\nvarying vec4 vShadowCoord;\n#include<shadowmap_decl_common>\nfloat getShadowValue() {\n    float fDepth;\n    vec3 shadowColor = vec3( 1.0 );\n    vec3 shadowCoord = vShadowCoord.xyz / vShadowCoord.w;\n    shadowCoord.xyz = 0.5 * (shadowCoord.xyz + vec3(1.0, 1.0, 1.0));\n    bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n    bool inFrustum = all( inFrustumVec );\n    float shadowValue = 1.0;\n    if (inFrustum) {\n        shadowCoord.z = min(0.999, shadowCoord.z);\n        shadowCoord.z -= shadowBias;\n#ifdef USE_HARD_SHADOWS\n        vec4 rgbaDepth = texture2D( shadowMap, shadowCoord.xy );\n        float fDepth = rgbaDepth.r;\n        if ( fDepth < shadowCoord.z ) {\n            shadowValue = 1.0 - shadowDarkness;\n        }\n#else\n        vec4 rgbaDepth = texture2D( shadowMap, shadowCoord.xy );\n        float shadowMapValue = rgbaDepth.r;\n        shadowValue = exp(-shadowESMConstant * shadowCoord.z) * shadowMapValue;\n        shadowValue = min(shadowValue, 1.0);\n        shadowValue = mix(1.0 - shadowDarkness, 1.0, shadowValue);\n#endif\n    }\n    return shadowValue;\n}\n#else\nfloat getShadowValue() { return 1.0; }\n#endif\nvec3 applyEnvShadow(vec3 colorWithoutShadow, vec3 worldNormal) {\n#if defined(USE_SHADOWMAP)\n    float dp  = dot(shadowLightDir, worldNormal);\n    float dpValue = (dp + 1.0) / 2.0;\n    dpValue = min(1.0, dpValue * 1.5);\n    float sv = getShadowValue();\n    vec3 result = colorWithoutShadow * min(sv, dpValue);\n    return result;\n#else\n    return colorWithoutShadow;\n#endif\n}\n"},37:function(e,t){e.exports="float averageOfFloat3(in vec3 value) { \n    const float oneThird = 1.0 / 3.0; \n    return dot(value, vec3(oneThird, oneThird, oneThird)); \n} \n"},38:function(e,t){e.exports="\n#define LINE_2D_SHADER 1\n#define TAU     6.28318530718\n#define PI      3.14159265358979\n#define HALF_PI 1.57079632679\n#define PI_0_5  HALF_PI\n#define PI_1_5  4.71238898038\n#define ENABLE_ID_DISCARD\n#define VBB_GT_TRIANGLE_INDEXED  0.0\n#define VBB_GT_LINE_SEGMENT      1.0\n#define VBB_GT_ARC_CIRCULAR      2.0\n#define VBB_GT_ARC_ELLIPTICAL    3.0\n#define VBB_GT_TEX_QUAD          4.0\n#define VBB_GT_ONE_TRIANGLE      5.0\n#define VBB_GT_MSDF_TRIANGLE_INDEXED 6.0\n#define VBB_INSTANCED_FLAG   0.0\n#define VBB_SEG_START_RIGHT  0.0\n#define VBB_SEG_START_LEFT   1.0\n#define VBB_SEG_END_RIGHT    2.0\n#define VBB_SEG_END_LEFT     3.0\n#define LTSCALE 0.25\nvarying vec4 fsColor;\nvarying vec2 fsOffsetDirection;\nvarying vec4 fsMultipurpose;\nvarying float fsHalfWidth;\nvarying vec2 fsVpTC;\nvarying float fsGhosting;\n#ifdef LOADING_ANIMATION\nvarying float loadingProgress;\n#endif\n"},39:function(e,t){e.exports="#if defined( PRISMWOOD )\n#define ONE 0.00390625\nfloat GetIndexedValue(vec4 array, int index)\n{\n    if (index == 0)\n        return array[0];\n    else if (index == 1)\n        return array[1];\n    else if (index == 2)\n        return array[2];\n    else if (index == 3)\n        return array[3];\n    else\n        return 0.0;\n}\nint GetIndexedValue(ivec2 array, int index)\n{\n    if (index == 0)\n        return array[0];\n    else if (index == 1)\n        return array[1];\n    else\n        return 0;\n}\n#if defined( USE_WOOD_CURLY_DISTORTION_MAP )\nfloat SampleCurlyPattern(vec2 uv)\n{\n    vec2 uv_wood_curly_distortion_map = (wood_curly_distortion_map_texMatrix * vec3(uv, 1.0)).xy;\n    WOOD_CURLY_DISTORTION_CLAMP_TEST;\n    vec3 curlyDistortion = texture2D(wood_curly_distortion_map, uv_wood_curly_distortion_map).xyz;\n    if(wood_curly_distortion_map_invert) curlyDistortion = vec3(1.0) - curlyDistortion;\n    return curlyDistortion.r;\n}\nvec3 DistortCurly(vec3 p)\n{\n    if (!wood_curly_distortion_enable) return p;\n    float r = length(p.xy);\n    if (r < 0.00001) return p;\n    const float INV_ANGLE_INTERVAL = 1.27323954;\n    const float NUM_INTERVAL = 8.0;\n    float theta = atan(p.y, p.x);\n    if (theta < 0.0)\n        theta += PI2;\n    float intIdx = theta * INV_ANGLE_INTERVAL;\n    int idx0 = int(mod(floor(intIdx), NUM_INTERVAL));\n    int idx1 = int(mod(ceil(intIdx), NUM_INTERVAL));\n    const vec4 HASH_TABLE1 = vec4(0.450572,0.114598, 0.886043, 0.315119);\n    const vec4 HASH_TABLE2 = vec4(0.216133,0.306264, 0.685616, 0.317907);\n    float offset0 = idx0 < 4 ? GetIndexedValue(HASH_TABLE1, idx0) : GetIndexedValue(HASH_TABLE2, idx0-4);\n    float offset1 = idx1 < 4 ? GetIndexedValue(HASH_TABLE1, idx1) : GetIndexedValue(HASH_TABLE2, idx1-4);\n    const float maxOffset = 100.0;\n    offset0 = (offset0 - 0.5) * maxOffset;\n    offset1 = (offset1 - 0.5) * maxOffset;\n    vec2 uv0 = vec2(p.z + offset0, r);\n    float shiftWeight0 =  SampleCurlyPattern(uv0);\n    vec2 uv1 = vec2(p.z + offset1, r);\n    float shiftWeight1 =  SampleCurlyPattern(uv1);\n    float interpWeight = fract(intIdx);\n    float shiftWeight = mix(shiftWeight0, shiftWeight1, interpWeight);\n    const float INV_MIN_RADIUS = 2.0;\n    float shiftWeightAdjust = smoothstep(0.0, 1.0, r * INV_MIN_RADIUS);\n    r -= wood_curly_distortion_scale * (shiftWeight * shiftWeightAdjust);\n    float thetaNew = atan(p.y, p.x);\n    vec3 pNew = p;\n    pNew.x = r * cos(thetaNew);\n    pNew.y = r * sin(thetaNew);\n    return pNew;\n}\n#endif\nvec3 un2sn(vec3 range)\n{\n    return range * 2.0 - 1.0;\n}\nfloat inoise(vec3 p)\n{\n    vec3 modp = mod(floor(p), 256.0);\n    modp.xy = modp.xy * ONE;\n    vec4 AA = texture2D(perm2DMap, vec2(modp.x, modp.y), 0.0) * 255.0;\n    AA = AA + modp.z;\n    AA = mod(floor(AA), 256.0);\n    AA *= ONE;\n    vec3 gradx1 = un2sn(texture2D(permGradMap,vec2(AA.x,0.0),0.0).xyz);\n    vec3 grady1 = un2sn(texture2D(permGradMap,vec2(AA.y,0.0),0.0).xyz);\n    vec3 gradz1 = un2sn(texture2D(permGradMap,vec2(AA.z,0.0),0.0).xyz);\n    vec3 gradw1 = un2sn(texture2D(permGradMap,vec2(AA.w,0.0),0.0).xyz);\n    vec3 gradx2 = un2sn(texture2D(permGradMap,vec2(AA.x + ONE,0.0),0.0).xyz);\n    vec3 grady2 = un2sn(texture2D(permGradMap,vec2(AA.y + ONE,0.0),0.0).xyz);\n    vec3 gradz2 = un2sn(texture2D(permGradMap,vec2(AA.z + ONE,0.0),0.0).xyz);\n    vec3 gradw2 = un2sn(texture2D(permGradMap,vec2(AA.w + ONE,0.0),0.0).xyz);\n    p -= floor(p);\n    vec3 fadep = p * p * p * (p * (p * 6.0 - 15.0) + 10.0);\n    return mix( mix( mix( dot(gradx1, p ),\n                          dot(gradz1, p + vec3(-1.0, 0.0, 0.0)), fadep.x),\n                     mix( dot(grady1, p + vec3(0.0, -1.0, 0.0)),\n                          dot(gradw1, p + vec3(-1.0, -1.0, 0.0)), fadep.x), fadep.y),\n                mix( mix( dot(gradx2, p + vec3(0.0, 0.0, -1.0)),\n                          dot(gradz2, p + vec3(-1.0, 0.0, -1.0)), fadep.x),\n                     mix( dot(grady2, p + vec3(0.0, -1.0, -1.0)),\n                          dot(gradw2, p + vec3(-1.0, -1.0, -1.0)), fadep.x), fadep.y), fadep.z);\n}\nfloat inoise(float p)\n{\n    float modp = mod(floor(p), 256.0);\n    modp = (modp + 256.0) * ONE;\n    float permx = texture2D(permutationMap, vec2(modp, 0.0), 0.0).r;\n    float gradx = texture2D(gradientMap, vec2(permx, 0.0), 0.0).r*2.0-1.0;\n    float permy = texture2D(permutationMap, vec2(modp + ONE, 0.0), 0.0).r;\n    float grady = texture2D(gradientMap, vec2(permy, 0.0), 0.0).r*2.0-1.0;\n    p -= floor(p);\n    float fadep = p * p * p * (p * (p * 6.0 - 15.0) + 10.0);\n    return mix(gradx * p, grady * (p - 1.0), fadep);\n}\nfloat multiband_inoise(vec3 p, int bands, vec4 w, vec4 f)\n{\n    float noise = 0.0;\n    for(int i = 0; i < 4; ++i)\n    {\n        if (i >= bands) break;\n        noise += GetIndexedValue(w, i) * inoise(p * GetIndexedValue(f, i));\n    }\n    return noise;\n}\nfloat multiband_inoise(float p, int bands, vec4 w, vec4 f)\n{\n    float noise = 0.0;\n    for(int i = 0; i < 4; ++i)\n    {\n        if (i >= bands) break;\n        noise += GetIndexedValue(w, i) * inoise(p * GetIndexedValue(f, i));\n    }\n    return noise;\n}\nvec3 Distort3DCosineRadialDir(vec3 p)\n{\n    float radius = length(p.xy);\n    if (radius < 0.00001) return p;\n    vec2 theta = p.xy / radius;\n    float radiusShift = 0.0;\n    for (int i = 0; i < 4; ++i)\n    {\n        if (i >= wood_fiber_cosine_bands) break;\n        radiusShift += GetIndexedValue(wood_fiber_cosine_weights, i) * cos(p.z * RECIPROCAL_PI2 * GetIndexedValue(wood_fiber_cosine_frequencies, i));\n    }\n    const float MIN_RADIUS = 1.5;\n    float weight = clamp(radius / MIN_RADIUS, 0.0, 1.0);\n    if(weight >= 0.5)\n        weight = weight * weight * (3.0 - (weight + weight));\n    p.xy += theta * radiusShift * weight;\n    return p;\n}\nvec3 Distort3DPerlin(vec3 p)\n{\n    vec3 pAniso = vec3(p.xy, p.z * wood_fiber_perlin_scale_z);\n    p.xy += multiband_inoise(pAniso, wood_fiber_perlin_bands, wood_fiber_perlin_weights, wood_fiber_perlin_frequencies);\n    return p;\n}\nvec3 Distort(vec3 p)\n{\n    if(wood_fiber_cosine_enable)\n        p = Distort3DCosineRadialDir(p);\n    if(wood_fiber_perlin_enable)\n        p = Distort3DPerlin(p);\n    return p;\n}\nfloat DistortRadiusLength(float radiusLength)\n{\n    radiusLength += multiband_inoise(radiusLength, wood_growth_perlin_bands, wood_growth_perlin_weights, wood_growth_perlin_frequencies);\n    if (radiusLength < 0.0) radiusLength = 0.0;\n    return radiusLength;\n}\nfloat ComputeEarlyWoodRatio(float radiusLength)\n{\n    float fraction = mod(radiusLength, wood_ring_thickness) / wood_ring_thickness;\n    if (fraction <= wood_ring_fraction.y)\n       return 1.0;\n    else if(fraction <= wood_ring_fraction.x)\n       return (1.0 - (fraction - wood_ring_fraction.y) / wood_fall_rise.x);\n    else if(fraction <= wood_ring_fraction.w)\n       return 0.0;\n    else\n       return ((fraction - wood_ring_fraction.w) / wood_fall_rise.y);\n}\nvec3 DistortEarlyColor(vec3 earlyColor, float radiusLength)\n{\n    float expValue = 1.0 + multiband_inoise(radiusLength,wood_earlycolor_perlin_bands,wood_earlycolor_perlin_weights,wood_earlycolor_perlin_frequencies);\n    earlyColor = pow(abs(earlyColor), vec3(expValue));\n    return earlyColor;\n}\nvec3 DistortLateColor(vec3 lateColor, float radiusLength)\n{\n    float expValue = 1.0 + multiband_inoise(radiusLength,wood_latecolor_perlin_bands,wood_latecolor_perlin_weights,wood_latecolor_perlin_frequencies);\n    lateColor = pow(abs(lateColor), vec3(expValue));\n    return lateColor;\n}\nvec3 DistortDiffuseColor(vec3 diffAlbedo, vec3 p)\n{\n    p.z *= wood_diffuse_perlin_scale_z;\n    float expValue = 1.0 + multiband_inoise(p, wood_diffuse_perlin_bands, wood_diffuse_perlin_weights, wood_diffuse_perlin_frequencies);\n    diffAlbedo = pow(abs(diffAlbedo), vec3(expValue));\n    return diffAlbedo;\n}\nfloat LayerRoughnessVar(float roughness, float earlyWoodRatio)\n{\n    return earlyWoodRatio * wood_groove_roughness + (1.0 - earlyWoodRatio) * roughness;\n}\nfloat hashword(vec2 k)\n{\n    k = mod(k, vec2(256.0)) * ONE;\n    float a = texture2D(permutationMap, vec2(k.x, 0.0)).x + k.y ;\n    a = texture2D(permutationMap, vec2(a, 0.0)).x ;\n    return a*255.0;\n}\nfloat wyvillsq(float rsq)\n{\n    if (rsq >= 1.0) return 0.0;\n    float tmp = 1.0 - rsq;\n    return tmp*tmp*tmp;\n}\nfloat Weight2DNeighborImpulses(vec3 p, float woodWeight)\n{\n    if(woodWeight <= 0.0) return 0.0;\n    float poreRadius = wood_pore_radius * woodWeight;\n    vec2 left = floor((p.xy - poreRadius) / wood_pore_cell_dim);\n    vec2 right = floor((p.xy + poreRadius) / wood_pore_cell_dim);\n    float weight = 0.0;\n    float invRsq = 1.0 / (poreRadius * poreRadius);\n    const float norm =  1.0 / 15.0;\n    for (int j = 0; j <= 4; j++)\n    {\n        if (j > int(right.y - left.y)) continue;\n        for (int i = 0; i <= 4; i++)\n        {\n            if (i > int(right.x - left.x)) continue;\n            vec2 pij = vec2(float(i) + left.x,float(j) + left.y);\n            float hRNum = hashword(pij);\n            float impPosX = mod(hRNum, 16.0) * norm;\n            float impPosY = floor(hRNum / 16.0) * norm;\n            impPosX = (pij.x + impPosX)* wood_pore_cell_dim;\n            impPosY = (pij.y + impPosY)* wood_pore_cell_dim;\n            float dsq = (p.x - impPosX) * (p.x - impPosX) + (p.y - impPosY) * (p.y - impPosY);\n            weight += wyvillsq(dsq * invRsq);\n        }\n    }\n    return weight;\n}\nfloat Weight3DRayImpulses(vec3 p)\n{\n    int segIdx = int(floor(p.z / wood_ray_seg_length_z));\n    float factor = p.z / wood_ray_seg_length_z - float(segIdx);\n    int segIdx1 = segIdx - 1;\n    if ( factor > 0.5 )\n        segIdx1 = segIdx + 1;\n    float theta = atan(p.y, p.x);\n    float sliceIdx = floor(((theta + PI) * RECIPROCAL_PI2) * wood_ray_num_slices);\n    if ( sliceIdx == wood_ray_num_slices)\n        sliceIdx-=1.0;\n    ivec2 arrSegs = ivec2(segIdx, segIdx1);\n    float weight = 0.0;\n    const float norm =  1.0 / 15.0;\n    float radialOffset = 5.0;\n    float radialLength = length(p.xy);\n    for (int seg = 0; seg < 2; seg++)\n    {\n        float hRNum = hashword(vec2(sliceIdx, GetIndexedValue(arrSegs, seg)));\n        float rn1 = mod(hRNum,16.0) * norm;\n        if (radialLength < radialOffset * rn1)\n            continue;\n        float rayTheta = rn1;\n        rayTheta = ( ( sliceIdx + rayTheta ) / wood_ray_num_slices ) * ( 2.0 * PI ) - PI;\n        float rayPosZ = (hRNum/16.0)* norm;\n        rayPosZ = ( float(GetIndexedValue(arrSegs, seg)) + rayPosZ ) * wood_ray_seg_length_z;\n        vec3 pt1 = vec3(0.0);\n        vec3 pt2 = vec3(cos(rayTheta), sin(rayTheta), 0.0);\n        vec3 p1 = p;\n        p1.z -= rayPosZ;\n        p1.z /=  wood_ray_ellipse_z2x;\n        vec3 v1 = pt2 - pt1;\n        vec3 v2 = pt1 - p1;\n        v2 = cross(v1, v2);\n        float dist = length(v2) / length(v1);\n        float invRsq = 1.0 / ( wood_ray_ellipse_radius_x * wood_ray_ellipse_radius_x);\n        weight += wyvillsq( (dist * dist) * invRsq );\n    }\n    return weight;\n}\nvec3 DarkenColorWithPores(vec3 p, vec3 diffColor, float woodWeight)\n{\n    float poresWeight = Weight2DNeighborImpulses(p, woodWeight);\n    float a = wood_pore_color_power - 1.0;\n    float b = 1.0;\n    float y = a * poresWeight + b;\n    return pow(abs(diffColor), vec3(y));\n}\nvec3 DarkenColorWithRays(vec3 p, vec3 diffColor)\n{\n    float raysWeight = Weight3DRayImpulses(p);\n    float a = wood_ray_color_power - 1.0;\n    float b = 1.0;\n    float y = a * raysWeight + b;\n    return pow(abs(diffColor), vec3(y));\n}\nfloat ComputeWoodWeight(float earlyWoodRatio)\n{\n    float woodWeight = 0.0;\n    if (wood_pore_type == 0)\n        woodWeight = 1.0;\n    else if (wood_pore_type == 1)\n        woodWeight = earlyWoodRatio;\n    else if (wood_pore_type == 2)\n        woodWeight = 1.0 - earlyWoodRatio;\n    else\n        woodWeight = -1.0;\n    return woodWeight;\n}\n#if defined( PRISMWOODBUMP )\nfloat ComputeEarlyWoodRatioAA(float radiusLength, float invUnitExt)\n{\n    float transPixels = min(wood_fall_rise.x, wood_fall_rise.y) * wood_ring_thickness * invUnitExt;\n    float samplesf = clamp(4.0 / transPixels, 1.0, 4.0);\n    int samples = int(samplesf);\n    float inverseSamples = 1.0 / float(samples);\n    vec2 rdelta = vec2(dFdx(radiusLength), dFdy(radiusLength)) * inverseSamples;\n    float earlywoodRatio = 0.0;\n    for (int i = 0; i < 4; ++i)\n    {\n        if (i >= samples) break;\n        for (int j = 0; j < 4; ++j)\n        {\n            if (j >= samples) break;\n            float r = radiusLength + dot(vec2(i, j), rdelta);\n            earlywoodRatio += ComputeEarlyWoodRatio(r);\n        }\n    }\n    return earlywoodRatio * (inverseSamples * inverseSamples);\n}\nfloat LatewoodDepthVariation(float invUnitExt)\n{\n    float transPixels = min(wood_fall_rise.x, wood_fall_rise.y) * wood_ring_thickness * invUnitExt;\n    return clamp(transPixels * 0.5, 0.0, 1.0);\n}\nfloat LatewoodHeightVariation(float earlyWoodRatio, float latewoodBumpDepth,\n                              float depthVar)\n{\n    return ( 1.0 - earlyWoodRatio ) * latewoodBumpDepth * depthVar;\n}\nfloat PoreDepthVariation(float woodWeight, float invUnitExt)\n{\n    float porePixels = woodWeight * wood_pore_radius * invUnitExt;\n    return clamp(porePixels, 0.0, 1.0);\n}\nfloat PoreHeightVariation(float earlyWoodRatio, float poresWeight, float poreDepth,\n                          float depthVar)\n{\n    return poresWeight * (-1.0 * poreDepth) * depthVar;\n}\nvoid ComputeTangents(vec3 normal, out vec3 u, out vec3 v)\n{\n    float scale = normal.z < 0.0 ? -1.0 : 1.0;\n    vec3 temp = scale * normal;\n    float e    = temp.z;\n    float h    = 1.0/(1.0 + e);\n    float hvx  = h   *  temp.y;\n    float hvxy = hvx * -temp.x;\n    u = vec3(e + hvx * temp.y, hvxy,                -temp.x);\n    v = vec3(hvxy,             e + h * temp.x * temp.x, -temp.y);\n    u *= scale;\n    v *= scale;\n}\nvec3 WoodBumpHeight(float heightLeft, float heightRight, float heightBack, float heightFront)\n{\n    const float epsilon = 0.001;\n    float heightDeltaX = heightRight - heightLeft;\n    vec3 Tu = vec3(2.0 * epsilon, 0.0, heightDeltaX);\n    float heightDeltaY = heightFront - heightBack;\n    vec3 Tv = vec3(0.0, 2.0 * epsilon, heightDeltaY);\n    return cross(Tu, Tv);\n}\nvec3 SelectNormal(vec3 N, vec3 bumpN, vec3 V)\n{\n    float bumpNdotV = dot(bumpN, V);\n    if(bumpNdotV > 0.0)\n        return bumpN;\n    else return N;\n}\nfloat MinInverseUnitExtent(vec3 p)\n{\n    return 1.0 / max(max(length(dFdx(p.xy)), length(dFdy(p.xy))), 0.000001);\n}\nfloat HeightVariation(vec3 pos)\n{\n    vec3 p = Distort(pos);\n    float radiusLength = length(p.xy);\n    if (wood_growth_perlin_enable)\n        radiusLength = DistortRadiusLength(radiusLength);\n    float invUnitExt = MinInverseUnitExtent(p);\n    float earlyWoodRatio = ComputeEarlyWoodRatioAA(radiusLength, invUnitExt);\n    float woodWeight = ComputeWoodWeight(earlyWoodRatio);\n    float poresWeight = Weight2DNeighborImpulses(p, woodWeight);\n    float depthVar = PoreDepthVariation(woodWeight, invUnitExt);\n    float poreHeightVariation = -1.0 * poresWeight * wood_pore_depth * depthVar;\n    float latewoodHeightVariation = 0.0;\n    if (wood_use_latewood_bump)\n    {\n        float latewoodDepthVar = LatewoodDepthVariation(invUnitExt);\n        latewoodHeightVariation = (1.0 - earlyWoodRatio) * wood_latewood_bump_depth * latewoodDepthVar;\n    }\n    float sumHeightVariation = poreHeightVariation + latewoodHeightVariation;\n    return sumHeightVariation;\n}\n#endif\nvec3 NoiseWood(vec3 p, inout float roughness)\n{\n    p = Distort(p);\n    float radiusLength = length(p.xy);\n    if(wood_growth_perlin_enable)\n        radiusLength = DistortRadiusLength(radiusLength);\n#if defined( PRISMWOODBUMP )\n    float invUnitExt = MinInverseUnitExtent( p );\n    float earlyWoodRatio = ComputeEarlyWoodRatioAA(radiusLength, invUnitExt);\n#else\n    float earlyWoodRatio = ComputeEarlyWoodRatio(radiusLength);\n#endif\n    vec3 earlyColor = wood_early_color;\n    if (wood_earlycolor_perlin_enable)\n        earlyColor = DistortEarlyColor(earlyColor, radiusLength);\n    vec3 lateColor;\n    if (wood_use_manual_late_color)\n        lateColor = wood_manual_late_color;\n    else\n        lateColor = pow(abs(earlyColor), vec3(wood_late_color_power));\n    if(wood_latecolor_perlin_enable)\n        lateColor = DistortLateColor(lateColor, radiusLength);\n    vec3 diffAlbedo = earlyWoodRatio * earlyColor + (1.0 - earlyWoodRatio) * lateColor;\n    if(wood_diffuse_perlin_enable)\n        diffAlbedo = DistortDiffuseColor(diffAlbedo, p);\n    if (wood_use_pores)\n    {\n        float woodWeight = ComputeWoodWeight(earlyWoodRatio);\n        diffAlbedo = DarkenColorWithPores(p, diffAlbedo, woodWeight);\n    }\n    if (wood_use_rays)\n        diffAlbedo = DarkenColorWithRays(p, diffAlbedo);\n    if(wood_use_groove_roughness)\n        roughness = LayerRoughnessVar(roughness, earlyWoodRatio);\n    return clamp(diffAlbedo, vec3(0.0), vec3(1.0));\n}\n#if defined(PRISMWOODBUMP)\nvoid getFinalWoodContext(\n    inout vec3 N, vec3 V, inout vec3 Tu, inout vec3 Tv, vec3 p,\n    vec3 geoNormal, vec3 tNormal, mat3 normalMatrix\n) {\n    vec3 offsetTuLeft = p - 0.001 * Tu;\n    vec3 offsetTuRight = p + 0.001 * Tu;\n    vec3 offsetTvLeft = p - 0.001 * Tv;\n    vec3 offsetTvRight = p + 0.001 * Tv;\n    float heightVariationTuLeft = HeightVariation(offsetTuLeft);\n    float heightVariationTuRight = HeightVariation(offsetTuRight);\n    float heightVariationTvLeft = HeightVariation(offsetTvLeft);\n    float heightVariationTvRight = HeightVariation(offsetTvRight);\n    vec3 bumpHeight = WoodBumpHeight(heightVariationTuLeft, heightVariationTuRight, heightVariationTvLeft, heightVariationTvRight);\n    vec3 newNormal = normalize(bumpHeight.x * Tu + bumpHeight.y * Tv + bumpHeight.z * vtNormal);\n    vec3 newNormalView = normalize(vNormalMatrix * newNormal);\n    vec3 selectedNormal = SelectNormal(geoNormal, newNormalView, V);\n    ComputeTangents(selectedNormal, Tu, Tv);\n    Tu = normalize(Tu);\n    Tv = normalize(Tv);\n    N = faceforward(selectedNormal, -V, selectedNormal);\n}\n#endif\n#endif\n"},40:function(e,t){e.exports="\nvec3 TransmitAdjust(vec3 transmission, vec3 f0) \n{ \n   vec3 limit = max(1.0 - f0, 0.00001); \n   return clamp(transmission, vec3(0.0, 0.0, 0.0), limit) / limit; \n} \nfloat ColorToIlluminance(in vec3 color) \n{ \n   const vec3 rgb2grey = vec3(0.299, 0.587, 0.114); \n   float illuminance = dot(rgb2grey, color); \n   return illuminance; \n} \nvoid applyPrismGlazingOpacity(\n    inout vec4 color,\n    vec3 transmissionF,\n    float transmissionAlpha,\n    float NdotV,\n    float glazingIlluminace) \n{\n    const float third = 1.0/3.0; \n    float transSurface = exp(-(transmissionAlpha + (transmissionAlpha < 0.0025 ? 0.0 : 0.25)) * NdotV * PI); \n    float opacity = 1.0- dot((1.0 - transmissionF), vec3(third,third,third)) * transSurface * glazingIlluminace; \n    opacity = clamp(opacity, 0.01, 0.99);\n    color.a *= opacity;\n} \n"},41:function(e,t){e.exports="void applyPrismTransparency(\n    inout vec4 color,\n    vec3 transparentColor,\n    float transparentIor\n) {\n    float fsLevel = max(max(color.r, color.g), color.b);\n    color = vec4(color.rgb/fsLevel, fsLevel);\n    float transLevel = min(min(transparentColor.r, transparentColor.g), transparentColor.b);\n    transLevel = min( (1.0 - surface_roughness), transLevel );\n    float transAlpha = (1.0 - transLevel) * 0.4 + surface_roughness * 0.55;\n    vec3 tr_g_color = sqrt(transparentColor);\n    vec4 transColor = vec4(0.5 * vec3(tr_g_color), transAlpha);\n    float strength = 1.0 - (1.0 - fsLevel) * (1.0 - fsLevel);\n    color = mix(transColor, color, strength);\n    color.a = max(color.a, 0.05);\n    if (transparentIor == 1.0 && tr_g_color == vec3(1.0)) {\n        color.a = 0.0;\n    }\n}"},42:function(e,t){e.exports="#if defined(USE_SURFACE_NORMAL_MAP) || defined( USE_LAYERED_NORMAL_MAP ) || defined( USE_TILING_NORMAL )\nvoid heightMapTransform(\n    sampler2D bumpTexture,\n    vec2 uv,\n    mat3 transform,\n    vec2 bumpScale,\n    inout vec3 T,\n    inout vec3 B,\n    inout vec3 N\n) {\n    vec2 st = (transform * vec3(uv, 1.0)).xy;\n    mat3 mtxTangent = mat3(T, B, N);\n    T = normalize(mtxTangent * (transform * vec3(1.0, 0.0, 0.0)));\n    B = normalize(mtxTangent * (transform * vec3(0.0, 1.0, 0.0)));\n    const float oneThird = 1.0 / 3.0;\n    vec3 avg = vec3(oneThird, oneThird, oneThird);\n    vec2 offset = fwidth(st);\n    float h0 = dot(texture2D(bumpTexture, st).xyz, avg);\n    float hx = dot(texture2D(bumpTexture, st + vec2(offset.x, 0.0)).xyz, avg);\n    float hy = dot(texture2D(bumpTexture, st + vec2(0.0, offset.y)).xyz, avg);\n    vec2 diff = vec2(h0 - hx, h0 - hy) / offset;\n    N = normalize(\n        N + (\n            diff.x * T * bumpScale.x +\n            diff.y * B * bumpScale.y\n        )\n    );\n}\nvoid normalMapTransform(\n    sampler2D bumpTexture,\n    vec2 uv,\n    mat3 transform,\n    vec2 bumpScale,\n    inout vec3 T,\n    inout vec3 B,\n    inout vec3 N\n) {\n    vec2 st = (transform * vec3(uv, 1.0)).xy;\n    vec3 mapN =  2.0 * texture2D(bumpTexture, st).xyz - 1.0;\n    mapN.xy *= bumpScale.x;\n    mapN.z *= bumpScale.y;\n    vec3 v = vec3(mapN.y, -mapN.x, 0.0);\n    float c = -mapN.z;\n    mat3 skewV = mat3(\n        0.0, v.z, -v.y,\n        -v.z, 0.0, v.x,\n        v.y, -v.x, 0.0\n    );\n    mat3 rot = mat3(1.0) + skewV + skewV*skewV * 1.0/(1.0-c);\n    N *= rot;\n    T *= rot;\n    B *= rot;\n}\n#endif\n"},43:function(e,t){e.exports="uniform float point_size;"},44:function(e,t){e.exports="gl_PointSize = point_size;"},45:function(e,t){e.exports="\n#ifdef WIDE_LINES\nattribute vec3 prev;\nattribute vec3 next;\nattribute float side;\nuniform vec2 view_size;\nvec2 to2d(vec4 i) {\n  return i.xy / i.w;\n}\n#endif\n"},46:function(e,t){e.exports="\n#ifdef WIDE_LINES\nvec4 mvpPosition = projectionMatrix * mvPosition; \nmat3 vectorMatrix = mat3(modelViewMatrix);\nvec2 _pos = to2d(mvpPosition) * view_size;\nvec2 _prev = to2d(projectionMatrix * vec4(mvPosition.xyz + vectorMatrix * (prev * 0.01), 1.0)) * view_size;\nvec2 _next = to2d(projectionMatrix * vec4(mvPosition.xyz - vectorMatrix * (next * 0.01), 1.0)) * view_size;\nvec2 dir1 = _pos - _next;\nvec2 dir2 = _prev - _pos;\ndir2 = (length(dir2) > 0.0000001) ? normalize(dir2) : vec2(0.0, 0.0);\ndir1 = (length(dir1) > 0.0000001) ? normalize(dir1) : dir2;\nvec2 dir_sharp = normalize(dir1 + dir2);\nvec2 dir = normalize(dir1 + dir_sharp);\nvec2 offset = vec2(-dir.y, dir.x);\nfloat len = 1.0 / cross(vec3(offset, 0), vec3(dir1, 0)).z;\noffset *= len;\noffset /= view_size;\noffset *= side;\noffset *= mvpPosition.w;\nmvpPosition.xy += offset;\ngl_Position = mvpPosition;\n#endif\n"},47:function(e,t){e.exports="vec3 rgb2hsv(vec3 color)\n{\n    float delta;\n    float colorMax, colorMin;\n    float h,s,v;\n    vec3 hsv;\n    colorMax = max(color.r,color.g);\n    colorMax = max(colorMax,color.b);\n    colorMin = min(color.r,color.g);\n    colorMin = min(colorMin,color.b);\n    v = colorMax;\n    if(colorMax != 0.0)\n    {\n        s = (colorMax - colorMin)/colorMax;\n    }\n    else\n    {\n        s = 0.0;\n    }\n    if(s != 0.0)\n    {\n        delta = colorMax-colorMin;\n        if (color.r == colorMax)\n        {\n            h = (color.g-color.b)/delta;\n        }\n        else if (color.g == colorMax)\n        {\n            h = 2.0 + (color.b-color.r) / delta;\n        }\n        else\n        {\n            h = 4.0 + (color.r-color.g)/delta;\n        }\n        h /= 6.0;\n        if( h < 0.0)\n        {\n            h +=1.0;\n        }\n    }\n    else\n    {\n        h = 0.0;\n    }\n    hsv = vec3(h,s,v);\n    return hsv;\n}\nvec3 hsv2rgb(vec3 hsv)\n{\n    vec3 color;\n    float f,p,q,t;\n    float h,s,v;\n    float i,hi;\n    {\n        h = hsv.x*6.0;\n        s = hsv.y;\n        v = hsv.z;\n        i = floor(h);\n        f = h-i;\n        p = v * (1.0 - s);\n        q = v * (1.0 - (s * f));\n        t = v * (1.0 - (s * (1.0 - f)));\n        float r,g,b;\n        if (i == 0.0)\n        {\n            r = v;\n            g = t;\n            b = p;\n        }\n        else if (i == 1.0)\n        {\n            r = q;\n            g = v;\n            b = p;\n        }\n        else if (i == 2.0)\n        {\n            r = p;\n            g = v;\n            b = t;\n        }\n        else if (i == 3.0)\n        {\n            r = p;\n            g = q;\n            b = v;\n        }\n        else if (i == 4.0)\n        {\n            r = t;\n            g = p;\n            b = v;\n        }\n        else\n        {\n            r = v;\n            g = p;\n            b = q;\n        }\n        color = vec3(r,g,b);\n    }\n    return color;\n}"},535:function(e,t,r){"use strict";var a=r(94),n=r(57),o=r(96),i=r(147),s=r(148),l=n.ucs2length,c=r(95),u=o.Validation;function f(e,t,r){var a=p.call(this,e,t,r);return a>=0?{index:a,compiling:!0}:(a=this._compilations.length,this._compilations[a]={schema:e,root:t,baseId:r},{index:a,compiling:!1})}function d(e,t,r){var a=p.call(this,e,t,r);a>=0&&this._compilations.splice(a,1)}function p(e,t,r){for(var a=0;a<this._compilations.length;a++){var n=this._compilations[a];if(n.schema==e&&n.root==t&&n.baseId==r)return a}return-1}function m(e,t){return"var pattern"+e+" = new RegExp("+n.toQuotedString(t[e])+");"}function h(e){return"var default"+e+" = defaults["+e+"];"}function v(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function _(e){return"var customRule"+e+" = customRules["+e+"];"}function g(e,t){if(!e.length)return"";for(var r="",a=0;a<e.length;a++)r+=t(a,e);return r}e.exports=function e(t,r,p,y){var x=this,S=this._opts,b=[void 0],E={},P=[],w={},O=[],R={},T=[];r=r||{schema:t,refVal:b,refs:E};var A=f.call(this,t,r,y),M=this._compilations[A.index];if(A.compiling)return M.callValidate=function e(){var t=M.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var D=this._formats,N=this.RULES;try{var I=L(t,r,p,y);M.validate=I;var F=M.callValidate;return F&&(F.schema=I.schema,F.errors=null,F.refs=I.refs,F.refVal=I.refVal,F.root=I.root,F.$async=I.$async,S.sourceCode&&(F.source=I.source)),I}finally{d.call(this,t,r,y)}function L(t,i,f,d){var p=!i||i&&i.schema==t;if(i.schema!=r.schema)return e.call(x,t,i,f,d);var y,w=!0===t.$async,R=s({isTop:!0,schema:t,isRoot:p,baseId:d,root:i,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:o.MissingRef,RULES:N,validate:s,util:n,resolve:a,resolveRef:C,usePattern:z,useDefault:k,useCustomRule:$,opts:S,formats:D,logger:x.logger,self:x});R=g(b,v)+g(P,m)+g(O,h)+g(T,_)+R,S.processCode&&(R=S.processCode(R));try{y=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",R)(x,N,D,r,b,O,T,c,l,u),b[0]=y}catch(e){throw x.logger.error("Error compiling schema, function code:",R),e}return y.schema=t,y.errors=null,y.refs=E,y.refVal=b,y.root=p?y:i,w&&(y.$async=!0),!0===S.sourceCode&&(y.source={code:R,patterns:P,defaults:O}),y}function C(t,n,o){n=a.url(t,n);var i,s,l=E[n];if(void 0!==l)return V(i=b[l],s="refVal["+l+"]");if(!o&&r.refs){var c=r.refs[n];if(void 0!==c)return V(i=r.refVal[c],s=U(n,i))}s=U(n);var u=a.call(x,L,r,n);if(void 0===u){var f=p&&p[n];f&&(u=a.inlineRef(f,S.inlineRefs)?f:e.call(x,f,r,p,t))}if(void 0!==u)return function(e,t){var r=E[e];b[r]=t}(n,u),V(u,s);!function(e){delete E[e]}(n)}function U(e,t){var r=b.length;return b[r]=t,E[e]=r,"refVal"+r}function V(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function z(e){var t=w[e];return void 0===t&&(t=w[e]=P.length,P[t]=e),"pattern"+t}function k(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return n.toQuotedString(e);case"object":if(null===e)return"null";var t=i(e),r=R[t];return void 0===r&&(r=R[t]=O.length,O[r]=e),"default"+r}}function $(e,t,r,a){if(!1!==x._opts.validateSchema){var n=e.definition.dependencies;if(n&&!n.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+n.join(","));var o=e.definition.validateSchema;if(o)if(!o(t)){var i="keyword schema is invalid: "+x.errorsText(o.errors);if("log"!=x._opts.validateSchema)throw new Error(i);x.logger.error(i)}}var s,l=e.definition.compile,c=e.definition.inline,u=e.definition.macro;if(l)s=l.call(x,t,r,a);else if(u)s=u.call(x,t,r,a),!1!==S.validateSchema&&x.validateSchema(s,!0);else if(c)s=c.call(x,a,e.keyword,t,r);else if(!(s=e.definition.validate))return;if(void 0===s)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var f=T.length;return T[f]=s,{code:"customRule"+f,validate:s}}}},536:function(e,t,r){
/** @license URI.js v4.2.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var a=t.length-1,n=1;n<a;++n)t[n]=t[n].slice(1,-1);return t[a]=t[a].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function a(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function n(e){return e.toUpperCase()}function o(e){var a=t("[0-9]","[A-Fa-f]"),n=r(r("%[EFef]"+a+"%"+a+a+"%"+a+a)+"|"+r("%[89A-Fa-f]"+a+"%"+a+a)+"|"+r("%"+a+a)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",i=t("[\\:\\/\\?\\#\\[\\]\\@]",o),s=e?"[\\uE000-\\uF8FF]":"[]",l=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),u=r(r(n+"|"+t(l,o,"[\\:]"))+"*"),f=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|[0-9]"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),d=r(f+"\\."+f+"\\."+f+"\\."+f),p=r(a+"{1,4}"),m=r(r(p+"\\:"+p)+"|"+d),h=r(r(p+"\\:")+"{6}"+m),v=r("\\:\\:"+r(p+"\\:")+"{5}"+m),_=r(r(p)+"?\\:\\:"+r(p+"\\:")+"{4}"+m),g=r(r(r(p+"\\:")+"{0,1}"+p)+"?\\:\\:"+r(p+"\\:")+"{3}"+m),y=r(r(r(p+"\\:")+"{0,2}"+p)+"?\\:\\:"+r(p+"\\:")+"{2}"+m),x=r(r(r(p+"\\:")+"{0,3}"+p)+"?\\:\\:"+p+"\\:"+m),S=r(r(r(p+"\\:")+"{0,4}"+p)+"?\\:\\:"+m),b=r(r(r(p+"\\:")+"{0,5}"+p)+"?\\:\\:"+p),E=r(r(r(p+"\\:")+"{0,6}"+p)+"?\\:\\:"),P=r([h,v,_,g,y,x,S,b,E].join("|")),w=r(r(l+"|"+n)+"+"),O=(r(P+"\\%25"+w),r(P+r("\\%25|\\%(?!"+a+"{2})")+w)),R=r("[vV]"+a+"+\\."+t(l,o,"[\\:]")+"+"),T=r("\\["+r(O+"|"+P+"|"+R)+"\\]"),A=r(r(n+"|"+t(l,o))+"*"),M=r(T+"|"+d+"(?!"+A+")|"+A),D=r("[0-9]*"),N=r(r(u+"@")+"?"+M+r("\\:"+D)+"?"),I=r(n+"|"+t(l,o,"[\\:\\@]")),F=r(I+"*"),L=r(I+"+"),C=r(r(n+"|"+t(l,o,"[\\@]"))+"+"),U=r(r("\\/"+F)+"*"),V=r("\\/"+r(L+U)+"?"),z=r(C+U),k=r(L+U),$="(?!"+I+")",j=(r(U+"|"+V+"|"+z+"|"+k+"|"+$),r(r(I+"|"+t("[\\/\\?]",s))+"*")),B=r(r(I+"|[\\/\\?]")+"*"),H=r(r("\\/\\/"+N+U)+"|"+V+"|"+k+"|"+$),W=r(c+"\\:"+H+r("\\?"+j)+"?"+r("\\#"+B)+"?"),G=r(r("\\/\\/"+N+U)+"|"+V+"|"+z+"|"+$),q=r(G+r("\\?"+j)+"?"+r("\\#"+B)+"?");return r(W+"|"+q),r(c+"\\:"+H+r("\\?"+j)+"?"),r(r("\\/\\/("+r("("+u+")@")+"?("+M+")"+r("\\:("+D+")")+"?)")+"?("+U+"|"+V+"|"+k+"|"+$+")"),r("\\?("+j+")"),r("\\#("+B+")"),r(r("\\/\\/("+r("("+u+")@")+"?("+M+")"+r("\\:("+D+")")+"?)")+"?("+U+"|"+V+"|"+z+"|"+$+")"),r("\\?("+j+")"),r("\\#("+B+")"),r(r("\\/\\/("+r("("+u+")@")+"?("+M+")"+r("\\:("+D+")")+"?)")+"?("+U+"|"+V+"|"+k+"|"+$+")"),r("\\?("+j+")"),r("\\#("+B+")"),r("("+u+")@"),r("\\:("+D+")"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",l,o),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",l,o),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",l,o),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",l,o),"g"),NOT_QUERY:new RegExp(t("[^\\%]",l,o,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",l,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",l,o),"g"),UNRESERVED:new RegExp(l,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",l,i),"g"),PCT_ENCODED:new RegExp(n,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+P+")"+r(r("\\%25|\\%(?!"+a+"{2})")+"("+w+")")+"?\\]?$")}}var i=o(!1),s=o(!0),l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,u=/^xn--/,f=/[^\0-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,h=String.fromCharCode;function v(e){throw new RangeError(p[e])}function _(e,t){var r=e.split("@"),a="";r.length>1&&(a=r[0]+"@",e=r[1]);var n=function(e,t){for(var r=[],a=e.length;a--;)r[a]=t(e[a]);return r}((e=e.replace(d,".")).split("."),t).join(".");return a+n}function g(e){for(var t=[],r=0,a=e.length;r<a;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<a){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&n)<<10)+(1023&o)+65536):(t.push(n),r--)}else t.push(n)}return t}var y=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},x=function(e,t,r){var a=0;for(e=r?m(e/700):e>>1,e+=m(e/t);e>455;a+=36)e=m(e/35);return m(a+36*e/(e+38))},S=function(e){var t,r=[],a=e.length,n=0,o=128,i=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var l=0;l<s;++l)e.charCodeAt(l)>=128&&v("not-basic"),r.push(e.charCodeAt(l));for(var u=s>0?s+1:0;u<a;){for(var f=n,d=1,p=36;;p+=36){u>=a&&v("invalid-input");var h=(t=e.charCodeAt(u++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(h>=36||h>m((c-n)/d))&&v("overflow"),n+=h*d;var _=p<=i?1:p>=i+26?26:p-i;if(h<_)break;var g=36-_;d>m(c/g)&&v("overflow"),d*=g}var y=r.length+1;i=x(n-f,y,0==f),m(n/y)>c-o&&v("overflow"),o+=m(n/y),n%=y,r.splice(n++,0,o)}return String.fromCodePoint.apply(String,r)},b=function(e){var t=[],r=(e=g(e)).length,a=128,n=0,o=72,i=!0,s=!1,l=void 0;try{for(var u,f=e[Symbol.iterator]();!(i=(u=f.next()).done);i=!0){var d=u.value;d<128&&t.push(h(d))}}catch(e){s=!0,l=e}finally{try{!i&&f.return&&f.return()}finally{if(s)throw l}}var p=t.length,_=p;for(p&&t.push("-");_<r;){var S=c,b=!0,E=!1,P=void 0;try{for(var w,O=e[Symbol.iterator]();!(b=(w=O.next()).done);b=!0){var R=w.value;R>=a&&R<S&&(S=R)}}catch(e){E=!0,P=e}finally{try{!b&&O.return&&O.return()}finally{if(E)throw P}}var T=_+1;S-a>m((c-n)/T)&&v("overflow"),n+=(S-a)*T,a=S;var A=!0,M=!1,D=void 0;try{for(var N,I=e[Symbol.iterator]();!(A=(N=I.next()).done);A=!0){var F=N.value;if(F<a&&++n>c&&v("overflow"),F==a){for(var L=n,C=36;;C+=36){var U=C<=o?1:C>=o+26?26:C-o;if(L<U)break;var V=L-U,z=36-U;t.push(h(y(U+V%z,0))),L=m(V/z)}t.push(h(y(L,0))),o=x(n,T,_==p),n=0,++_}}}catch(e){M=!0,D=e}finally{try{!A&&I.return&&I.return()}finally{if(M)throw D}}++n,++a}return t.join("")},E=function(e){return _(e,(function(e){return f.test(e)?"xn--"+b(e):e}))},P=function(e){return _(e,(function(e){return u.test(e)?S(e.slice(4).toLowerCase()):e}))},w={};function O(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function R(e){for(var t="",r=0,a=e.length;r<a;){var n=parseInt(e.substr(r+1,2),16);if(n<128)t+=String.fromCharCode(n),r+=3;else if(n>=194&&n<224){if(a-r>=6){var o=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&n)<<6|63&o)}else t+=e.substr(r,6);r+=6}else if(n>=224){if(a-r>=9){var i=parseInt(e.substr(r+4,2),16),s=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&s)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function T(e,t){function r(e){var r=R(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,O).replace(t.PCT_ENCODED,n)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,O).replace(t.PCT_ENCODED,n)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,O).replace(t.PCT_ENCODED,n)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,O).replace(t.PCT_ENCODED,n)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,O).replace(t.PCT_ENCODED,n)),e}function A(e){return e.replace(/^0*(.*)/,"$1")||"0"}function M(e,t){var r=e.match(t.IPV4ADDRESS)||[],a=l(r,2)[1];return a?a.split(".").map(A).join("."):e}function D(e,t){var r=e.match(t.IPV6ADDRESS)||[],a=l(r,3),n=a[1],o=a[2];if(n){for(var i=n.toLowerCase().split("::").reverse(),s=l(i,2),c=s[0],u=s[1],f=u?u.split(":").map(A):[],d=c.split(":").map(A),p=t.IPV4ADDRESS.test(d[d.length-1]),m=p?7:8,h=d.length-m,v=Array(m),_=0;_<m;++_)v[_]=f[_]||d[h+_]||"";p&&(v[m-1]=M(v[m-1],t));var g=v.reduce((function(e,t,r){if(!t||"0"===t){var a=e[e.length-1];a&&a.index+a.length===r?a.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],y=void 0;if(g&&g.length>1){var x=v.slice(0,g.index),S=v.slice(g.index+g.length);y=x.join(":")+"::"+S.join(":")}else y=v.join(":");return o&&(y+="%"+o),y}return e}var N=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,I=void 0==="".match(/(){0}/)[1];function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},a=!1!==t.iri?s:i;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var n=e.match(N);if(n){I?(r.scheme=n[1],r.userinfo=n[3],r.host=n[4],r.port=parseInt(n[5],10),r.path=n[6]||"",r.query=n[7],r.fragment=n[8],isNaN(r.port)&&(r.port=n[5])):(r.scheme=n[1]||void 0,r.userinfo=-1!==e.indexOf("@")?n[3]:void 0,r.host=-1!==e.indexOf("//")?n[4]:void 0,r.port=parseInt(n[5],10),r.path=n[6]||"",r.query=-1!==e.indexOf("?")?n[7]:void 0,r.fragment=-1!==e.indexOf("#")?n[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?n[4]:void 0)),r.host&&(r.host=D(M(r.host,a),a)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var o=w[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)T(r,a);else{if(r.host&&(t.domainHost||o&&o.domainHost))try{r.host=E(r.host.replace(a.PCT_ENCODED,R).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}T(r,i)}o&&o.parse&&o.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function L(e,t){var r=!1!==t.iri?s:i,a=[];return void 0!==e.userinfo&&(a.push(e.userinfo),a.push("@")),void 0!==e.host&&a.push(D(M(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"==typeof e.port&&(a.push(":"),a.push(e.port.toString(10))),a.length?a.join(""):void 0}var C=/^\.\.?\//,U=/^\/\.(\/|$)/,V=/^\/\.\.(\/|$)/,z=/^\/?(?:.|\n)*?(?=\/|$)/;function k(e){for(var t=[];e.length;)if(e.match(C))e=e.replace(C,"");else if(e.match(U))e=e.replace(U,"/");else if(e.match(V))e=e.replace(V,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(z);if(!r)throw new Error("Unexpected dot segment condition");var a=r[0];e=e.slice(a.length),t.push(a)}return t.join("")}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?s:i,a=[],n=w[(t.scheme||e.scheme||"").toLowerCase()];if(n&&n.serialize&&n.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||n&&n.domainHost)try{e.host=t.iri?P(e.host):E(e.host.replace(r.PCT_ENCODED,R).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}T(e,r),"suffix"!==t.reference&&e.scheme&&(a.push(e.scheme),a.push(":"));var o=L(e,t);if(void 0!==o&&("suffix"!==t.reference&&a.push("//"),a.push(o),e.path&&"/"!==e.path.charAt(0)&&a.push("/")),void 0!==e.path){var l=e.path;t.absolutePath||n&&n.absolutePath||(l=k(l)),void 0===o&&(l=l.replace(/^\/\//,"/%2F")),a.push(l)}return void 0!==e.query&&(a.push("?"),a.push(e.query)),void 0!==e.fragment&&(a.push("#"),a.push(e.fragment)),a.join("")}function j(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments[3],n={};return a||(e=F($(e,r),r),t=F($(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=k(t.path||""),n.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=k(t.path||""),n.query=t.query):(t.path?("/"===t.path.charAt(0)?n.path=k(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:n.path=t.path:n.path="/"+t.path,n.path=k(n.path)),n.query=t.query):(n.path=e.path,void 0!==t.query?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function B(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:i.PCT_ENCODED,R)}var H={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},W={scheme:"https",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize},G={},q="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",X="[0-9A-Fa-f]",Q=r(r("%[EFef][0-9A-Fa-f]%"+X+X+"%"+X+X)+"|"+r("%[89A-Fa-f][0-9A-Fa-f]%"+X+X)+"|"+r("%"+X+X)),Y=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),Z=new RegExp(q,"g"),K=new RegExp(Q,"g"),J=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Y),"g"),ee=new RegExp(t("[^]",q,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),te=ee;function re(e){var t=R(e);return t.match(Z)?t:e}var ae={scheme:"mailto",parse:function(e,t){var r=e,a=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var n=!1,o={},i=r.query.split("&"),s=0,l=i.length;s<l;++s){var c=i[s].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),f=0,d=u.length;f<d;++f)a.push(u[f]);break;case"subject":r.subject=B(c[1],t);break;case"body":r.body=B(c[1],t);break;default:n=!0,o[B(c[0],t)]=B(c[1],t)}}n&&(r.headers=o)}r.query=void 0;for(var p=0,m=a.length;p<m;++p){var h=a[p].split("@");if(h[0]=B(h[0]),t.unicodeSupport)h[1]=B(h[1],t).toLowerCase();else try{h[1]=E(B(h[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}a[p]=h.join("@")}return r},serialize:function(e,t){var r,a=e,o=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(o){for(var i=0,s=o.length;i<s;++i){var l=String(o[i]),c=l.lastIndexOf("@"),u=l.slice(0,c).replace(K,re).replace(K,n).replace(J,O),f=l.slice(c+1);try{f=t.iri?P(f):E(B(f,t).toLowerCase())}catch(e){a.error=a.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}o[i]=u+"@"+f}a.path=o.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var p=[];for(var m in d)d[m]!==G[m]&&p.push(m.replace(K,re).replace(K,n).replace(ee,O)+"="+d[m].replace(K,re).replace(K,n).replace(te,O));return p.length&&(a.query=p.join("&")),a}},ne=/^([^\:]+)\:(.*)/,oe={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ne),a=e;if(r){var n=t.scheme||a.scheme||"urn",o=r[1].toLowerCase(),i=r[2],s=n+":"+(t.nid||o),l=w[s];a.nid=o,a.nss=i,a.path=void 0,l&&(a=l.parse(a,t))}else a.error=a.error||"URN can not be parsed.";return a},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",a=e.nid,n=r+":"+(t.nid||a),o=w[n];o&&(e=o.serialize(e,t));var i=e,s=e.nss;return i.path=(a||t.nid)+":"+s,i}},ie=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,se={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ie)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};w[H.scheme]=H,w[W.scheme]=W,w[ae.scheme]=ae,w[oe.scheme]=oe,w[se.scheme]=se,e.SCHEMES=w,e.pctEncChar=O,e.pctDecChars=R,e.parse=F,e.removeDotSegments=k,e.serialize=$,e.resolveComponents=j,e.resolve=function(e,t,r){var a=function(e,t){var r=e;if(t)for(var a in t)r[a]=t[a];return r}({scheme:"null"},r);return $(j(F(e,a),F(t,a),a,!0),a)},e.normalize=function(e,t){return"string"==typeof e?e=$(F(e,t),t):"object"===a(e)&&(e=F($(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=$(F(e,r),r):"object"===a(e)&&(e=$(e,r)),"string"==typeof t?t=$(F(t,r),r):"object"===a(t)&&(t=$(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:i.ESCAPE,O)},e.unescapeComponent=B,Object.defineProperty(e,"__esModule",{value:!0})}(t)},537:function(e,t,r){"use strict";e.exports=function(e){for(var t,r=0,a=e.length,n=0;n<a;)r++,(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<a&&56320==(64512&(t=e.charCodeAt(n)))&&n++;return r}},538:function(e,t,r){"use strict";var a=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function e(t,r,n,o,i,s,l,c,u,f){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var d in r(o,i,s,l,c,u,f),o){var p=o[d];if(Array.isArray(p)){if(d in a.arrayKeywords)for(var m=0;m<p.length;m++)e(t,r,n,p[m],i+"/"+d+"/"+m,s,i,d,o,m)}else if(d in a.propsKeywords){if(p&&"object"==typeof p)for(var h in p)e(t,r,n,p[h],i+"/"+d+"/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),s,i,d,o,h)}else(d in a.keywords||t.allKeys&&!(d in a.skipKeywords))&&e(t,r,n,p,i+"/"+d,s,i,d,o)}n(o,i,s,l,c,u,f)}}(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};a.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},a.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},a.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},a.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},539:function(e,t,r){"use strict";var a=e.exports=function(){this._cache={}};a.prototype.put=function(e,t){this._cache[e]=t},a.prototype.get=function(e){return this._cache[e]},a.prototype.del=function(e){delete this._cache[e]},a.prototype.clear=function(){this._cache={}}},540:function(e,t,r){"use strict";var a=r(57),n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31],i=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,s=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,l=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,c=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,u=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,f=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,d=/^(?:\/(?:[^~/]|~0|~1)*)*$/,p=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,m=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function h(e){return e="full"==e?"full":"fast",a.copy(h[e])}function v(e){var t=e.match(n);if(!t)return!1;var r=+t[1],a=+t[2],i=+t[3];return a>=1&&a<=12&&i>=1&&i<=(2==a&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:o[a])}function _(e,t){var r=e.match(i);if(!r)return!1;var a=r[1],n=r[2],o=r[3],s=r[5];return(a<=23&&n<=59&&o<=59||23==a&&59==n&&60==o)&&(!t||s)}e.exports=h,h.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":c,url:u,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:S,uuid:f,"json-pointer":d,"json-pointer-uri-fragment":p,"relative-json-pointer":m},h.full={date:v,time:_,"date-time":function(e){var t=e.split(g);return 2==t.length&&v(t[0])&&_(t[1],!0)},uri:function(e){return y.test(e)&&l.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":c,url:u,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:S,uuid:f,"json-pointer":d,"json-pointer-uri-fragment":p,"relative-json-pointer":m};var g=/t|\s/i;var y=/\/|:/;var x=/[^\\]\\Z/;function S(e){if(x.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},541:function(e,t,r){"use strict";var a=r(542),n=r(57).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=n(t),e.types=n(["number","integer","string","array","object","boolean","null"]),e.forEach((function(r){r.rules=r.rules.map((function(r){var n;if("object"==typeof r){var o=Object.keys(r)[0];n=r[o],r=o,n.forEach((function(r){t.push(r),e.all[r]=!0}))}return t.push(r),e.all[r]={keyword:r,code:a[r],implements:n}})),e.all.$comment={keyword:"$comment",code:a.$comment},r.type&&(e.types[r.type]=r)})),e.keywords=n(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},542:function(e,t,r){"use strict";e.exports={$ref:r(543),allOf:r(544),anyOf:r(545),$comment:r(546),const:r(547),contains:r(548),dependencies:r(549),enum:r(550),format:r(551),if:r(552),items:r(553),maximum:r(149),minimum:r(149),maxItems:r(150),minItems:r(150),maxLength:r(151),minLength:r(151),maxProperties:r(152),minProperties:r(152),multipleOf:r(554),not:r(555),oneOf:r(556),pattern:r(557),properties:r(558),propertyNames:r(559),required:r(560),uniqueItems:r(561),validate:r(148)}},543:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n,o=" ",i=e.level,s=e.dataLevel,l=e.schema[t],c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(s||""),d="valid"+i;if("#"==l||"#/"==l)e.isRoot?(a=e.async,n="validate"):(a=!0===e.root.schema.$async,n="root.refVal[0]");else{var p=e.resolveRef(e.baseId,l,e.isRoot);if(void 0===p){var m=e.MissingRefError.message(e.baseId,l);if("fail"==e.opts.missingRefs){e.logger.error(m),(g=g||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",!1!==e.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),o+=" } "):o+=" {} ";var h=o;o=g.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+h+"]); ":o+=" validate.errors = ["+h+"]; return false; ":o+=" var err = "+h+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,l,m);e.logger.warn(m),u&&(o+=" if (true) { ")}}else if(p.inline){var v=e.util.copy(e);v.level++;var _="valid"+v.level;v.schema=p.schema,v.schemaPath="",v.errSchemaPath=l,o+=" "+e.validate(v).replace(/validate\.schema/g,p.code)+" ",u&&(o+=" if ("+_+") { ")}else a=!0===p.$async||e.async&&!1!==p.$async,n=p.code}if(n){var g;(g=g||[]).push(o),o="",e.opts.passContext?o+=" "+n+".call(this, ":o+=" "+n+"( ",o+=" "+f+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var y=o+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";if(o=g.pop(),a){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(o+=" var "+d+"; "),o+=" try { await "+y+"; ",u&&(o+=" "+d+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(o+=" "+d+" = false; "),o+=" } ",u&&(o+=" if ("+d+") { ")}else o+=" if (!"+y+") { if (vErrors === null) vErrors = "+n+".errors; else vErrors = vErrors.concat("+n+".errors); errors = vErrors.length; } ",u&&(o+=" else { ")}return o}},544:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),i=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,l=e.util.copy(e),c="";l.level++;var u="valid"+l.level,f=l.baseId,d=!0,p=n;if(p)for(var m,h=-1,v=p.length-1;h<v;)m=p[h+=1],(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0:e.util.schemaHasRules(m,e.RULES.all))&&(d=!1,l.schema=m,l.schemaPath=o+"["+h+"]",l.errSchemaPath=i+"/"+h,a+="  "+e.validate(l)+" ",l.baseId=f,s&&(a+=" if ("+u+") { ",c+="}"));return s&&(a+=d?" if (true) { ":" "+c.slice(0,-1)+" "),a=e.util.cleanUpCode(a)}},545:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d="errs__"+n,p=e.util.copy(e),m="";p.level++;var h="valid"+p.level;if(i.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0:e.util.schemaHasRules(t,e.RULES.all)}))){var v=p.baseId;a+=" var "+d+" = errors; var "+f+" = false;  ";var _=e.compositeRule;e.compositeRule=p.compositeRule=!0;var g=i;if(g)for(var y,x=-1,S=g.length-1;x<S;)y=g[x+=1],p.schema=y,p.schemaPath=s+"["+x+"]",p.errSchemaPath=l+"/"+x,a+="  "+e.validate(p)+" ",p.baseId=v,a+=" "+f+" = "+f+" || "+h+"; if (!"+f+") { ",m+="}";e.compositeRule=p.compositeRule=_,a+=" "+m+" if (!"+f+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } "),a=e.util.cleanUpCode(a)}else c&&(a+=" if (true) { ");return a}},546:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.schema[t],o=e.errSchemaPath+"/"+t,i=(e.opts.allErrors,e.util.toQuotedString(n));return!0===e.opts.$comment?a+=" console.log("+i+");":"function"==typeof e.opts.$comment&&(a+=" self._opts.$comment("+i+", "+e.util.toQuotedString(o)+", validate.root.schema);"),a}},547:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d=e.opts.$data&&i&&i.$data;d&&(a+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; "),d||(a+=" var schema"+n+" = validate.schema"+s+";"),a+="var "+f+" = equal("+u+", schema"+n+"); if (!"+f+") {   ";var p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+n+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to constant' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var m=a;return a=p.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",c&&(a+=" else { "),a}},548:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d="errs__"+n,p=e.util.copy(e);p.level++;var m="valid"+p.level,h="i"+n,v=p.dataLevel=e.dataLevel+1,_="data"+v,g=e.baseId,y=e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0:e.util.schemaHasRules(i,e.RULES.all);if(a+="var "+d+" = errors;var "+f+";",y){var x=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=i,p.schemaPath=s,p.errSchemaPath=l,a+=" var "+m+" = false; for (var "+h+" = 0; "+h+" < "+u+".length; "+h+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,h,e.opts.jsonPointers,!0);var S=u+"["+h+"]";p.dataPathArr[v]=h;var b=e.validate(p);p.baseId=g,e.util.varOccurences(b,_)<2?a+=" "+e.util.varReplace(b,_,S)+" ":a+=" var "+_+" = "+S+"; "+b+" ",a+=" if ("+m+") break; }  ",e.compositeRule=p.compositeRule=x,a+="  if (!"+m+") {"}else a+=" if ("+u+".length == 0) {";var E=E||[];E.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should contain a valid item' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var P=a;return a=E.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+P+"]); ":a+=" validate.errors = ["+P+"]; return false; ":a+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { ",y&&(a+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(a+=" } "),a=e.util.cleanUpCode(a)}},549:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="errs__"+n,d=e.util.copy(e),p="";d.level++;var m="valid"+d.level,h={},v={},_=e.opts.ownProperties;for(S in i){var g=i[S],y=Array.isArray(g)?v:h;y[S]=g}a+="var "+f+" = errors;";var x=e.errorPath;for(var S in a+="var missing"+n+";",v)if((y=v[S]).length){if(a+=" if ( "+u+e.util.getProperty(S)+" !== undefined ",_&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(S)+"') "),c){a+=" && ( ";var b=y;if(b)for(var E=-1,P=b.length-1;E<P;){M=b[E+=1],E&&(a+=" || "),a+=" ( ( "+(F=u+(I=e.util.getProperty(M)))+" === undefined ",_&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(M)+"') "),a+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?M:I)+") ) "}a+=")) {  ";var w="missing"+n,O="' + "+w+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(x,w,!0):x+" + "+w);var R=R||[];R.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+O+"', depsCount: "+y.length+", deps: '"+e.util.escapeQuotes(1==y.length?y[0]:y.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==y.length?a+="property "+e.util.escapeQuotes(y[0]):a+="properties "+e.util.escapeQuotes(y.join(", ")),a+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var T=a;a=R.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+T+"]); ":a+=" validate.errors = ["+T+"]; return false; ":a+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{a+=" ) { ";var A=y;if(A)for(var M,D=-1,N=A.length-1;D<N;){M=A[D+=1];var I=e.util.getProperty(M),F=(O=e.util.escapeQuotes(M),u+I);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(x,M,e.opts.jsonPointers)),a+=" if ( "+F+" === undefined ",_&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(M)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+O+"', depsCount: "+y.length+", deps: '"+e.util.escapeQuotes(1==y.length?y[0]:y.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==y.length?a+="property "+e.util.escapeQuotes(y[0]):a+="properties "+e.util.escapeQuotes(y.join(", ")),a+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}a+=" }   ",c&&(p+="}",a+=" else { ")}e.errorPath=x;var L=d.baseId;for(var S in h){g=h[S];(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0:e.util.schemaHasRules(g,e.RULES.all))&&(a+=" "+m+" = true; if ( "+u+e.util.getProperty(S)+" !== undefined ",_&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(S)+"') "),a+=") { ",d.schema=g,d.schemaPath=s+e.util.getProperty(S),d.errSchemaPath=l+"/"+e.util.escapeFragment(S),a+="  "+e.validate(d)+" ",d.baseId=L,a+=" }  ",c&&(a+=" if ("+m+") { ",p+="}"))}return c&&(a+="   "+p+" if ("+f+" == errors) {"),a=e.util.cleanUpCode(a)}},550:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d=e.opts.$data&&i&&i.$data;d&&(a+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ");var p="i"+n,m="schema"+n;d||(a+=" var "+m+" = validate.schema"+s+";"),a+="var "+f+";",d&&(a+=" if (schema"+n+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+n+")) "+f+" = false; else {"),a+=f+" = false;for (var "+p+"=0; "+p+"<"+m+".length; "+p+"++) if (equal("+u+", "+m+"["+p+"])) { "+f+" = true; break; }",d&&(a+="  }  "),a+=" if (!"+f+") {   ";var h=h||[];h.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+n+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var v=a;return a=h.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",c&&(a+=" else { "),a}},551:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||"");if(!1===e.opts.format)return c&&(a+=" if (true) { "),a;var f,d=e.opts.$data&&i&&i.$data;d?(a+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",f="schema"+n):f=i;var p=e.opts.unknownFormats,m=Array.isArray(p);if(d){a+=" var "+(h="format"+n)+" = formats["+f+"]; var "+(v="isObject"+n)+" = typeof "+h+" == 'object' && !("+h+" instanceof RegExp) && "+h+".validate; var "+(_="formatType"+n)+" = "+v+" && "+h+".type || 'string'; if ("+v+") { ",e.async&&(a+=" var async"+n+" = "+h+".async; "),a+=" "+h+" = "+h+".validate; } if (  ",d&&(a+=" ("+f+" !== undefined && typeof "+f+" != 'string') || "),a+=" (","ignore"!=p&&(a+=" ("+f+" && !"+h+" ",m&&(a+=" && self._opts.unknownFormats.indexOf("+f+") == -1 "),a+=") || "),a+=" ("+h+" && "+_+" == '"+r+"' && !(typeof "+h+" == 'function' ? ",e.async?a+=" (async"+n+" ? await "+h+"("+u+") : "+h+"("+u+")) ":a+=" "+h+"("+u+") ",a+=" : "+h+".test("+u+"))))) {"}else{var h;if(!(h=e.formats[i])){if("ignore"==p)return e.logger.warn('unknown format "'+i+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(a+=" if (true) { "),a;if(m&&p.indexOf(i)>=0)return c&&(a+=" if (true) { "),a;throw new Error('unknown format "'+i+'" is used in schema at path "'+e.errSchemaPath+'"')}var v,_=(v="object"==typeof h&&!(h instanceof RegExp)&&h.validate)&&h.type||"string";if(v){var g=!0===h.async;h=h.validate}if(_!=r)return c&&(a+=" if (true) { "),a;if(g){if(!e.async)throw new Error("async format in sync schema");a+=" if (!(await "+(y="formats"+e.util.getProperty(i)+".validate")+"("+u+"))) { "}else{a+=" if (! ";var y="formats"+e.util.getProperty(i);v&&(y+=".validate"),a+="function"==typeof h?" "+y+"("+u+") ":" "+y+".test("+u+") ",a+=") { "}}var x=x||[];x.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",a+=d?""+f:""+e.util.toQuotedString(i),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match format \"",a+=d?"' + "+f+" + '":""+e.util.escapeQuotes(i),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",a+=d?"validate.schema"+s:""+e.util.toQuotedString(i),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var S=a;return a=x.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",c&&(a+=" else { "),a}},552:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d="errs__"+n,p=e.util.copy(e);p.level++;var m="valid"+p.level,h=e.schema.then,v=e.schema.else,_=void 0!==h&&(e.opts.strictKeywords?"object"==typeof h&&Object.keys(h).length>0:e.util.schemaHasRules(h,e.RULES.all)),g=void 0!==v&&(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0:e.util.schemaHasRules(v,e.RULES.all)),y=p.baseId;if(_||g){var x;p.createErrors=!1,p.schema=i,p.schemaPath=s,p.errSchemaPath=l,a+=" var "+d+" = errors; var "+f+" = true;  ";var S=e.compositeRule;e.compositeRule=p.compositeRule=!0,a+="  "+e.validate(p)+" ",p.baseId=y,p.createErrors=!0,a+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=S,_?(a+=" if ("+m+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",a+="  "+e.validate(p)+" ",p.baseId=y,a+=" "+f+" = "+m+"; ",_&&g?a+=" var "+(x="ifClause"+n)+" = 'then'; ":x="'then'",a+=" } ",g&&(a+=" else { ")):a+=" if (!"+m+") { ",g&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",a+="  "+e.validate(p)+" ",p.baseId=y,a+=" "+f+" = "+m+"; ",_&&g?a+=" var "+(x="ifClause"+n)+" = 'else'; ":x="'else'",a+=" } "),a+=" if (!"+f+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+x+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match \"' + "+x+" + '\" schema' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" }   ",c&&(a+=" else { "),a=e.util.cleanUpCode(a)}else c&&(a+=" if (true) { ");return a}},553:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d="errs__"+n,p=e.util.copy(e),m="";p.level++;var h="valid"+p.level,v="i"+n,_=p.dataLevel=e.dataLevel+1,g="data"+_,y=e.baseId;if(a+="var "+d+" = errors;var "+f+";",Array.isArray(i)){var x=e.schema.additionalItems;if(!1===x){a+=" "+f+" = "+u+".length <= "+i.length+"; ";var S=l;l=e.errSchemaPath+"/additionalItems",a+="  if (!"+f+") {   ";var b=b||[];b.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+i.length+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have more than "+i.length+" items' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var E=a;a=b.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+E+"]); ":a+=" validate.errors = ["+E+"]; return false; ":a+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",l=S,c&&(m+="}",a+=" else { ")}var P=i;if(P)for(var w,O=-1,R=P.length-1;O<R;)if(w=P[O+=1],e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0:e.util.schemaHasRules(w,e.RULES.all)){a+=" "+h+" = true; if ("+u+".length > "+O+") { ";var T=u+"["+O+"]";p.schema=w,p.schemaPath=s+"["+O+"]",p.errSchemaPath=l+"/"+O,p.errorPath=e.util.getPathExpr(e.errorPath,O,e.opts.jsonPointers,!0),p.dataPathArr[_]=O;var A=e.validate(p);p.baseId=y,e.util.varOccurences(A,g)<2?a+=" "+e.util.varReplace(A,g,T)+" ":a+=" var "+g+" = "+T+"; "+A+" ",a+=" }  ",c&&(a+=" if ("+h+") { ",m+="}")}if("object"==typeof x&&(e.opts.strictKeywords?"object"==typeof x&&Object.keys(x).length>0:e.util.schemaHasRules(x,e.RULES.all))){p.schema=x,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",a+=" "+h+" = true; if ("+u+".length > "+i.length+") {  for (var "+v+" = "+i.length+"; "+v+" < "+u+".length; "+v+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);T=u+"["+v+"]";p.dataPathArr[_]=v;A=e.validate(p);p.baseId=y,e.util.varOccurences(A,g)<2?a+=" "+e.util.varReplace(A,g,T)+" ":a+=" var "+g+" = "+T+"; "+A+" ",c&&(a+=" if (!"+h+") break; "),a+=" } }  ",c&&(a+=" if ("+h+") { ",m+="}")}}else if(e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0:e.util.schemaHasRules(i,e.RULES.all)){p.schema=i,p.schemaPath=s,p.errSchemaPath=l,a+="  for (var "+v+" = 0; "+v+" < "+u+".length; "+v+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);T=u+"["+v+"]";p.dataPathArr[_]=v;A=e.validate(p);p.baseId=y,e.util.varOccurences(A,g)<2?a+=" "+e.util.varReplace(A,g,T)+" ":a+=" var "+g+" = "+T+"; "+A+" ",c&&(a+=" if (!"+h+") break; "),a+=" }"}return c&&(a+=" "+m+" if ("+d+" == errors) {"),a=e.util.cleanUpCode(a)}},554:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(i||""),d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=s,n+="var division"+o+";if (",d&&(n+=" "+a+" !== undefined && ( typeof "+a+" != 'number' || "),n+=" (division"+o+" = "+f+" / "+a+", ",e.opts.multipleOfPrecision?n+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":n+=" division"+o+" !== parseInt(division"+o+") ",n+=" ) ",d&&(n+="  )  "),n+=" ) {   ";var p=p||[];p.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be multiple of ",n+=d?"' + "+a:a+"'"),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var m=n;return n=p.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},555:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="errs__"+n,d=e.util.copy(e);d.level++;var p="valid"+d.level;if(e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0:e.util.schemaHasRules(i,e.RULES.all)){d.schema=i,d.schemaPath=s,d.errSchemaPath=l,a+=" var "+f+" = errors;  ";var m,h=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.createErrors=!1,d.opts.allErrors&&(m=d.opts.allErrors,d.opts.allErrors=!1),a+=" "+e.validate(d)+" ",d.createErrors=!0,m&&(d.opts.allErrors=m),e.compositeRule=d.compositeRule=h,a+=" if ("+p+") {   ";var v=v||[];v.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var _=a;a=v.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } ")}else a+="  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(a+=" if (false) { ");return a}},556:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d="errs__"+n,p=e.util.copy(e),m="";p.level++;var h="valid"+p.level,v=p.baseId,_="prevValid"+n,g="passingSchemas"+n;a+="var "+d+" = errors , "+_+" = false , "+f+" = false , "+g+" = null; ";var y=e.compositeRule;e.compositeRule=p.compositeRule=!0;var x=i;if(x)for(var S,b=-1,E=x.length-1;b<E;)S=x[b+=1],(e.opts.strictKeywords?"object"==typeof S&&Object.keys(S).length>0:e.util.schemaHasRules(S,e.RULES.all))?(p.schema=S,p.schemaPath=s+"["+b+"]",p.errSchemaPath=l+"/"+b,a+="  "+e.validate(p)+" ",p.baseId=v):a+=" var "+h+" = true; ",b&&(a+=" if ("+h+" && "+_+") { "+f+" = false; "+g+" = ["+g+", "+b+"]; } else { ",m+="}"),a+=" if ("+h+") { "+f+" = "+_+" = true; "+g+" = "+b+"; }";return e.compositeRule=p.compositeRule=y,a+=m+"if (!"+f+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+g+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",e.opts.allErrors&&(a+=" } "),a}},557:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(i||""),d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=s,n+="if ( ",d&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'string') || "),n+=" !"+(d?"(new RegExp("+a+"))":e.usePattern(s))+".test("+f+") ) {   ";var p=p||[];p.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",n+=d?""+a:""+e.util.toQuotedString(s),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match pattern \"",n+=d?"' + "+a+" + '":""+e.util.escapeQuotes(s),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+e.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var m=n;return n=p.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},558:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="errs__"+n,d=e.util.copy(e),p="";d.level++;var m="valid"+d.level,h="key"+n,v="idx"+n,_=d.dataLevel=e.dataLevel+1,g="data"+_,y="dataProperties"+n,x=Object.keys(i||{}),S=e.schema.patternProperties||{},b=Object.keys(S),E=e.schema.additionalProperties,P=x.length||b.length,w=!1===E,O="object"==typeof E&&Object.keys(E).length,R=e.opts.removeAdditional,T=w||O||R,A=e.opts.ownProperties,M=e.baseId,D=e.schema.required;if(D&&(!e.opts.$data||!D.$data)&&D.length<e.opts.loopRequired)var N=e.util.toHash(D);if(a+="var "+f+" = errors;var "+m+" = true;",A&&(a+=" var "+y+" = undefined;"),T){if(a+=A?" "+y+" = "+y+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+y+".length; "+v+"++) { var "+h+" = "+y+"["+v+"]; ":" for (var "+h+" in "+u+") { ",P){if(a+=" var isAdditional"+n+" = !(false ",x.length)if(x.length>8)a+=" || validate.schema"+s+".hasOwnProperty("+h+") ";else{var I=x;if(I)for(var F=-1,L=I.length-1;F<L;)X=I[F+=1],a+=" || "+h+" == "+e.util.toQuotedString(X)+" "}if(b.length){var C=b;if(C)for(var U=-1,V=C.length-1;U<V;)ne=C[U+=1],a+=" || "+e.usePattern(ne)+".test("+h+") "}a+=" ); if (isAdditional"+n+") { "}if("all"==R)a+=" delete "+u+"["+h+"]; ";else{var z=e.errorPath,k="' + "+h+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,h,e.opts.jsonPointers)),w)if(R)a+=" delete "+u+"["+h+"]; ";else{a+=" "+m+" = false; ";var $=l;l=e.errSchemaPath+"/additionalProperties",(te=te||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+k+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is an invalid additional property":a+="should NOT have additional properties",a+="' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var j=a;a=te.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+j+"]); ":a+=" validate.errors = ["+j+"]; return false; ":a+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=$,c&&(a+=" break; ")}else if(O)if("failing"==R){a+=" var "+f+" = errors;  ";var B=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=E,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,h,e.opts.jsonPointers);var H=u+"["+h+"]";d.dataPathArr[_]=h;var W=e.validate(d);d.baseId=M,e.util.varOccurences(W,g)<2?a+=" "+e.util.varReplace(W,g,H)+" ":a+=" var "+g+" = "+H+"; "+W+" ",a+=" if (!"+m+") { errors = "+f+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+h+"]; }  ",e.compositeRule=d.compositeRule=B}else{d.schema=E,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,h,e.opts.jsonPointers);H=u+"["+h+"]";d.dataPathArr[_]=h;W=e.validate(d);d.baseId=M,e.util.varOccurences(W,g)<2?a+=" "+e.util.varReplace(W,g,H)+" ":a+=" var "+g+" = "+H+"; "+W+" ",c&&(a+=" if (!"+m+") break; ")}e.errorPath=z}P&&(a+=" } "),a+=" }  ",c&&(a+=" if ("+m+") { ",p+="}")}var G=e.opts.useDefaults&&!e.compositeRule;if(x.length){var q=x;if(q)for(var X,Q=-1,Y=q.length-1;Q<Y;){var Z=i[X=q[Q+=1]];if(e.opts.strictKeywords?"object"==typeof Z&&Object.keys(Z).length>0:e.util.schemaHasRules(Z,e.RULES.all)){var K=e.util.getProperty(X),J=(H=u+K,G&&void 0!==Z.default);d.schema=Z,d.schemaPath=s+K,d.errSchemaPath=l+"/"+e.util.escapeFragment(X),d.errorPath=e.util.getPath(e.errorPath,X,e.opts.jsonPointers),d.dataPathArr[_]=e.util.toQuotedString(X);W=e.validate(d);if(d.baseId=M,e.util.varOccurences(W,g)<2){W=e.util.varReplace(W,g,H);var ee=H}else{ee=g;a+=" var "+g+" = "+H+"; "}if(J)a+=" "+W+" ";else{if(N&&N[X]){a+=" if ( "+ee+" === undefined ",A&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(X)+"') "),a+=") { "+m+" = false; ";z=e.errorPath,$=l;var te,re=e.util.escapeQuotes(X);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(z,X,e.opts.jsonPointers)),l=e.errSchemaPath+"/required",(te=te||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+re+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+re+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";j=a;a=te.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+j+"]); ":a+=" validate.errors = ["+j+"]; return false; ":a+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=$,e.errorPath=z,a+=" } else { "}else c?(a+=" if ( "+ee+" === undefined ",A&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(X)+"') "),a+=") { "+m+" = true; } else { "):(a+=" if ("+ee+" !== undefined ",A&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(X)+"') "),a+=" ) { ");a+=" "+W+" } "}}c&&(a+=" if ("+m+") { ",p+="}")}}if(b.length){var ae=b;if(ae)for(var ne,oe=-1,ie=ae.length-1;oe<ie;){Z=S[ne=ae[oe+=1]];if(e.opts.strictKeywords?"object"==typeof Z&&Object.keys(Z).length>0:e.util.schemaHasRules(Z,e.RULES.all)){d.schema=Z,d.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ne),d.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ne),a+=A?" "+y+" = "+y+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+y+".length; "+v+"++) { var "+h+" = "+y+"["+v+"]; ":" for (var "+h+" in "+u+") { ",a+=" if ("+e.usePattern(ne)+".test("+h+")) { ",d.errorPath=e.util.getPathExpr(e.errorPath,h,e.opts.jsonPointers);H=u+"["+h+"]";d.dataPathArr[_]=h;W=e.validate(d);d.baseId=M,e.util.varOccurences(W,g)<2?a+=" "+e.util.varReplace(W,g,H)+" ":a+=" var "+g+" = "+H+"; "+W+" ",c&&(a+=" if (!"+m+") break; "),a+=" } ",c&&(a+=" else "+m+" = true; "),a+=" }  ",c&&(a+=" if ("+m+") { ",p+="}")}}}return c&&(a+=" "+p+" if ("+f+" == errors) {"),a=e.util.cleanUpCode(a)}},559:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="errs__"+n,d=e.util.copy(e);d.level++;var p="valid"+d.level;if(a+="var "+f+" = errors;",e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0:e.util.schemaHasRules(i,e.RULES.all)){d.schema=i,d.schemaPath=s,d.errSchemaPath=l;var m="key"+n,h="idx"+n,v="i"+n,_="' + "+m+" + '",g="data"+(d.dataLevel=e.dataLevel+1),y="dataProperties"+n,x=e.opts.ownProperties,S=e.baseId;x&&(a+=" var "+y+" = undefined; "),a+=x?" "+y+" = "+y+" || Object.keys("+u+"); for (var "+h+"=0; "+h+"<"+y+".length; "+h+"++) { var "+m+" = "+y+"["+h+"]; ":" for (var "+m+" in "+u+") { ",a+=" var startErrs"+n+" = errors; ";var b=m,E=e.compositeRule;e.compositeRule=d.compositeRule=!0;var P=e.validate(d);d.baseId=S,e.util.varOccurences(P,g)<2?a+=" "+e.util.varReplace(P,g,b)+" ":a+=" var "+g+" = "+b+"; "+P+" ",e.compositeRule=d.compositeRule=E,a+=" if (!"+p+") { for (var "+v+"=startErrs"+n+"; "+v+"<errors; "+v+"++) { vErrors["+v+"].propertyName = "+m+"; }   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+_+"' } ",!1!==e.opts.messages&&(a+=" , message: 'property name \\'"+_+"\\' is invalid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),c&&(a+=" break; "),a+=" } }"}return c&&(a+="  if ("+f+" == errors) {"),a=e.util.cleanUpCode(a)}},560:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d=e.opts.$data&&i&&i.$data;d&&(a+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ");var p="schema"+n;if(!d)if(i.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var m=[],h=i;if(h)for(var v,_=-1,g=h.length-1;_<g;){v=h[_+=1];var y=e.schema.properties[v];y&&(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0:e.util.schemaHasRules(y,e.RULES.all))||(m[m.length]=v)}}else m=i;if(d||m.length){var x=e.errorPath,S=d||m.length>=e.opts.loopRequired,b=e.opts.ownProperties;if(c)if(a+=" var missing"+n+"; ",S){d||(a+=" var "+p+" = validate.schema"+s+"; ");var E="' + "+(A="schema"+n+"["+(O="i"+n)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(x,A,e.opts.jsonPointers)),a+=" var "+f+" = true; ",d&&(a+=" if (schema"+n+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+n+")) "+f+" = false; else {"),a+=" for (var "+O+" = 0; "+O+" < "+p+".length; "+O+"++) { "+f+" = "+u+"["+p+"["+O+"]] !== undefined ",b&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+p+"["+O+"]) "),a+="; if (!"+f+") break; } ",d&&(a+="  }  "),a+="  if (!"+f+") {   ",(T=T||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var P=a;a=T.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+P+"]); ":a+=" validate.errors = ["+P+"]; return false; ":a+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else{a+=" if ( ";var w=m;if(w)for(var O=-1,R=w.length-1;O<R;){D=w[O+=1],O&&(a+=" || "),a+=" ( ( "+(L=u+(F=e.util.getProperty(D)))+" === undefined ",b&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(D)+"') "),a+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?D:F)+") ) "}a+=") {  ";var T;E="' + "+(A="missing"+n)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(x,A,!0):x+" + "+A),(T=T||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";P=a;a=T.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+P+"]); ":a+=" validate.errors = ["+P+"]; return false; ":a+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else if(S){d||(a+=" var "+p+" = validate.schema"+s+"; ");var A;E="' + "+(A="schema"+n+"["+(O="i"+n)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(x,A,e.opts.jsonPointers)),d&&(a+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),a+=" for (var "+O+" = 0; "+O+" < "+p+".length; "+O+"++) { if ("+u+"["+p+"["+O+"]] === undefined ",b&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+p+"["+O+"]) "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(a+="  }  ")}else{var M=m;if(M)for(var D,N=-1,I=M.length-1;N<I;){D=M[N+=1];var F=e.util.getProperty(D),L=(E=e.util.escapeQuotes(D),u+F);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(x,D,e.opts.jsonPointers)),a+=" if ( "+L+" === undefined ",b&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(D)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=x}else c&&(a+=" if (true) {");return a}},561:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(i||""),d="valid"+o,p=e.opts.$data&&s&&s.$data;if(p?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=s,(s||p)&&!1!==e.opts.uniqueItems){p&&(n+=" var "+d+"; if ("+a+" === false || "+a+" === undefined) "+d+" = true; else if (typeof "+a+" != 'boolean') "+d+" = false; else { "),n+=" var i = "+f+".length , "+d+" = true , j; if (i > 1) { ";var m=e.schema.items&&e.schema.items.type,h=Array.isArray(m);if(!m||"object"==m||"array"==m||h&&(m.indexOf("object")>=0||m.indexOf("array")>=0))n+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+f+"[i], "+f+"[j])) { "+d+" = false; break outer; } } } ";else{n+=" var itemIndices = {}, item; for (;i--;) { var item = "+f+"[i]; ";var v="checkDataType"+(h?"s":"");n+=" if ("+e.util[v](m,"item",!0)+") continue; ",h&&(n+=" if (typeof item == 'string') item = '\"' + item; "),n+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}n+=" } ",p&&(n+="  }  "),n+=" if (!"+d+") {   ";var _=_||[];_.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(n+=" , schema:  ",n+=p?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var g=n;n=_.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u&&(n+=" else { ")}else u&&(n+=" if (true) { ");return n}},562:function(e,t,r){"use strict";var a=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var n,o=t[r].split("/"),i=e;for(n=1;n<o.length;n++)i=i[o[n]];for(n=0;n<a.length;n++){var s=a[n],l=i[s];l&&(i[s]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return e}},563:function(e,t,r){"use strict";var a=r(96).MissingRef;e.exports=function e(t,r,n){var o=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(n=r,r=void 0);var i=s(t).then((function(){var e=o._addSchema(t,void 0,r);return e.validate||function e(t){try{return o._compile(t)}catch(e){if(e instanceof a)return n(e);throw e}function n(a){var n=a.missingSchema;if(c(n))throw new Error("Schema "+n+" is loaded but "+a.missingRef+" cannot be resolved");var i=o._loadingSchemas[n];return i||(i=o._loadingSchemas[n]=o._opts.loadSchema(n)).then(l,l),i.then((function(e){if(!c(n))return s(e).then((function(){c(n)||o.addSchema(e,n,void 0,r)}))})).then((function(){return e(t)}));function l(){delete o._loadingSchemas[n]}function c(e){return o._refs[e]||o._schemas[e]}}}(e)}));n&&i.then((function(e){n(null,e)}),n);return i;function s(t){var r=t.$schema;return r&&!o.getSchema(r)?e.call(o,{$ref:r},!0):Promise.resolve()}}},564:function(e,t,r){"use strict";var a=/^[a-z_$][a-z0-9_$-]*$/i,n=r(565),o=r(566);e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!a.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var o=t.type;if(Array.isArray(o))for(var i=0;i<o.length;i++)l(e,o[i],t);else l(e,o,t);var s=t.metaSchema;s&&(t.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(s,!0))}function l(e,t,a){for(var o,i=0;i<r.length;i++){var s=r[i];if(s.type==t){o=s;break}}o||(o={type:t,rules:[]},r.push(o));var l={keyword:e,definition:a,custom:!0,code:n,implements:a.implements};o.rules.push(l),r.custom[e]=l}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var a=t[r].rules,n=0;n<a.length;n++)if(a[n].keyword==e){a.splice(n,1);break}return this},validate:function e(t,r){e.errors=null;var a=this._validateKeyword=this._validateKeyword||this.compile(o,!0);if(a(t))return!0;if(e.errors=a.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(a.errors));return!1}}},565:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n,o=" ",i=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(s||""),p="valid"+i,m="errs__"+i,h=e.opts.$data&&l&&l.$data;h?(o+=" var schema"+i+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=l;var v,_,g,y,x,S="definition"+i,b=this.definition,E="";if(h&&b.$data){x="keywordValidate"+i;var P=b.validateSchema;o+=" var "+S+" = RULES.custom['"+t+"'].definition; var "+x+" = "+S+".validate;"}else{if(!(y=e.useCustomRule(this,l,e.schema,e)))return;n="validate.schema"+c,x=y.code,v=b.compile,_=b.inline,g=b.macro}var w=x+".errors",O="i"+i,R="ruleErr"+i,T=b.async;if(T&&!e.async)throw new Error("async keyword in sync schema");if(_||g||(o+=w+" = null;"),o+="var "+m+" = errors;var "+p+";",h&&b.$data&&(E+="}",o+=" if ("+n+" === undefined) { "+p+" = true; } else { ",P&&(E+="}",o+=" "+p+" = "+S+".validateSchema("+n+"); if ("+p+") { ")),_)b.statements?o+=" "+y.validate+" ":o+=" "+p+" = "+y.validate+"; ";else if(g){var A=e.util.copy(e);E="";A.level++;var M="valid"+A.level;A.schema=y.validate,A.schemaPath="";var D=e.compositeRule;e.compositeRule=A.compositeRule=!0;var N=e.validate(A).replace(/validate\.schema/g,x);e.compositeRule=A.compositeRule=D,o+=" "+N}else{(C=C||[]).push(o),o="",o+="  "+x+".call( ",e.opts.passContext?o+="this":o+="self",v||!1===b.schema?o+=" , "+d+" ":o+=" , "+n+" , "+d+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var I=s?"data"+(s-1||""):"parentData",F=s?e.dataPathArr[s]:"parentDataProperty",L=o+=" , "+I+" , "+F+" , rootData )  ";o=C.pop(),!1===b.errors?(o+=" "+p+" = ",T&&(o+="await "),o+=L+"; "):o+=T?" var "+(w="customErrors"+i)+" = null; try { "+p+" = await "+L+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+w+" = e.errors; else throw e; } ":" "+w+" = null; "+p+" = "+L+"; "}if(b.modifying&&(o+=" if ("+I+") "+d+" = "+I+"["+F+"];"),o+=""+E,b.valid)f&&(o+=" if (true) { ");else{var C;o+=" if ( ",void 0===b.valid?(o+=" !",o+=g?""+M:""+p):o+=" "+!b.valid+" ",o+=") { ",a=this.keyword,(C=C||[]).push(o),o="",(C=C||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var U=o;o=C.pop(),!e.compositeRule&&f?e.async?o+=" throw new ValidationError(["+U+"]); ":o+=" validate.errors = ["+U+"]; return false; ":o+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var V=o;o=C.pop(),_?b.errors?"full"!=b.errors&&(o+="  for (var "+O+"="+m+"; "+O+"<errors; "+O+"++) { var "+R+" = vErrors["+O+"]; if ("+R+".dataPath === undefined) "+R+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+R+".schemaPath === undefined) { "+R+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(o+=" "+R+".schema = "+n+"; "+R+".data = "+d+"; "),o+=" } "):!1===b.errors?o+=" "+V+" ":(o+=" if ("+m+" == errors) { "+V+" } else {  for (var "+O+"="+m+"; "+O+"<errors; "+O+"++) { var "+R+" = vErrors["+O+"]; if ("+R+".dataPath === undefined) "+R+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+R+".schemaPath === undefined) { "+R+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(o+=" "+R+".schema = "+n+"; "+R+".data = "+d+"; "),o+=" } } "):g?(o+="   var err =   ",!1!==e.createErrors?(o+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===b.errors?o+=" "+V+" ":(o+=" if (Array.isArray("+w+")) { if (vErrors === null) vErrors = "+w+"; else vErrors = vErrors.concat("+w+"); errors = vErrors.length;  for (var "+O+"="+m+"; "+O+"<errors; "+O+"++) { var "+R+" = vErrors["+O+"]; if ("+R+".dataPath === undefined) "+R+".dataPath = (dataPath || '') + "+e.errorPath+";  "+R+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(o+=" "+R+".schema = "+n+"; "+R+".data = "+d+"; "),o+=" } } else { "+V+" } "),o+=" } ",f&&(o+=" else { ")}return o}},566:function(e,t,r){"use strict";var a=r(153);e.exports={$id:"https://github.com/epoberezkin/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:a.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:a.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},567:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},57:function(e,t,r){"use strict";function a(e,t,r){var a=r?" !== ":" === ",n=r?" || ":" && ",o=r?"!":"",i=r?"":"!";switch(e){case"null":return t+a+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+n+"typeof "+t+a+'"object"'+n+i+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+a+'"number"'+n+i+"("+t+" % 1)"+n+t+a+t+")";default:return"typeof "+t+a+'"'+e+'"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:a,checkDataTypes:function(e,t){switch(e.length){case 1:return a(e[0],t,!0);default:var r="",n=o(e);for(var i in n.array&&n.object&&(r=n.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete n.null,delete n.array,delete n.object),n.number&&delete n.integer,n)r+=(r?" && ":"")+a(i,t,!0);return r}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],a=0;a<t.length;a++){var o=t[a];(n[o]||"array"===e&&"array"===o)&&(r[r.length]=o)}if(r.length)return r}else{if(n[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:o,getProperty:l,escapeQuotes:c,equal:r(95),ucs2length:r(537),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},cleanUpCode:function(e){return e.replace(u,"").replace(f,"").replace(d,"if (!($1))")},finalCleanUpCode:function(e,t){var r=e.match(p);r&&2==r.length&&(e=t?e.replace(h,"").replace(v,"return data;"):e.replace(m,"").replace("return errors === 0;","validate.errors = null; return true;"));return(r=e.match(_))&&3===r.length?e.replace(g,""):e},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var a in e)if(a!=r&&t[a])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:y,getPathExpr:function(e,t,r,a){return b(e,r?"'/' + "+t+(a?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):a?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var a=y(r?"/"+E(t):l(t));return b(e,a)},getData:function(e,t,r){var a,n,o,i;if(""===e)return"rootData";if("/"==e[0]){if(!x.test(e))throw new Error("Invalid JSON-pointer: "+e);n=e,o="rootData"}else{if(!(i=e.match(S)))throw new Error("Invalid JSON-pointer: "+e);if(a=+i[1],"#"==(n=i[2])){if(a>=t)throw new Error("Cannot access property/index "+a+" levels up, current level is "+t);return r[t-a]}if(a>t)throw new Error("Cannot access data "+a+" levels up, current level is "+t);if(o="data"+(t-a||""),!n)return o}for(var s=o,c=n.split("/"),u=0;u<c.length;u++){var f=c[u];f&&(o+=l(P(f)),s+=" && "+o)}return s},unescapeFragment:function(e){return P(decodeURIComponent(e))},unescapeJsonPointer:P,escapeFragment:function(e){return encodeURIComponent(E(e))},escapeJsonPointer:E};var n=o(["string","number","integer","boolean","null"]);function o(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var i=/^[a-z$_][a-z$_0-9]*$/i,s=/'|\\/g;function l(e){return"number"==typeof e?"["+e+"]":i.test(e)?"."+e:"['"+c(e)+"']"}function c(e){return e.replace(s,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var u=/else\s*{\s*}/g,f=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,d=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var p=/[^v.]errors/g,m=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,h=/var errors = 0;|var vErrors = null;/g,v=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,_=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,g=/if \(rootData === undefined\) rootData = data;/;function y(e){return"'"+c(e)+"'"}var x=/^\/(?:[^~]|~0|~1)*$/,S=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function b(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function E(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function P(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},599:function(e,t,r){"use strict";r.r(t);var a=r(303),n=r(304),o=r(0),i=r(11),s=r(8),l=r(305),c=r.n(l),u=r(306),f=r.n(u);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e,t,r){return(y=g()?Reflect.construct:function(e,t,r){var a=[null];a.push.apply(a,t);var n=new(Function.bind.apply(e,a));return r&&x(n,r.prototype),n}).apply(null,arguments)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b,E,P,w,O,R,T,A={u_base:{type:"f",value:.8},u_base_color:{type:"c",value:new o.Color(16777215)},u_coat:{type:"f",value:0},u_coat_affect_color:{type:"f",value:0},u_coat_affect_roughness:{type:"f",value:0},u_coat_anisotropy:{type:"f",value:0},u_coat_color:{type:"c",value:new o.Color(16777215)},u_coat_IOR:{type:"f",value:1.5},u_coat_normal:{type:"v3",value:new o.Vector3(0,0,0)},u_coat_rotation:{type:"f",value:0},u_coat_roughness:{type:"f",value:.1},u_diffuse_roughness:{type:"f",value:0},u_emission:{type:"f",value:0},u_emission_color:{type:"c",value:new o.Color(16777215)},u_metalness:{type:"f",value:0},u_normal:{type:"v3",value:new o.Vector3(0,0,0)},u_opacity:{type:"c",value:new o.Color(16777215)},u_sheen:{type:"f",value:0},u_sheen_color:{type:"c",value:new o.Color(16777215)},u_sheen_roughness:{type:"f",value:.3},u_specular:{type:"f",value:1},u_specular_anisotropy:{type:"f",value:0},u_specular_color:{type:"c",value:new o.Color(16777215)},u_specular_IOR:{type:"f",value:1.52},u_specular_rotation:{type:"f",value:0},u_specular_roughness:{type:"f",value:.1},u_subsurface:{type:"f",value:0},u_subsurface_anisotropy:{type:"f",value:0},u_subsurface_color:{type:"c",value:new o.Color(16777215)},u_subsurface_radius:{type:"c",value:new o.Color(16777215)},u_subsurface_scale:{type:"f",value:1},u_thin_film_IOR:{type:"f",value:1.5},u_thin_film_thickness:{type:"f",value:0},u_thin_walled:{type:"i",value:0},u_transmission:{type:"f",value:0},u_transmission_color:{type:"c",value:new o.Color(16777215)},u_transmission_depth:{type:"f",value:0},u_transmission_dispersion:{type:"f",value:0},u_transmission_extra_roughness:{type:"f",value:0},u_transmission_scatter:{type:"c",value:new o.Color(0)},u_transmission_scatter_anisotropy:{type:"f",value:0}},M=(b=[1.6177,.978927,.618938,.391714,.245177,.150234,.0893475,.0511377,.0280191,.0144204,.00687674,.00295935,.00111049,336768e-9,707119e-10,622646e-11,1.1084,.813928,.621389,.479304,.370299,.284835,.21724,.163558,.121254,.0878921,.0619052,.0419894,.0270556,.0161443,.00848212,.00342323,.930468,.725652,.586532,.479542,.393596,.322736,.26353,.213565,.171456,.135718,.105481,.0800472,.0588117,.0412172,.0268329,.0152799,.833791,.671201,.558957,.471006,.398823,.337883,.285615,.240206,.200696,.16597,.135422,.10859,.0850611,.0644477,.0464763,.0308878,.771692,.633819,.537877,.461939,.398865,.344892,.297895,.256371,.219562,.186548,.156842,.130095,.10598,.0841919,.0645311,.04679,.727979,.606373,.52141,.453769,.397174,.348337,.305403,.267056,.232655,.201398,.17286,.146756,.122808,.100751,.0804254,.0616485,.695353,.585281,.508227,.44667,.394925,.350027,.310302,.274561,.242236,.212604,.185281,.16002,.13657,.114693,.0942543,.0750799,.669981,.568519,.497442,.440542,.392567,.350786,.313656,.280075,.249533,.221359,.195196,.170824,.148012,.126537,.106279,.0870713,.649644,.554855,.488453,.435237,.390279,.351028,.316036,.284274,.255266,.228387,.203297,.179796,.157665,.136695,.116774,.0977403,.632951,.543489,.480849,.430619,.388132,.350974,.317777,.287562,.259885,.234153,.210041,.187365,.165914,.145488,.125983,.10724,.61899,.533877,.47433,.426573,.386145,.35075,.319078,.290197,.263681,.238971,.215746,.193838,.173043,.153167,.134113,.115722,.607131,.52564,.468678,.423001,.38432,.35043,.320072,.292349,.266856,.243055,.220636,.199438,.179264,.159926,.141332,.123323,.596927,.518497,.463731,.419829,.382647,.350056,.320842,.294137,.269549,.246564,.224875,.204331,.18474,.165919,.147778,.130162,.588052,.512241,.459365,.416996,.381114,.349657,.321448,.295641,.271862,.24961,.228584,.208643,.189596,.171266,.153566,.136341,.580257,.506717,.455481,.41445,.379708,.34925,.321929,.296923,.273869,.252279,.231859,.212472,.193933,.176066,.158788,.141945,.573355,.5018,.452005,.412151,.378416,.348844,.322316,.298028,.275627,.254638,.234772,.215896,.197828,.180398,.163522,.147049],E=Math.sqrt(b.length),P=Math.max.apply(Math,_(b)),w=Math.min.apply(Math,_(b)),O=P-w,R=new Uint8Array(b.map((function(e){return(e-w)/O})).map((function(e){var t=[1,255,65025,16581375].map((function(t){return t*e*255/256%1}));return[t[0]-t[1]/255,t[1]-t[2]/255,t[2]-t[3]/255,t[3]].map((function(e){return Math.floor(255*e)}))})).flat()),(T=I(R,E,E,o.RGBAFormat,o.UnsignedByteType,o.UVMapping,o.ClampToEdgeWrapping,o.ClampToEdgeWrapping,o.LinearFilter,o.LinearFilter,0)).generateMipmaps=!1,{tex:T,rng:O,min:w,size:E,data:R}),D=function(e){var t=e.length,r=I(new Uint8Array(e),t,1,o.LuminanceFormat,o.UnsignedByteType,o.UVMapping,o.RepeatWrapping,o.RepeatWrapping,o.NearestFilter,o.NearestFilter,0);return r.generateMipmaps=!1,{tex:r,size:t}}([0,128,64,191,32,160,96,223,16,143,80,207,48,175,112,239,8,135,72,199,40,167,103,231,25,151,88,215,56,183,120,250]);function N(e){var t;return S(t={},e,{type:"t",value:null}),S(t,"".concat(e,"_texMatrix"),{type:"m3",value:null}),S(t,"".concat(e,"_invert"),{type:"i",value:0}),S(t,"".concat(e,"_encoding"),{type:"i",value:0}),S(t,"".concat(e,"_valueScale"),{type:"f",value:1}),t}function I(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=y(o.DataTexture,t);return a.needsUpdate=!0,a}function F(e){switch(e){case"i":return"int";case"f":return"float";case"v3":case"c":return"vec3";default:throw new Error("unrecognized uniform type: ".concat(e))}}var L={uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.lights,o.UniformsLib.fog,i.a.CutPlanesUniforms,i.a.IdUniforms,i.a.ThemingUniform,i.a.ShadowMapUniforms,A].concat(_(Object.keys(A).map((function(e){return/_normal$/.test(e)?(t="".concat(e,"_map"),o.UniformsUtils.merge([N(t),(r={},S(r,"".concat(t,"_isHeight"),{type:"i",value:0}),S(r,"".concat(t,"_heightScale"),{type:"v2",value:new o.Vector2(1,1)}),r)])):N("".concat(e,"_map"));var t,r})).flat()),[Object(s.b)("TilingMap"),Object(s.b)("TilingNormalMap"),Object(s.b)("TilingRandomMap"),{u_sheenAlbedo:{type:"t",value:null},u_samplingRandomMap:{type:"t",value:null},irradianceMap:{type:"t",value:null},envMap:{type:"t",value:null},exposureBias:{type:"f",value:1},envMapExposure:{type:"f",value:1},envRotationSin:{type:"f",value:0},envRotationCos:{type:"f",value:1},envExponentMin:{type:"f",value:1},envExponentMax:{type:"f",value:512},envExponentCount:{type:"f",value:10},envMapMipLevels:{type:"i",value:1},tilingOverallTransform:{type:"m4",value:new o.Matrix4},uv2tile:{type:"v4",value:new o.Vector4(1,0,0,1)},tile2uv:{type:"v4",value:new o.Vector4(1,0,0,1)},tileAlignOffset:{type:"v2",value:new o.Vector2(0,0)},tilingUVTransform:{type:"m4",value:new o.Matrix4},tilingRandomAxisS:{type:"v2",value:new o.Vector2(0,0)},tilingRandomAxisT:{type:"v2",value:new o.Vector2(0,0)},tilingRandomAlignmentOffset:{type:"v2",value:new o.Vector2(0,0)}}])),vertexShader:c.a,fragmentShader:function(e){for(var t="",r="",a=0,n=Object.entries(A);a<n.length;a++){var o=v(n[a],2),i=o[0],s=o[1],l=/_normal$/.test(i);if(t+="uniform ".concat(F(s.type).padEnd(9," ")," ").concat(i,";\n#if defined(USE_").concat(i.slice(2).toUpperCase(),"_MAP)\nuniform sampler2D ").concat(i,"_map;\nuniform mat3      ").concat(i,"_map_texMatrix;\nuniform int       ").concat(i,"_map_invert;\nuniform int       ").concat(i,"_map_encoding;\nuniform float     ").concat(i,"_map_valueScale;\n"),l&&(t+="uniform int       ".concat(i,"_map_isHeight;\nuniform vec2      ").concat(i,"_map_heightScale;\n")),t+="#endif\n",l)r+="mat3 get_".concat(i.slice(2).replace(/normal$/,"TBN"),"(in vec3 geoWorldNorm, in vec3 T, in vec3 B, in vec2 uv) {\n    vec3 N = ").concat(i,";\n    if (length(N) <= M_FLOAT_EPS) {\n        N = geoWorldNorm;\n    }\n    N = normalize(N);\n    #if defined(USE_").concat(i.slice(2).toUpperCase(),"_MAP)\n    transform_basis(T, B, N, uv, ").concat(i,"_map, ").concat(i,"_map_texMatrix, ").concat(i,"_map_invert, ").concat(i,"_map_encoding, ").concat(i,"_map_valueScale, ").concat(i,"_map_isHeight, ").concat(i,"_map_heightScale);\n    #endif\n    return mat3(T, B, N);\n}\n\n");else{var c=F(s.type);r+="".concat(c," get_").concat(i.slice(2),"(in vec2 uv) {\n    ").concat(c," val = ").concat(i,";\n    #if defined(USE_").concat(i.slice(2).toUpperCase(),"_MAP)\n    val = ").concat("i"===s.type?"int(":"","sample_map((").concat(i,"_map_texMatrix * vec3(uv, 1.0)).xy, ").concat(i,"_map, ").concat(i,"_map_invert, ").concat(i,"_map_encoding, ").concat(i,"_map_valueScale).r").concat("c"===s.type?"gb":"i"===s.type?" > 0.5)":"",";\n    #endif\n    return val").concat(/rotation$/.test(i)?" / ".concat(c,"(PI * 2.0)"):"",";\n}\n\n")}}return e.replace(/^#inject<uniforms>$/m,t).replace(/^#inject<getters>$/m,r)}(f.a)};function C(e){return e.replace(/(_[a-z])/gi,(function(e){return e.toUpperCase().replace("_","")}))}for(var U,V=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=m(this,h(t).call(this,{uniforms:o.UniformsUtils.clone(L.uniforms),vertexShader:L.vertexShader,fragmentShader:L.fragmentShader}))).type="StandardSurfaceMaterial",e.supportsMrtNormals=!0,e.lights=!0,e.uniforms.u_sheenAlbedo.value=M.tex,e.uniforms.u_samplingRandomMap.value=D.tex,e.uniforms.envMapMipLevels.value=8,e.defines.SHEEN_ALBEDO_TABLE_SIZE=M.size,e.defines.SHEEN_ALBEDO_TABLE_RANGE=M.rng,e.defines.SHEEN_ALBEDO_TABLE_MIN=M.min,e.defines.SAMPLING_RANDOM_TABLE_SIZE=D.size,e.defines.NUM_SAMPLES=8,e.shading=o.FlatShading,e.isStandardSurfaceMaterial=!0,e.needsUpdate=!0,e}var r,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,e),r=t,(a=[{key:"refreshUniforms",value:function(e){e.exposureBias.value=this.exposureBias;for(var t=0,r=Object.keys(A);t<r.length;t++){var a=r[t],n=this[C(a.slice(2))];n instanceof o.Texture&&this.refreshTextureUniforms(a,n,e)}e.envMap.value=this.envMap,e.irradianceMap.value=this.irradianceMap,e.envMapExposure.value=this.envMapExposure,e.envRotationSin.value=this.envRotationSin,e.envRotationCos.value=this.envRotationCos}},{key:"refreshTextureUniforms",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.uniforms;r["".concat(e,"_map")].value=t,r["".concat(e,"_map_texMatrix")].value=t.matrix,r["".concat(e,"_map_invert")].value=t.invert?1:0,r["".concat(e,"_map_encoding")].value="linear"===t.encoding?1:0,r["".concat(e,"_map_valueScale")].value=t.rgbScale,/normal$/.test(e)&&(r["".concat(e,"_map_isHeight")].value=t.isHeightMap?1:0,r["".concat(e,"_map_heightScale")].value.set(t.heightMapScale,t.heightMapScale))}},{key:"_getter",value:function(e,t){if(this.defines.hasOwnProperty("USE_".concat(t.slice(2).toUpperCase(),"_MAP")))return this.uniforms["".concat(t,"_map")].value;var r=this.uniforms[t].value;return"i"===e?!!r:r}},{key:"_setter",value:function(e,t,r){if(r instanceof o.Texture)return this.refreshTextureUniforms(t,r),this.defines.hasOwnProperty("USE_".concat(t.slice(2).toUpperCase(),"_MAP"))||(this.defines["USE_".concat(t.slice(2).toUpperCase(),"_MAP")]=!0,this.needsUpdate=!0),!0;switch(null==r&&(r="c"===e||"v3"===e?A[t].clone():A[t].value),e){case"f":if("number"!=typeof r)return console.warn("Invalid value for ".concat(C(t.slice(2)),"; expected number or texture")),!1;break;case"c":if(!(r instanceof o.Color)){if("number"!=typeof r&&"string"!=typeof r)return console.warn("Invalid value for ".concat(C(t.slice(2)),"; expected color or texture")),!1;r=new o.Color(r)}break;case"v3":if(!(r instanceof o.Vector3))return console.warn("Invalid value for ".concat(C(t.slice(2)),"; expected vec3 or texture")),!1;break;case"i":r=!!r}return this.uniforms[t].value!==r&&(this.uniforms[t].value=r),this.defines.hasOwnProperty("USE_".concat(t.slice(2).toUpperCase(),"_MAP"))&&(delete this.defines["USE_".concat(t.slice(2).toUpperCase(),"_MAP")],this.needsUpdate=!0),!0}},{key:"clone",value:function(){var e=new t;e.standardSurface=this.standardSurface,e.name=this.tag,e.packedNormals=!0;for(var r=0,a=Object.keys(A);r<a.length;r++){var n=C(a[r].slice(2));this[n]instanceof o.Vector3||this[n]instanceof o.Color?e[n]=this[n].clone():e[n]=this[n]}return e.envMap=this.envMap,e.irradianceMap=this.irradianceMap,e.envMapExposure=this.envMapExposure,e.envRotationSin=this.envRotationSin,e.envRotationCos=this.envRotationCos,e.exposureBias=this.exposureBias,e.tonemapOutput=this.tonemapOutput,e.cutplanes=this.cutplanes,e.textureMaps=this.textureMaps,e.texturesLoaded=this.texturesLoaded,e}},{key:"transparent",get:function(){return this.uniforms.u_opacity.value.r<1||this.uniforms.u_opacity.value.g<1||this.uniforms.u_opacity.value.b<1||this.uniforms.u_transmission.value>0||null!==this.uniforms.u_transmission_map.value},set:function(e){return!0}},{key:"opacity",get:function(){return this.uniforms?(this.uniforms.u_opacity.value.r+this.uniforms.u_opacity.value.g+this.uniforms.u_opacity.value.b)/3:1},set:function(e){return!this.uniforms||("number"==typeof e&&(e=new o.Color(e,e,e)),this._setter("c","u_opacity",e))}},{key:"envMap",get:function(){return this.uniforms.envMap.value},set:function(e){return this.uniforms.envMap.value!==e&&(this.uniforms.envMap.value=e),!0}},{key:"irradianceMap",get:function(){return this.uniforms.irradianceMap.value},set:function(e){return this.uniforms.irradianceMap.value!==e&&(this.uniforms.irradianceMap.value=e),!0}},{key:"envMapExposure",get:function(){return this.uniforms.envMapExposure.value},set:function(e){return this.uniforms.envMapExposure.value!==e&&(this.uniforms.envMapExposure.value=e),!0}},{key:"envRotationSin",get:function(){return this.uniforms.envRotationSin.value},set:function(e){return this.uniforms.envRotationSin.value!==e&&(this.uniforms.envRotationSin.value=e),!0}},{key:"envRotationCos",get:function(){return this.uniforms.envRotationCos.value},set:function(e){return this.uniforms.envRotationSin.value!==e&&(this.uniforms.envRotationCos.value=e),!0}}])&&p(r.prototype,a),n&&p(r,n),t}(o.ShaderMaterial),z=function(){var e=v($[k],2),t=e[0],r=e[1],a=C(t.slice(2));Object.hasOwnProperty.call(V.prototype,a)||Object.defineProperty(V.prototype,a,{get:function(){return this._getter(r.type,t)},set:function(e){return this._setter(r.type,t,e)}})},k=0,$=Object.entries(A);k<$.length;k++)z();function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e){var t=e.units||"radian";return e.value*="radian"===t?1:Math.PI/180}function W(){return 2*Math.PI}function G(e,t){var r=e.units||t;return te(e.value,r,t)}function q(e,t){return te(1,e.units||t,t)}function X(e){return e.value}function Q(){return 1}var Y={coat_rotation:H,specular_rotation:H,subsurface_scale:G,transmission_depth:G,thin_film_thickness:function(e,t){var r=e.units||t;return te(e.value,r,"nanometer")}},Z={coat_rotation:W,specular_rotation:W,subsurface_scale:q,transmission_depth:q,thin_film_thickness:function(e,t){return te(1,e.units||t,"nanometer")}},K={coat_normal:!0,normal:!0},J={nanometer:{millimeter:1e-6,centimeter:1e-7,inch:3.93701e-8,decimeter:1e-8,foot:3.28084e-9,yard:1.09361e-9,meter:1e-9,kilometer:1e-12,mile:621371e-18},millimeter:{nanometer:1e6,centimeter:.1,inch:.0393701,decimeter:.01,foot:.00328084,yard:.00109361,meter:.001,kilometer:1e-6,mile:6.21371e-7},centimeter:{nanometer:1e7,millimeter:10,inch:.393701,decimeter:.1,foot:.0328084,yard:.0109361,meter:.01,kilometer:1e-5,mile:621371e-11},inch:{nanometer:254e5,millimeter:25.4,centimeter:2.54,decimeter:.254,foot:1/12,yard:1/36,meter:.0254,kilometer:254e-7,mile:1/63360},decimeter:{nanometer:1e8,millimeter:100,centimeter:10,inch:3.93701,foot:.328084,yard:.109361,meter:.1,kilometer:1e-4,mile:621371e-10},foot:{nanometer:3048e5,millimeter:304.8,centimeter:30.48,inch:12,decimeter:3.048,yard:1/3,meter:.3048,kilometer:3048e-7,mile:1/5280},yard:{nanometer:9144e5,millimeter:914.4,centimeter:91.44,inch:36,decimeter:9.144,foot:3,meter:.9144,kilometer:9144e-7,mile:1/1760},meter:{nanometer:1e9,millimeter:1e3,cenimeter:100,inch:39.3701,decimeter:10,foot:3.28084,yard:1.09361,kilometer:.001,mile:621371e-9},kilometer:{nanometer:1e12,millimeter:1e6,centimeter:1e5,inch:39370.1,decimeter:1e4,foot:3280.84,yard:1093.61,meter:1e3,mile:.621371},mile:{nanometer:160934e7,millimeter:1609340,centimeter:160934,inch:63360,decimeter:16093.4,foot:5280,yard:1760,meter:1609.34,kilometer:1.60934}};function ee(e){if("number"==typeof e)switch(e){case 8208:return"nanometer";case 8206:return"millimeter";case 8205:return"centimeter";case 8214:return"inch";case 8204:return"decimeter";case 8215:return"foot";case 8221:return"yard";case 8193:return"meter";case 8201:return"kilometer";case 8225:return"mile";default:return e}else if("string"==typeof e)switch(e.toLowerCase()){case"nm":case"nanometer":case"nanometers":return"nanometer";case"mm":case"millimeter":case"millimeters":return"millimeter";case"cm":case"centimeter":case"centimeters":return"centimeter";case"in":case"inch":case"inches":return"inch";case"dm":case"decimeter":case"decimeters":return"decimeter";case"ft":case"foot":case"feet":return"foot";case"yd":case"yard":case"yards":return"yard";case"m":case"meter":case"meters":return"meter";case"km":case"kilometer":case"kilometers":return"kilometer";case"mi":case"mile":case"miles":return"mile";default:return e}return e}function te(e,t,r){if((t=ee(t))===(r=ee(r)))return e;if(!J[t])throw new Error("unrecognized source units: ".concat(t));if(!J[t][r])throw new Error("unrecognized destination units: ".concat(r));return e*J[t][r]}function re(e,t){if(!t)return e;if("/"===t)return e;if(!/^#?\//.test(t))throw new Error("bad pointer: ".concat(t));for(var r=t.split("/").filter((function(e){return e&&"#"!==e}));r.length;)try{e=Array.isArray(e)?e[parseInt(r.shift())]:e[r.shift()]}catch(e){throw new Error("Unable to find by pointer: ".concat(t))}return e}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=re(e,t),a=[];for(var n in r){var o=r[n];if("$ref"===n){var i=o.slice(1);try{re(e,i)}catch(e){a.push(new Error('Texture reference "#'.concat(i," does not exist (refereced from ").concat(t,"/").concat(n,")")))}}else(Array.isArray(o)||"object"===B(o))&&(a=a.concat(ae(e,t+"/"+n)))}return a}function ne(e,t){if(!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];U||(U=(new a).compile(n)),U(e);var r=[].concat(U.errors||[],ae(e));return!r.length||(t||console.error(["Standard Surface validation errors:"].concat(r.map((function(e){return JSON.stringify(e)}))).join("\n")),!1)}(e))throw new Error("Invalid Standard Surface definition");var r=new V;r.standardSurface=e,r.name=r.tag=e.tag,r.transparent=e.transparent,r.packedNormals=!0,r.needsUpdate=!0;for(var o=r.textureMaps={},i=r.uniforms,s=e.parameters,l=0,c=Object.entries(s);l<c.length;l++){var u=j(c[l],2),f=u[0],d=u[1],p="u_".concat(f);if(!i[p])throw new Error("unrecognized parameter: ".concat(f));var m=i[p].type;if(d.hasOwnProperty("value"))switch(m){case"c":r.uniforms[p].value=new THREE.Color(d.value.r,d.value.g,d.value.b);break;case"v3":r.uniforms[p].value=new THREE.Vector3(d.value.x,d.value.y,d.value.z);break;case"f":i[p].value=(Y[f]||X)(d,t);break;case"i":r.uniforms[p].value=d.value?1:0;break;default:throw new Error(" unreachable ")}else if(d.hasOwnProperty("texture")){if(!d.texture.hasOwnProperty("$ref")||"string"!=typeof d.texture.$ref)throw new Error("invalid ref");var h=p.slice(2).replace(/(_[a-z])/gi,(function(e){return e.toUpperCase().replace("_","")})),v=re(e,d.texture.$ref),_="f"===m?(Z[f]||Q)(d,t):1;o[h]={mapName:h,uri:v.bitmap,textureObj:v,converter:oe,mtlSpecific:{sceneUnit:t,unitScale:_,isNormal:K[f]}}}}return r.needsUpdate=!0,r}function oe(e,t,r,a){var n=e.textureObj;r=e.mtlSpecific.sceneUnit||r,t.anisotropy=e.mtlSpecific.isNormal?0:a||0,t.mapping=THREE.UVMapping,t.wrapS=!1===n.uRepeat?THREE.ClampToEdgeWrapping:THREE.RepeatWrapping,t.wrapT=!1===n.vRepeat?THREE.ClampToEdgeWrapping:THREE.RepeatWrapping,t.magFilter=t.minFilter="nearest"===n.filtering?THREE.NearestFilter:THREE.LinearFilter,t.encoding="linear"===n.encoding?"linear":"srgb",t.isHeightMap=!0===n.isHeightMap,t.invert=!0===n.invert,t.heightMapScale=te((n.heightMapScale||{}).value||1,(n.heightMapScale||{}).units||r,r),t.rgbScale=((n.rgbScale||{}).value||1)*e.mtlSpecific.unitScale;var o=te((n.realWorldOffsetX||{}).value||0,(n.realWorldOffsetX||{}).units||r,r),i=te((n.realWorldOffsetY||{}).value||0,(n.realWorldOffsetY||{}).units||r,r),s=te((n.realWorldScaleX||{}).value||1,(n.realWorldScaleX||{}).units||r,r),l=te((n.realWorldScaleY||{}).value||1,(n.realWorldScaleY||{}).units||r,r),c=(n.uOffset||{}).value||0,u=(n.uScale||{}).value||1,f=(n.vOffset||{}).value||0,d=(n.vScale||{}).value||1,p=((n.wAngle||{}).value||0)*("degree"===(n.wAngle||{}).units?Math.PI/180:1),m=Math.cos(p),h=Math.sin(p),v=u/s,_=d/l;t.matrix=new THREE.Matrix3,t.matrix.elements=[m*v,h*v,0,-h*_,m*_,0,-m*v*o+h*_*i+c,-h*v*o-m*_*i+f,1]}function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function le(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fe=Autodesk.Viewing,de=fe.Private,pe=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),le(this,ce(t).call(this,e,r))}var r,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,e),r=t,(a=[{key:"load",value:function(){return!0}},{key:"unload",value:function(){}},{key:"activate",value:function(){return!1}},{key:"deactivate",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"onToolbarCreated",value:function(e){var t=this,r=this.viewer.renderoptions;if(r){var a,n,o,i;this._updateNumSamplesUI=(a=this.updateNumSamples,n=600,function(){var e=this,t=arguments,r=function(){i=null,o||a.apply(e,t)},s=o&&!i;clearTimeout(i),i=setTimeout(r,n),s&&a.apply(e,t)});var s=de.OptionSlider;r._numSamples=new s("Num Samples",1,32,r.tbody),r._numSamples.setGlobalManager(this.globalManager),r._numSamples.setValue(8),r._numSamples.sliderElement.step=1,r.addEventListener(r._numSamples,"change",(function(e){var r=parseInt(e.detail.value);de.logger.debug("value: "+r),t._updateNumSamplesUI(r)})),r.uninitialize=function(){de.RenderOptionsPanel.prototype.uninitialize.call(this),this._numSamples=null,this._updateNumSamplesUI=null}.bind(r)}}},{key:"processModel",value:function(e){de.logger.info("SVF contains StandardSurface.json material definitions:");var t=e.getData().stdSurfMats;this.processMaterials(e,t)}},{key:"processMaterials",value:function(e,t){var r=this,a=t.materials,n=t.scene.SceneUnit,o=!1;Object.keys(a).forEach((function(t){var i,s=a[t];try{i=ne(s,n)}catch(e){var l=e;return l instanceof Error||(l=new Error("StandardSurface material ".concat(t," parse failed: ").concat(e,"}"))),void de.logger.error(l)}o=!0,de.logger.info("StandardSurface material ".concat(t," is valid")),r._updateMaterial(e,t,i).texturesLoaded&&de.TextureLoader.loadMaterialTextures(e,i,r.viewer.impl)})),o&&this.viewer.impl.sceneUpdated(!1,!1)}},{key:"_updateMaterial",value:function(e,t,r){var a=e.getFragmentList(),n=this.viewer.impl.matman(),o=n._getMaterialHash(e,t),i=n._materials[o];if(i&&i.dispose(),n.addMaterial(o,r,!0),a.useThreeMesh)for(var s=a.vizmeshes,l=0;l<s.length;++l)s[l]&&s[l].material===i&&(s[l].material=r);else{var c=a.materialmap[i.id];void 0!==c&&(a.materialmap[r.id]=c,a.materialIdMap[c]=r)}return i}},{key:"updateNumSamples",value:function(e){var t=0;this.viewer.impl.matman().forEach((function(r){r.isStandardSurfaceMaterial&&r.defines.NUM_SAMPLES!==e&&(r.defines.NUM_SAMPLES=e,r.needsUpdate=!0,t++)}),!0,!1),t>0&&(de.logger.debug("NUM_SAMPLES: "+e+" / materials updated: "+t+" | Wait for LMV to re-render."),this.viewer.impl.invalidate(!1,!0,!1))}}])&&se(r.prototype,a),n&&se(r,n),t}(fe.Extension);fe.theExtensionManager.registerExtension("Autodesk.StandardSurface",pe)},8:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o}));var a=r(0);function n(e){var t=e+"_texMatrix",r=e+"_invert",n={};return n[e]={type:"t",value:null},n[t]={type:"m3",value:new a.Matrix3},n[r]={type:"i",value:0},n}function o(e){var t=e+"_texMatrix",r=e+"_bumpScale",n=e+"_bumpmapType",o={};return o[e]={type:"t",value:null},o[t]={type:"m3",value:new a.Matrix3},o[r]={type:"v2",value:new a.Vector2(1,1)},o[n]={type:"i",value:0},o}},94:function(e,t,r){"use strict";var a=r(536),n=r(95),o=r(57),i=r(146),s=r(538);function l(e,t,r){var a=this._refs[r];if("string"==typeof a){if(!this._refs[a])return l.call(this,e,t,a);a=this._refs[a]}if((a=a||this._schemas[r])instanceof i)return m(a.schema,this._opts.inlineRefs)?a.schema:a.validate||this._compile(a);var n,o,s,u=c.call(this,t,r);return u&&(n=u.schema,t=u.root,s=u.baseId),n instanceof i?o=n.validate||e.call(this,n.schema,t,void 0,s):void 0!==n&&(o=m(n,this._opts.inlineRefs)?n:e.call(this,n,t,void 0,s)),o}function c(e,t){var r=a.parse(t),n=v(r),o=h(this._getId(e.schema));if(0===Object.keys(e.schema).length||n!==o){var s=g(n),l=this._refs[s];if("string"==typeof l)return u.call(this,e,l,r);if(l instanceof i)l.validate||this._compile(l),e=l;else{if(!((l=this._schemas[s])instanceof i))return;if(l.validate||this._compile(l),s==g(t))return{schema:l,root:e,baseId:o};e=l}if(!e.schema)return;o=h(this._getId(e.schema))}return d.call(this,r,o,e.schema,e)}function u(e,t,r){var a=c.call(this,e,t);if(a){var n=a.schema,o=a.baseId;e=a.root;var i=this._getId(n);return i&&(o=y(o,i)),d.call(this,r,o,n,e)}}e.exports=l,l.normalizeId=g,l.fullPath=h,l.url=y,l.ids=function(e){var t=g(this._getId(e)),r={"":t},i={"":h(t,!1)},l={},c=this;return s(e,{allKeys:!0},(function(e,t,s,u,f,d,p){if(""!==t){var m=c._getId(e),h=r[u],v=i[u]+"/"+f;if(void 0!==p&&(v+="/"+("number"==typeof p?p:o.escapeFragment(p))),"string"==typeof m){m=h=g(h?a.resolve(h,m):m);var _=c._refs[m];if("string"==typeof _&&(_=c._refs[_]),_&&_.schema){if(!n(e,_.schema))throw new Error('id "'+m+'" resolves to more than one schema')}else if(m!=g(v))if("#"==m[0]){if(l[m]&&!n(e,l[m]))throw new Error('id "'+m+'" resolves to more than one schema');l[m]=e}else c._refs[m]=v}r[t]=h,i[t]=v}})),l},l.inlineRef=m,l.schema=c;var f=o.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function d(e,t,r,a){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var n=e.fragment.split("/"),i=1;i<n.length;i++){var s=n[i];if(s){if(void 0===(r=r[s=o.unescapeFragment(s)]))break;var l;if(!f[s]&&((l=this._getId(r))&&(t=y(t,l)),r.$ref)){var u=y(t,r.$ref),d=c.call(this,a,u);d&&(r=d.schema,a=d.root,t=d.baseId)}}}return void 0!==r&&r!==a.schema?{schema:r,root:a,baseId:t}:void 0}}var p=o.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function m(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var a=0;a<t.length;a++)if("object"==typeof(r=t[a])&&!e(r))return!1}else for(var n in t){if("$ref"==n)return!1;if("object"==typeof(r=t[n])&&!e(r))return!1}return!0}(e):t?function e(t){var r,a=0;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(r=t[n])&&(a+=e(r)),a==1/0)return 1/0}else for(var o in t){if("$ref"==o)return 1/0;if(p[o])a++;else if("object"==typeof(r=t[o])&&(a+=e(r)+1),a==1/0)return 1/0}return a}(e)<=t:void 0)}function h(e,t){return!1!==t&&(e=g(e)),v(a.parse(e))}function v(e){return a.serialize(e).split("#")[0]+"#"}var _=/#\/?$/;function g(e){return e?e.replace(_,""):""}function y(e,t){return t=g(t),a.resolve(e,t)}},95:function(e,t,r){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var a,n,o;if(Array.isArray(t)){if((a=t.length)!=r.length)return!1;for(n=a;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((a=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=a;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=a;0!=n--;){var i=o[n];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r}},96:function(e,t,r){"use strict";var a=r(94);function n(e,t,r){this.message=r||n.message(e,t),this.missingRef=a.url(e,t),this.missingSchema=a.normalizeId(a.fullPath(this.missingRef))}function o(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:o((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:o(n)},n.message=function(e,t){return"can't resolve reference "+t+" from id "+e}}});
//# sourceMappingURL=StandardSurface.min.js.map