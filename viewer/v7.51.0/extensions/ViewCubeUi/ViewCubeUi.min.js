/*!
 * LMV v7.51.0
 * 
 * Copyright 2021 Autodesk, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 * 
 * Autodesk Forge Viewer Usage Limitations:
 * 
 * The Autodesk Forge viewer can only be used to view files generated by
 * Autodesk Forge services. The Autodesk Forge Viewer JavaScript must be
 * delivered from an Autodesk hosted URL.
 */
Autodesk.Extensions.ViewCubeUi=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=830)}({0:function(e,t){e.exports=THREE},2:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(i).concat([o]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},3:function(e,t,n){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},c=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=s.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),u=null,p=0,h=[],l=n(5);function d(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(b(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(b(r.parts[a],t));i[r.id]={id:r.id,refs:1,parts:s}}}}function m(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function v(e,t){var n=c(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=h[h.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),h.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=c(e.insertAt.before,n);n.insertBefore(t,o)}}function f(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=h.indexOf(e);t>=0&&h.splice(t,1)}function w(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return g(t,e.attrs),v(e,t),t}function g(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function b(e,t){var n,r,o,i;if(t.transform&&e.css){if(!(i="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=i}if(t.singleton){var a=p++;n=u||(u=w(t)),r=A.bind(null,n,a,!1),o=A.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",g(t,e.attrs),v(e,t),t}(t),r=V.bind(null,n,t),o=function(){f(n),n.href&&URL.revokeObjectURL(n.href)}):(n=w(t),r=x.bind(null,n),o=function(){f(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=m(e,t);return d(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var a=n[o];(s=i[a.id]).refs--,r.push(s)}e&&d(m(e,t),t);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete i[s.id]}}}};var M,y=(M=[],function(e,t){return M[e]=t,M.filter(Boolean).join("\n")});function A(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function x(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function V(e,t,n){var r=n.css,o=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(r=l(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},5:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},605:function(e,t,n){var r=n(606);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,o);r.locals&&(e.exports=r.locals)},606:function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".viewcube,.viewcubeWrapper{display:block;position:absolute;outline:none;width:170px;height:170px;right:-1px;top:-1px;opacity:0.7;margin:0;-webkit-transition:opacity 0.2s ease;-moz-transition:opacity 0.2s ease;-ms-transition:opacity 0.2s ease;-o-transition:opacity 0.2s ease;transition:opacity 0.2s ease}.viewcubeWrapper{pointer-events:none}.viewcube{pointer-events:auto}.rewindFrame{background-color:#FFFFFF;position:absolute;height:56px;width:56px;z-index:1002}.dropDownMenu{position:absolute;min-width:220px;margin:0;z-index:1001;background-color:#FFFFFF;font-family:sans-serif;font-size:14px;list-style-type:none;border:solid;border-width:1px;border-color:#979797}.dropDownMenuItem{position:relative;width:calc(100% - 24px);height:21px;padding-left:24px;padding-top:4px;background-color:#FFFFFF;cursor:pointer}.dropDownMenuCheckbox{position:relative;width:calc(100% - 4px);padding-top:4px;height:21px;margin-left:4px;background-color:#FFFFFF;cursor:pointer}.dropDownMenuCheck{padding-top:2px;cursor:pointer}.dropDownMenuCheckText{position:relative;padding-left:2px;margin:0;cursor:pointer}.dropDownMenuItemDisabled{color:#999999;position:relative;width:calc(100% - 5px);height:23px;background-color:#FFFFFF;cursor:pointer}.dropDownMenuItem:hover{background-color:#E7EEF6}.dropDownMenuCheckbox:hover{background-color:#E7EEF6}.textBox{font-size:15px;background-color:#000;opacity:0.6;padding:2px 10px;border-radius:2px;position:fixed;display:none;font-family:Monospace;color:#fff;z-index:1000}#colorCode{position:absolute;left:0px;top:0px}#text,#steeringWheel{position:absolute;left:0px;top:0px;z-index:900}.homeViewWrapper{display:block;outline:none;margin:18px 0px 0px -20px;opacity:0.7;width:24px;height:24px;background-image:url(data:image/png;base64,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);cursor:pointer;pointer-events:auto}.homeViewWrapper:hover{opacity:1}.homeViewWrapper.no-viewcube{position:absolute;right:12px;top:10px;margin:0}.homeViewMenu{display:none;position:absolute;right:10px;top:28px;background-color:#FFFFFF;border:1px solid #979797;z-index:1}.homeViewMenuItem{padding:5px 20px;font-family:sans-serif;font-size:14px;cursor:pointer;z-index:2}.homeViewMenuItem:hover{background-color:#E7EEF6}.homeViewWrapper .homeViewMenuHandle{display:none;position:relative;left:18px;top:18px}\n",""])},830:function(e,t,n){"use strict";n.r(t),n.d(t,"ViewCubeUi",(function(){return x}));var r=n(0),o=Autodesk.Viewing,i=o.Private,a=i.DDSLoader,s=i.ShaderUtils.createShaderMaterial,c=i.WebGLRenderer,u=i.logger,p=o.isMobileDevice,h=o.errorCodeString,l=o.ErrorCodes,d=o.endpoint,m=o.getGlobal,v=o.GlobalManagerMixin,f=function(e){return Math.abs(e-1)<1e-12},w=function(e){return!(!f(e.length())||!f(Math.abs(e.x))&&!f(Math.abs(e.y))&&!f(Math.abs(e.z)))};function g(e){var t=e/2,n=16711680,i=65280,a=255,s=new r.Matrix4,c=[],u=new r.PlaneBufferGeometry(50,50),p=function(e,t){var n=o.getGlobal().document.createElement("canvas");n.width=n.height=128;var i=n.getContext("2d");i.font="128px Arial",i.fillStyle="rgba(255,255,255,1)",i.textAlign="center",i.textBaseline="middle",i.fillText(e,n.width/2,n.height/2);var a=new r.Texture(n);return a.needsUpdate=!0,new r.Mesh(u,new r.MeshBasicMaterial({map:a,side:r.DoubleSide,transparent:!0,color:t,depthWrite:!1,depthTest:!0}))};this.triadScene=new r.Scene,this.triadLabelScene=new r.Scene;var h=new r.BoxGeometry(e,10,10),l=new r.Mesh(h,new r.MeshBasicMaterial({color:n,shading:r.SmoothShading})),d=new r.Mesh(h,new r.MeshBasicMaterial({color:i,shading:r.SmoothShading})),m=new r.Mesh(h,new r.MeshBasicMaterial({color:a,shading:r.SmoothShading}));l.applyMatrix(s.makeTranslation(5,-t,-t)),d.applyMatrix(s.makeRotationZ(Math.PI/2)),d.applyMatrix(s.makeTranslation(-t,5,-t)),m.applyMatrix(s.makeRotationY(Math.PI/2)),m.applyMatrix(s.makeTranslation(-t,-t,5)),this.triadScene.add(l),this.triadScene.add(d),this.triadScene.add(m);var v=p("X",n),g=p("Y",i),b=p("Z",a),M=function(e){var n=-(50+t)/2-20,r=t+50;v.position.set(r,n,n),g.position.set(n,r,n),b.position.set(n,n,r),e&&(v.position.applyQuaternion(e),g.position.applyQuaternion(e),b.position.applyQuaternion(e))};M(),c.push(v),c.push(g),c.push(b),this.triadLabelScene.add(v),this.triadLabelScene.add(g),this.triadLabelScene.add(b),this.orient=function(e,t){if(w(e)&&w(t)&&!(this.up&&this.front&&e.equals(this.up)&&t.equals(this.front))){this.up=e.clone(),this.front=t.clone();var n,o,i,a,s=0,c=0;e.x?(n="x",o="y",i="z",s=2*Math.PI/3):e.y?(n="y",o="z",i="x"):e.z&&(n="z",o="x",i="y",s=-2*Math.PI/3),f(-t[o])?c=Math.PI:t[i]&&(c=-t[i]*e[n]*Math.PI/2),a=f(-e[n])?Math.PI:0;var u=new r.Quaternion,p=new r.Quaternion,h=new r.Vector3(1,1,1);h.normalize(),p.setFromAxisAngle(h,s),u.setFromAxisAngle(e,c),p.multiply(u),u.setFromAxisAngle(t,a),p.multiply(u),M(p),this.triadScene.setRotationFromQuaternion(p)}},this.getSprites=function(){return c}}function b(e,t,n,o,f){var b=this;v.call(this);var M=t,y=t.camera;t.setCube(this);var A=M.center.clone().sub(y.position).normalize(),x=M.sceneFrontDirection.clone().cross(M.sceneUpDirection),V=A.dot(M.sceneUpDirection),C=A.dot(M.sceneFrontDirection),F=A.dot(x);1-Math.abs(V)<1e-5?b.currentFace=V>0?"bottom":"top":1-Math.abs(C)<1e-5?b.currentFace=C>0?"front":"back":1-Math.abs(Math.abs(F))<1e-5?b.currentFace=F>0?"left":"right":b.currentFace="front",b.showTriad=f&&f.showTriad,b.localizeResourcePath=o;var E,P,T,S,I,R,k,L,D,B,O,Y,U,z=["top,front","top right","top,left","top,back","bottom,front","bottom,right","bottom,left","bottom,back","left,front","front,right","right,back","back,left"],X=["front,top,right","back,top,right","front,top,left","back,top,left","front,bottom,right","back,bottom,right","front,bottom,left","back,bottom,left"],N=["Go Home",null,"Orthographic","Perspective","Perspective with Ortho Faces",null,"Set current view as Home","Focus and set as Home","Reset Home",null,"Set current view as Front","Set current view as Top","Reset orientation"],H=[!0,null,!0,!0,!0,null,!0,!0,!0,null,!0,!0,!0],j=[null,null,function(){return!M.orthographicFaces&&!y.isPerspective},function(){return!M.orthographicFaces&&y.isPerspective},function(){return M.orthographicFaces},null,null,null,null,null,null,null,null],G=[];b.pcam=new r.PerspectiveCamera(45,1,1,2e3),b.ocam=new r.OrthographicCamera(-265,265,265,-265,-1e3,1e3),b.ocam.fov=b.pcam.fov,b.ocam.aspect=b.pcam.aspect,b.camera=y.isPerspective?b.pcam:b.ocam,b.camera.position.copy(y.position),b.center=new r.Vector3(0,0,0),b.camera.lookAt(b.center);var q,W,Z,Q,K,_,J,$=[],ee=[],te=[],ne=[],re=[],oe=null,ie=null,ae=null,se=0,ce=0,ue=!0,pe=!1,he=!1,le=!1,de=-1!=navigator.userAgent.search("Chrome"),me=-1!=navigator.platform.search("Win32"),ve=!1,fe=!1,we=null,ge=[];this.width=0,this.height=0,this.animSpeed=500,this.animate=!0,this.compass=!1,this.viewScaleFactorCompass=1.5,this.viewScale=1,this.draggable=!0,this.wantHomeButton=!1,this.wantRollArrows=!0,this.wantContextMenu=!0,this.inactiveOpacity=.5;var be=function(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,w:t.width,h:t.height}},Me=function(e){e.preventDefault(),e.stopPropagation();var t=b.getDocument();he=t.pointerLockElement===n||t.mozPointerLockElement===n||t.webkitPointerLockElement===n},ye=function(){b.renderCompass?(b.rollMesh.position.set(se+30,se+30,0),b.rollLeftMesh.position.set(se+30,1.5*se,.1),b.rollRightMesh.position.set(1.5*se,se+30,.1),b.contextMesh.position.set(1.6*se,-1.6*se,0)):(b.rollMesh.position.set(.5*se+20,.5*se+20,0),b.rollLeftMesh.position.set(.5*se+20,se+20,.1),b.rollRightMesh.position.set(se+20,.5*se+20,.1),b.contextMesh.position.set(se,-se,0))},Ae=function(){M.navApi.isActionEnabled("orbit")&&(n.style.opacity="1.0",fe=!1),requestAnimationFrame(b.render)},xe=function(e){if(fe||M.viewCubeMenuOpen||!M.navApi.isActionEnabled("orbit"))M.navApi.isActionEnabled("orbit")&&(n.style.opacity=1);else{var t=Math.max(4*Math.abs((e.clientX-J.x)/J.w-.5)-1,0),r=Math.max(4*Math.abs((e.clientY-J.y)/J.h-.5)-1,0),o=Math.max(0,Math.min(Math.sqrt(t*t+r*r),1));n.style.opacity=1-o*(1-b.inactiveOpacity)}},Ve=function(){M.viewCubeMenuOpen||(n.style.opacity=b.inactiveOpacity,fe=!0,requestAnimationFrame(b.render))},Ce=function(e){var t=new Image,n=b.getWindow(),o=d.getUseCredentials()&&(-1===e.indexOf("://")||-1!==e.indexOf(n.location.host));t.crossOrigin=o?"use-credentials":"anonymous";var i=new r.Texture(t);return t.onload=function(){i.needsUpdate=!0,++ce>=11&&requestAnimationFrame(b.render)},t.src=e,i},Fe=function(){var e,t,n=[],r=[];for(n[0]=Ye(0,0),n[1]=Ye(0,Math.PI/2),n[2]=Ye(0,-Math.PI/2),n[3]=Ye(0,Math.PI),n[4]=Ye(Math.PI/2,0),n[5]=Ye(Math.PI/2,Math.PI/2),n[6]=Ye(Math.PI/2,-Math.PI/2),n[7]=Ye(Math.PI/2,Math.PI),r[0]=Oe(0,0,0),r[1]=Oe(0,Math.PI/2,0),r[2]=Oe(0,-Math.PI/2,0),r[3]=Oe(0,Math.PI,0),r[4]=Oe(Math.PI/2,0,0),r[5]=Oe(Math.PI/2,Math.PI/2,0),r[6]=Oe(Math.PI/2,-Math.PI/2,0),r[7]=Oe(Math.PI/2,Math.PI,0),r[8]=Oe(0,0,Math.PI/2),r[9]=Oe(0,0,-Math.PI/2),r[10]=Oe(-Math.PI/2,0,-Math.PI/2),r[11]=Oe(-Math.PI,0,-Math.PI/2),$.push(Be(0,0)),$[0].name="front",te.push($[0]),re.push($[0]),T.add($[0]),$.push(Be(0,Math.PI/2)),$[1].name="right",te.push($[1]),re.push($[1]),T.add($[1]),$.push(Be(0,Math.PI)),$[2].name="back",te.push($[2]),re.push($[2]),T.add($[2]),$.push(Be(0,-Math.PI/2)),$[3].name="left",te.push($[3]),re.push($[3]),T.add($[3]),$.push(Be(Math.PI/2,0)),$[4].name="bottom",te.push($[4]),re.push($[4]),T.add($[4]),$.push(Be(-Math.PI/2,0)),$[5].name="top",te.push($[5]),re.push($[5]),T.add($[5]),e=$.length,t=0;t<n.length;t++)$.push(n[t]),$[e+t].name=X[t],T.add($[e+t]),te.push($[e+t]),re.push($[e+t]);for(e=$.length,t=0;t<r.length;t++)$.push(r[t]),$[e+t].name=z[t],T.add($[e+t]),te.push($[e+t]),re.push($[e+t])},Ee=function(e,t,n){var o,i=new r.Vector3;if("PerspectiveCamera"===t.type)i.copy(e),i.unproject(t),o=new r.Raycaster(t.position,i.sub(t.position).normalize());else{var a=new r.Vector3;a.copy(e),a.unproject(t),i.copy(t.position).negate().normalize(),o=new r.Raycaster(a,i)}return o.intersectObjects(n)},Pe=function(e,t){var n=e.clientX-t.x,o=e.clientY-t.y;return n=n/t.w*2-1,o=(t.h-o)/t.h*2-1,new r.Vector3(n,o,.5)};function Te(e,t){var n={};return 0===e.type.indexOf("touch")?e.touches.length>0?(n.clientX=e.touches[0].clientX,n.clientY=e.touches[0].clientY,n.pageX=e.touches[0].pageX,n.pageY=e.touches[0].pageY,n.screenX=e.touches[0].screenX,n.screenY=e.touches[0].screenY,n.movementX=n.screenX-t.prevX,n.movementY=n.screenY-t.prevY,n.which=M.navApi.getUseLeftHandedInput()?3:1):n=t.prevCoords:(n.clientX=e.clientX,n.clientY=e.clientY,n.pageX=e.pageX,n.pageY=e.pageY,n.screenX=e.screenX,n.screenY=e.screenY,n.which=e.which,pe?(n.movementX=e.movementX||e.mozMovementX||e.webkitMovementX||0,n.movementY=e.movementY||e.mozMovementY||e.webkitMovementY||0):(n.movementX=n.screenX-t.prevX,n.movementY=n.screenY-t.prevY)),t.prevX=n.screenX,t.prevY=n.screenY,t.prevCoords=n,n}var Se=function(e){if(e.preventDefault(),e.stopPropagation(),M.navApi.isActionEnabled("orbit")&&!M.currentlyAnimating){var t,r=Te(e,b);J=be(n),n.removeEventListener("mousemove",Le,!1),b.addDocumentEventListener("mouseup",ke,!1),b.addDocumentEventListener("touchend",ke,!1),M.navApi.getUsePivotAlways()||(M.pivot.copy(M.center),M.navApi.setPivotPoint(M.center),M.navApi.setPivotSetFlag(!1)),M.startInteraction(r.pageX,r.pageY);var o=M.navApi.getUseLeftHandedInput()?1:3;r.which!==o&&(b.animSpeed<=0?u.error("animSpeed cannot be 0 or less, use ViewCube.animate flag to turn on and off animation",h(l.VIEWER_INTERNAL_ERROR)):(t=Pe(r,J),Ee(t,b.camera,re).length>0&&(Xe(),b.draggable&&(b.addDocumentEventListener("mousemove",Ie,!1),b.addDocumentEventListener("touchmove",Ie,!1),pe&&(n.requestPointerLock(),le=de&&me)))))}},Ie=function e(t){if(t.preventDefault(),t.stopPropagation(),b.animSpeed<=0)return b.removeDocumentEventListener("mousemove",e,!1),b.removeDocumentEventListener("touchmove",e,!1),void u.error("animSpeed cannot be 0 or less",h(l.VIEWER_INTERNAL_ERROR));if(!M.currentlyAnimating){var n=Te(t,b);pe&&le&&(le=!1,n.movementX=n.movementY=0),he&&(n.movementX>300||n.movementY>300)&&(n.movementX=0,n.movementY=0),n.movementX!==n.movementY||0!==n.movementX?(ue=!1,ve=!0,M.showPivot(!0),M.currentCursor=new r.Vector2(n.pageX,n.pageY),M.orbit(M.currentCursor,M.startCursor,new r.Vector3(-n.movementX,n.movementY,0),M.startState),b.camera.lookAt(b.center),requestAnimationFrame(b.render)):M.currentlyAnimating=!1}},Re=function(e){(e||(b.removeDocumentEventListener("mouseup",ke,!1),b.removeDocumentEventListener("touchend",ke,!1)),b.removeDocumentEventListener("mousemove",Ie,!1),b.removeDocumentEventListener("touchmove",Ie,!1),n.addEventListener("mousemove",Le,!1),he)&&b.getDocument().exitPointerLock()};this.registerOnViewTypeChangedCb=function(e){e instanceof Function&&(we=e)},this.setViewType=function(e){switch(e){case i.VIEW_TYPES.ORTHOGRAPHIC:b.camera=b.ocam;break;case i.VIEW_TYPES.PERSPECTIVE:b.camera=b.pcam;break;case i.VIEW_TYPES.PERSPECTIVE_ORTHO_FACES:b.camera=ue?b.ocam:b.pcam;break;default:return}we&&we(e)};var ke=function(e){var t,r,o;if(e.preventDefault(),e.stopPropagation(),M.currentlyAnimating||ve)return M.endInteraction(),M.showPivot(!1),ve=!1,void Re(!1);var i=Te(e,b);if(M.viewCubeMenuOpen){var a=i.clientX-J.x,s=i.clientY-J.y;if(M.menuOrigin.x<=a&&a<=M.menuOrigin.x+M.menuSize.x&&M.menuOrigin.y<=s&&s<=M.menuOrigin.y+M.menuSize.y){var c=Math.floor((s-5-M.menuOrigin.y)/25),p=function(e){u.track({name:"navigation/"+e,aggregate:"count"})};switch(c){case 0:p("home"),M.goHome();break;case 1:p("setortho");case 2:p("setpersp");case 3:b.setViewType(c);break;case 4:p("sethome"),M.setCurrentViewAsHome(!1);break;case 5:p("focushome"),M.setCurrentViewAsHome(!0);break;case 6:p("resethome"),M.resetHome();break;case 7:p("setfront"),M.setCurrentViewAsFront();break;case 8:p("settop"),M.setCurrentViewAsTop();break;case 9:M.resetOrientation()}}return M.viewCubeMenuOpen=!1,M.removeDropdownMenu(n),(i.clientX<J.x||i.clientX>J.w+J.x||i.clientY<J.y||i.clientY>J.h+J.y)&&Ve(),b.mouseMoveSave&&b.processMouseMove(b.mouseMoveSave),M.endInteraction(),void Re(!1)}var h=M.navApi.getUseLeftHandedInput()?1:3;if(i.which===h)return M.viewCubeMenuOpen=!0,M.drawDropdownMenu(N,H,j,i.clientX,i.clientY,n,J),void Re(!0);var l=Pe(i,J);if(t=Ee(l,b.camera,re),r=Ee(l,L,ee),o=Ee(l,L,ne),r.length>0&&ue){for(var d=["top","bottom","right","left","front","back"],m=M.getOrientation(),v={front:{up:[0,1,2,3],right:[2,3,1,0],down:[1,0,3,2],left:[3,2,0,1]},right:{up:[0,1,5,4],right:[5,4,1,0],down:[1,0,4,5],left:[4,5,0,1]},left:{up:[0,1,4,5],right:[4,5,1,0],down:[1,0,5,4],left:[5,4,0,1]},back:{up:[0,1,3,2],right:[3,2,1,0],down:[1,0,2,3],left:[2,3,0,1]},top:{up:[5,4,2,3],right:[2,3,4,5],down:[4,5,3,2],left:[3,2,5,4]},bottom:{up:[4,5,2,3],right:[2,3,5,4],down:[5,4,3,2],left:[3,2,4,5]}}[b.currentFace][m],f=0;f<4;f++)if(r[0].object===ee[f]){x=d[v[f]];break}M.calculateCubeTransform(x),b.currentFace=x,M.elapsedTime=0,M.sphericallyInterpolateTransition()}if(o.length>0){if(M.elapsedTime=0,b.wantHomeButton&&o[0].object===ne[K])return M.goHome(),void Re(!1);if(b.wantContextMenu&&o[0].object===ne[_])return M.viewCubeMenuOpen=!0,M.drawDropdownMenu(N,H,j,i.clientX,i.clientY,n,J),void Re(!0);if(b.wantRollArrows&&ue&&(o[0].object===ne[W]||o[0].object===ne[Z])){var w=o[0].object===ne[Z],g={center:M.center.clone(),position:y.position.clone(),pivot:y.pivot.clone(),fov:y.fov,worldUp:M.sceneUpDirection.clone(),isOrtho:!1===y.isPerspective},A=M.center.clone().sub(y.position).normalize();w?g.up=y.up.clone().cross(A):(g.up=y.up.clone().multiplyScalar(-1),g.up.cross(A)),g.up.normalize(),M.goToView(g)}}if(t.length>0){var x=t[0].object.name;b.mouseMoveSave=e,b.cubeRotateTo(x)}Re(!1)};this.cubeRotateTo=function(e){b.currentFace=e,M.orthographicFaces&&-1!==b.currentFace.indexOf(",")&&M.setCameraOrtho(!1),M.calculateCubeTransform(b.currentFace),M.elapsedTime=0,M.sphericallyInterpolateTransition((function(){b.mouseMoveSave&&b.processMouseMove(b.mouseMoveSave)}))},this.processMouseMove=function(e){var t,n,r;if(M.viewCubeMenuOpen||M.currentlyAnimating)b.mouseMoveSave=e;else{b.mouseMoveSave=null;var o=Te(e,b),i=Pe(o,J);if(t=Ee(i,b.camera,te),n=Ee(i,L,ee),r=Ee(i,L,ne),oe&&!ve&&(oe.material.color.setHex(12040636),oe=null,requestAnimationFrame(b.render)),n.length>0&&!ve){oe=n[0].object;for(var a=q.children.length;--a>=0;)if(oe===ee[a]){(oe=q.children[a]).material.color.setHex(45055);break}requestAnimationFrame(b.render)}ie&&!ve&&(ie.material.opacity=0,ie=null,requestAnimationFrame(b.render)),t.length>0&&!ve&&((ie=t[0].object).material.opacity=.3,requestAnimationFrame(b.render)),r.length>0&&!ve?ae!==r[0].object&&(b.wantHomeButton&&r[0].object===ne[K]?(ae=r[0].object,ne[K].material.map=ge[0]):b.wantRollArrows&&r[0].object===ne[W]?(ae=r[0].object,ne[Q].material.map=ge[1]):b.wantRollArrows&&r[0].object===ne[Z]?(ae=r[0].object,ne[Q].material.map=ge[2]):b.wantContextMenu&&r[0].object===ne[_]?(ae=r[0].object,ne[_].material.map=ge[6]):b.wantHomeButton&&ae===ne[K]?(ae=null,ne[K].material.map=ge[3]):!b.wantRollArrows||ae!==ne[W]&&ae!==ne[Z]&&ae!==ne[Q]?b.wantContextMenu&&ae===ne[_]&&(ae=null,ne[_].material.map=ge[5]):(ae=null,ne[Q].material.map=ge[4]),requestAnimationFrame(b.render)):null===ae||ve||(b.wantHomeButton&&ae===ne[K]?(ae=null,ne[K].material.map=ge[3]):!b.wantRollArrows||ae!==ne[W]&&ae!==ne[Z]&&ae!==ne[Q]?b.wantContextMenu&&ae===ne[_]&&(ae=null,ne[_].material.map=ge[5]):(ae=null,ne[Q].material.map=ge[4]),requestAnimationFrame(b.render))}};var Le=function(e){M.navApi.isActionEnabled("orbit")&&b.processMouseMove(e)},De=function(){J=be(n),b.width=n.offsetWidth,b.height=n.offsetHeight,b.pcam.aspect=b.ocam.aspect=b.width/b.height,b.pcam.updateProjectionMatrix(),b.ocam.updateProjectionMatrix(),b.camera.topFov=b.camera.bottomFov=b.camera.fov/2,b.camera.leftFov=b.camera.rightFov=b.camera.aspect*b.camera.fov/2,b.pcam.aspect=b.ocam.aspect=b.camera.aspect,b.pcam.topFov=b.ocam.topFov=b.camera.topFov,b.pcam.bottomFov=b.ocam.bottomFov=b.camera.bottomFov,b.pcam.leftFov=b.ocam.leftFov=b.camera.leftFov,b.pcam.rightFov=b.ocam.rightFov=b.camera.rightFov,b.renderer.setSize(b.width,b.height),requestAnimationFrame(b.render)},Be=function(e,t){var n,o=Math.floor(.45*se/2)||45,i=Math.floor(.6*se/2)||60,a=o+i,s=new r.Geometry,c=new r.Vector3(0,0,0),u=new r.Vector3(i,-i,a),p=new r.Vector3(i,i,a),h=new r.Vector3(-i,i,a),l=new r.Vector3(-i,-i,a);return s.vertices.push(c),s.vertices.push(u),s.vertices.push(p),s.vertices.push(h),s.vertices.push(l),s.faces.push(new r.Face3(1,2,3)),s.faces.push(new r.Face3(1,3,4)),s.applyMatrix((new r.Matrix4).makeRotationX(e)),s.applyMatrix((new r.Matrix4).makeRotationY(t)),s.computeFaceNormals(),s.computeVertexNormals(),n=new r.MeshBasicMaterial({overdraw:!0,opacity:0,color:45055,transparent:!0}),new r.Mesh(s,n)},Oe=function(e,t,n){var o,i=Math.floor(.45*se/2)||45,a=Math.floor(.6*se/2)||60,s=i+a,c=new r.Geometry,u=new r.Vector3(a,s,s),p=new r.Vector3(-a,s,s),h=new r.Vector3(-a,a,s),l=new r.Vector3(a,a,s),d=new r.Vector3(a,s,a),m=new r.Vector3(-a,s,a),v=new r.Vector3(-a,s,s),f=new r.Vector3(a,s,s);return c.vertices.push(u),c.vertices.push(p),c.vertices.push(h),c.vertices.push(l),c.vertices.push(d),c.vertices.push(m),c.vertices.push(v),c.vertices.push(f),c.faces.push(new r.Face3(0,1,2)),c.faces.push(new r.Face3(0,2,3)),c.faces.push(new r.Face3(4,5,6)),c.faces.push(new r.Face3(4,6,7)),c.applyMatrix((new r.Matrix4).makeRotationX(e)),c.applyMatrix((new r.Matrix4).makeRotationY(t)),c.applyMatrix((new r.Matrix4).makeRotationZ(n)),c.computeFaceNormals(),c.computeVertexNormals(),o=new r.MeshBasicMaterial({overdraw:!0,opacity:0,color:45055,transparent:!0}),new r.Mesh(c,o)},Ye=function(e,t){var n,o=Math.floor(.45*se/2)||45,i=Math.floor(.6*se/2)||60,a=o+i,s=new r.Geometry,c=new r.Vector3(a,a,a),u=new r.Vector3(i,a,a),p=new r.Vector3(i,i,a),h=new r.Vector3(a,i,a),l=new r.Vector3(a,a,i),d=new r.Vector3(a,a,a),m=new r.Vector3(a,i,a),v=new r.Vector3(a,i,i),f=new r.Vector3(a,a,a),w=new r.Vector3(a,a,i),g=new r.Vector3(i,a,i),b=new r.Vector3(i,a,a);return s.vertices.push(c),s.vertices.push(u),s.vertices.push(p),s.vertices.push(h),s.vertices.push(l),s.vertices.push(d),s.vertices.push(m),s.vertices.push(v),s.vertices.push(f),s.vertices.push(w),s.vertices.push(g),s.vertices.push(b),s.faces.push(new r.Face3(0,1,2)),s.faces.push(new r.Face3(0,2,3)),s.faces.push(new r.Face3(4,5,6)),s.faces.push(new r.Face3(4,6,7)),s.faces.push(new r.Face3(8,9,10)),s.faces.push(new r.Face3(8,10,11)),s.applyMatrix((new r.Matrix4).makeRotationX(e)),s.applyMatrix((new r.Matrix4).makeRotationY(t)),s.computeFaceNormals(),s.computeVertexNormals(),n=new r.MeshBasicMaterial({overdraw:!0,opacity:0,color:45055,transparent:!0}),new r.Mesh(s,n)},Ue=function(e){var t=M.cubeFront.clone(),n=M.sceneUpDirection.clone(),o=t.clone().cross(n);n.copy(o).cross(t),t.normalize(),n.normalize(),o.normalize();var i=new r.Vector3(t.x,n.x,o.x).multiplyScalar(e.x);return i.add(new r.Vector3(t.y,n.y,o.y).multiplyScalar(e.y)),i.add(new r.Vector3(t.z,n.z,o.z).multiplyScalar(e.z)),i};this.render=function(){b.camera=y.isPerspective?b.pcam:b.ocam;var e=b.compass?b.viewScaleFactorCompass*b.viewScale:b.viewScale,t=M.center.clone().sub(y.position).normalize(),n=y.up.normalize(),o=new r.Matrix4;t=Ue(t),n=Ue(n),b.camera.position.copy(t),b.camera.position.multiplyScalar(-e/b.camera.position.length()),b.camera.up=n.normalize(),b.camera.lookAt(b.center),ze();var i=b.renderTriad&&w(M.sceneUpDirection)&&w(M.sceneFrontDirection),a=b.renderer;if(a){for(var s=0;s<G.length;s++)o.lookAt(b.camera.position,G[s].position,b.camera.up),G[s].setRotationFromMatrix(o);a.clear(),a.render(E,b.camera),a.render(P,b.camera),a.render(S,b.camera),i&&(I.orient(M.sceneUpDirection,M.sceneFrontDirection.clone().multiplyScalar(-1)),a.render(I.triadScene,b.camera),a.render(I.triadLabelScene,b.camera)),a.render(T,b.camera),b.renderCompass&&a.render(k,b.camera),a.render(R,L)}},this.getScreenShot=function(e){return new Promise((function(e,t){var n=b.renderer;if(!n)return t("No renderer");var r=b.getDocument().createElement("canvas");r.width=b.width,r.height=b.height;var o=r.getContext("2d");o.fillStyle="#FFFFFF",o.fillRect(0,0,b.width,b.height),n.domElement.toBlob((function(t){var n=new Image,i=b.getWindow();n.src=i.URL.createObjectURL(t),n.onload=function(){o.drawImage(n,0,0,b.width,b.height),i.URL.revokeObjectURL(n.src),r.toBlob((function(t){e(t)}),"image/png")}}),"image/png")}))};var ze=function(){!(ue=M.isFaceView())||fe||M.currentlyAnimating?Xe():Ne(),fe?He():je(),fe?Ge():qe()},Xe=function(){R.remove(q),ne[Q].material.opacity=0,ne[_].material.opacity=0},Ne=function(){R.add(q);var e=b.wantRollArrows?1:0;ne[Q].material.opacity=e,ne[_].material.opacity=e},He=function(){U.material.opacity=p()?1:0},je=function(){U.material.opacity=b.wantContextMenu?1:0},Ge=function(){O.material.opacity=0},qe=function(){O.material.opacity=b.wantHomeButton?1:0};this.refreshCube=function(){De()},this.setSize=function(e,t){if(b.width=e,b.height=t,n.children.length>1)for(var r=1;r<n.children.length;r++)n.children[r].style.bottom=(b.height/5).toString()+"px";De()},this.useTransparency=function(e){fe=e,e?(n.onmouseover=Ae,n.onmousemove=xe,n.onmouseout=Ve,Ve()):(n.onmouseover=null,n.onmouseout=null,n.onmousemove=null,n.style.opacity="1.0")},this.showTriad=function(e){e!==b.renderTriad&&(b.renderTriad=e,requestAnimationFrame(b.render))},this.showCompass=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.initCompass(),b.renderCompass!==e&&(b.prevRenderCompass=b.renderCompass,b.renderCompass=e,ye(),requestAnimationFrame(b.render))},this.setCompassRotation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.initCompass();var t=e-b.northAngle;0!==t&&(b.northAngle=e,b.compassPointerMeshUp.rotateZ(t),b.compassPointerMeshDown.rotateZ(t),requestAnimationFrame(b.render))},this.initCompass=function(){if(!b.hasCompass){b.hasCompass=!0,b.northAngle=0;var e=Autodesk.Viewing.Private.getResourceUrl;k=new r.Scene;var t=2.9*se,n=new r.PlaneBufferGeometry(t,t,2,2),o=new r.MeshBasicMaterial({color:0,side:r.DoubleSide,map:Ce(e("res/textures/VCcompass-pointer-b.png")),shading:r.FlatShading,transparent:!0}),i=new r.MeshBasicMaterial({color:0,side:r.DoubleSide,map:Ce(e("res/textures/VCcompass-base.png")),shading:r.FlatShading,transparent:!0}),a=new r.Mesh(n,o),s=new r.Mesh(n,o),c=new r.Mesh(n,i);b.compassPointerMeshUp=a,b.compassPointerMeshDown=s;var u=-Math.PI/2;c.rotateX(u),a.rotateX(u),s.rotateX(u);var p=.5*-se-(Math.floor(.25*se/2)||25);c.translateZ(p),a.translateZ(p+.1),s.translateZ(p-.1),k.add(c),k.add(a),k.add(s),requestAnimationFrame(b.render)}},this.showControls=function(e){e||void 0===e?Ae():Ve()},this.dtor=function(){this.renderer=null,we=null},this.refreshTexture=function(e){var t=Autodesk.Viewing.Private.getResourceUrl,n=this.localizeResourcePath||"res/textures/",o=(new a).load(t(n+"VCcrossRGBA8small.dds"),e);o.minFilter=o.maxFilter=r.LinearFilter,this.texture&&this.texture.dispose(),this.texture=o;var i=this.material;if(!i){var c=r.ShaderLib.cube;(i=s(c)).depthWrite=!1,this.material=i}return i.uniforms.tCube.value=o,i},this.localize=function(){var e=this,t=m();this.localizeResourcePath=t.LOCALIZATION_REL_PATH,this.refreshTexture((function(){requestAnimationFrame(e.render)}))},function(){var e=n.getBoundingClientRect();b.width=e.width,b.height=e.height,J=be(n),(L=new r.PerspectiveCamera(70,b.height/b.width,1,1e4)).position.set(0,0,500),E=new r.Scene,P=new r.Scene,T=new r.Scene,S=new r.Scene,R=new r.Scene,ue=!0,se=160,b.viewScale=4*se;var t=b.refreshTexture(),o=r.LinearFilter,i=Autodesk.Viewing.Private.getResourceUrl,a="res/textures/",s=new r.BoxGeometry(se,se,se,4,4,4),p=new r.BoxGeometry(se+1,se+1,se+1,4,4,4);(D=new r.Mesh(s,t)).position.set(0,0,0),P.add(D);var h=Ce(i(a+"VCedge1.png"));h.minFilter=h.maxFilter=o,(B=new r.Mesh(p,new r.MeshBasicMaterial({map:h,overdraw:!1,transparent:!0,shading:r.SmoothShading}))).position.set(0,0,0),S.add(B),I=new g(se+20),Array.prototype.push.apply(G,I.getSprites());var l=se+5,d=new r.Geometry,m=new r.Vector3(-30,0,0),v=new r.Vector3(30,0,0),f=new r.Vector3(0,-30,0);d.vertices.push(m),d.vertices.push(v),d.vertices.push(f),d.faces.push(new r.Face3(1,0,2)),d.computeFaceNormals();var w=new r.MeshBasicMaterial({overdraw:!0,color:12040636,depthTest:!1,depthWrite:!1,transparent:!1,opacity:1,shading:r.FlatShading}),y=new r.MeshBasicMaterial({overdraw:!0,color:12040636,depthTest:!1,depthWrite:!1,transparent:!1,opacity:1,shading:r.FlatShading}),A=new r.MeshBasicMaterial({overdraw:!0,color:12040636,depthTest:!1,depthWrite:!1,transparent:!1,opacity:1,shading:r.FlatShading}),x=new r.MeshBasicMaterial({overdraw:!0,color:12040636,depthTest:!1,depthWrite:!1,transparent:!1,opacity:1,shading:r.FlatShading}),V=new r.PlaneBufferGeometry(.5*se,.3*se,2,2),C=new r.MeshBasicMaterial({transparent:!0,opacity:0}),F=new r.Mesh(d,w),k=new r.Mesh(V,C);F.position.set(0,l,0),k.position.set(0,.9*l,.1);var z=new r.Mesh(d,y),X=new r.Mesh(V,C);z.position.set(0,-l,0),X.position.set(0,.9*-l,.1),z.rotation.z+=Math.PI,X.rotation.z+=Math.PI;var N=new r.Mesh(d,A),H=new r.Mesh(V,C);N.position.set(l,0,0),H.position.set(.9*l,0,.1),N.rotation.z-=Math.PI/2,H.rotation.z-=Math.PI/2;var j=new r.Mesh(d,x),$=new r.Mesh(V,C);j.position.set(-l,0,0),$.position.set(.9*-l,0,.1),j.rotation.z+=Math.PI/2,$.rotation.z+=Math.PI/2,(q=new r.Object3D).position.set(0,0,0),q.add(F),q.add(z),q.add(N),q.add(j),R.add(k),R.add(X),R.add(H),R.add($),R.add(q),ee.push(k),ee.push(X),ee.push(H),ee.push($);var te=new r.PlaneBufferGeometry(se/3,se/3,2,2),re=new r.MeshBasicMaterial({map:Ce(i(a+"VChome.png")),transparent:!0,shading:r.FlatShading});(O=new r.Mesh(te,re)).position.set(-se,se,0),K=ne.length,R.add(O),ne.push(O);var oe=new r.PlaneBufferGeometry(1.5*se,1.5*se,2,2),ie=new r.MeshBasicMaterial({map:Ce(i(a+"VCarrows.png")),shading:r.FlatShading,depthTest:!1,depthWrite:!1,transparent:!0}),ae=new r.Mesh(oe,ie);b.rollMesh=ae;var ce=new r.PlaneBufferGeometry(.6*se,.45*se,2,2),he=new r.MeshBasicMaterial({transparent:!0,opacity:0}),le=new r.Mesh(ce,he);b.rollLeftMesh=le;var de=new r.PlaneBufferGeometry(.45*se,.6*se,2,2),me=new r.MeshBasicMaterial({transparent:!0,opacity:0}),ve=new r.Mesh(de,me);b.rollRightMesh=ve,R.add(ae),R.add(le),R.add(ve),W=ne.length,ne.push(le),Z=ne.length,ne.push(ve),Q=ne.length,ne.push(ae);var fe=new r.PlaneBufferGeometry(se/2.3,se/2.3,2,2),we=new r.MeshBasicMaterial({map:Ce(i(a+"VCcontext.png")),transparent:!0,depthTest:!1,depthWrite:!1,shading:r.FlatShading});U=new r.Mesh(fe,we),b.contextMesh=U,_=ne.length,R.add(U),ne.push(U),ye();var Ae=new r.Geometry;Ae.vertices.push(new r.Vector3(0,0,0));var xe,Ve=Math.floor(.2*se/2)||20;if(Ae.vertices.push(new r.Vector3(-se/2,-se/2-Ve,-se/2)),Ae.vertices.push(new r.Vector3(se/2,-se/2-Ve,-se/2)),Ae.vertices.push(new r.Vector3(se/2,-se/2-Ve,se/2)),Ae.vertices.push(new r.Vector3(-se/2,-se/2-Ve,se/2)),Ae.faces.push(new r.Face3(4,3,2)),Ae.faces.push(new r.Face3(4,2,1)),xe=new r.MeshBasicMaterial({color:0,transparent:!0,opacity:.5}),Y=new r.Mesh(Ae,xe),E.add(Y),Fe(),"CANVAS"===M.renderer.toUpperCase()?b.renderer=new r.CanvasRenderer:"WEBGL"===M.renderer.toUpperCase()?(b.renderer=new c({alpha:!0,antialias:!1}),b.renderer.name="ViewCubeRenderer"):(u.warn("Incorrect use of Autocam.renderer property"),b.renderer=new r.CanvasRenderer),b.useTransparency(!0),b.setSize(b.width,b.height),b.camera.topFov=b.camera.bottomFov=b.camera.fov/2,b.camera.leftFov=b.camera.rightFov=b.camera.aspect*b.camera.fov/2,b.pcam.topFov=b.ocam.topFov=b.camera.topFov,b.pcam.bottomFov=b.ocam.bottomFov=b.camera.bottomFov,b.pcam.leftFov=b.ocam.leftFov=b.camera.leftFov,b.pcam.rightFov=b.ocam.rightFov=b.camera.rightFov,b.renderer.autoClear=!1,b.renderer.setSize(b.width,b.height),b.renderer.sortObjects=!1,n.appendChild(b.renderer.domElement),n.addEventListener("touchstart",Se,!1),n.addEventListener("mousedown",Se,!1),n.addEventListener("mousemove",Le,!1),pe=!1){var Ee=b.getDocument();Ee.exitPointerLock=Ee.exitPointerLock||Ee.mozExitPointerLock||Ee.webkitExitPointerLock,n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,b.addDocumentEventListener("pointerlockchange",Me,!1),b.addDocumentEventListener("mozpointerlockchange",Me,!1),b.addDocumentEventListener("webkitpointerlockchange",Me,!1)}ge.push(Ce(i(a+"VChomeS.png"))),ge.push(Ce(i(a+"VCarrowsS0.png"))),ge.push(Ce(i(a+"VCarrowsS1.png"))),ge.push(Ce(i(a+"VChome.png"))),ge.push(Ce(i(a+"VCarrows.png"))),ge.push(Ce(i(a+"VCcontext.png"))),ge.push(Ce(i(a+"VCcontextS.png")))}()}i.ViewCube=b;n(605);var M=Autodesk.Viewing,y=Autodesk.Viewing.Private,A=M.getGlobal();function x(e,t){M.Extension.call(this,e,t),this.container=null,this.cube=null,this.viewcube=null,this.homeViewContainer=null,this._created=!1,this._initTriadVisibility=!1,this.refreshCube=this.refreshCube.bind(this),this.displayViewCube=this.displayViewCube.bind(this),this.setViewType=this.setViewType.bind(this),this._updateView=this._updateView.bind(this),this._onModelAdded=this._onModelAdded.bind(this)}x.prototype=Object.create(Autodesk.Viewing.Extension.prototype),x.prototype.constructor=x,Object.assign(x.prototype,{load:function(){var e=this;if(this.create(),this._displayViewCube(this.viewer.impl.is2d),this.localize(),this.viewer.dispatchEvent({type:M.VIEW_CUBE_CREATED_EVENT}),this.viewer.addEventListener(M.VIEWER_RESIZE_EVENT,this.refreshCube),this.viewer.prefs.addListeners(y.Prefs3D.VIEW_CUBE,this.displayViewCube),this.viewer.prefs.addListeners(y.Prefs3D.VIEW_TYPE,this.setViewType),this.viewer.model){var t=this.viewer.getVisibleModels().filter((function(t){return!!e.viewer.impl.is2d===t.is2d()}));this._onModelAdded({model:t[0]})}return this.viewer.addEventListener(M.MODEL_ADDED_EVENT,this._onModelAdded),this._setDefaultView(),!0},unload:function(){return this.viewer.prefs.removeListeners(y.Prefs3D.VIEW_CUBE,this.displayViewCube),this.viewer.prefs.removeListeners(y.Prefs3D.VIEW_TYPE,this.setViewType),this.viewer.removeEventListener(M.VIEWER_RESIZE_EVENT,this.refreshCube),this.viewer.removeEventListener(M.MODEL_ADDED_EVENT,this._onModelAdded),this.container&&(this.viewer.container.removeChild(this.container),this.viewcube=null),this.cube&&(this.cube.dtor(),this.cube=null),this.homeViewContainer=null,this.hideHomeViewMenu=null,this.viewer=null,!0},create:function(){this._created||(this.initContainer(),this.initHomeButton(),this._created=!0)},initContainer:function(){var e=this.getDocument();this.container=e.createElement("div"),this.container.className="viewcubeWrapper",this.viewer.container.appendChild(this.container)},initHomeButton:function(){if(!this.homeViewContainer){var e=this.getDocument().createElement("div");e.className="homeViewWrapper",this.container.appendChild(e),this.homeViewContainer=e;var t=this;e.addEventListener("click",(function(){t.viewer.navigation.setRequestHomeView(!0)}))}},setVisible:function(e){this.container.style.display=e?"block":"none"},_setDefaultView:function(){this.viewer.impl.is2d||this.viewer.impl.getModelCamera(this.viewer.model)||this.viewer.prefs.dispatchEvent(y.Prefs3D.VIEW_TYPE)},_updateView:function(e){this.viewer.impl.is2d||(this.viewer.prefs.set(y.Prefs3D.VIEW_TYPE,e)||e!==this.viewer.autocam.getViewType()&&this.viewer.prefs.dispatchEvent(y.Prefs3D.VIEW_TYPE))},setViewType:function(e){!this.viewer.impl.is2d&&this.cube&&this.cube.setViewType(e)},showTriad:function(e){this.cube?this.cube.showTriad(e):this._initTriadVisibility=e},setViewCube:function(e){this.cube&&this.cube.cubeRotateTo(e)},displayHomeButton:function(e){this.homeViewContainer&&(this.homeViewContainer.style.display=e?"":"none")},displayViewCube:function(e,t){if(t&&this.viewer.prefs.set(y.Prefs3D.VIEW_CUBE,e),!e||this.cube||this.viewer.impl.is2d){if(!this.cube)return void this._positionHomeButton()}else{var n=this.getDocument();this.viewcube=n.createElement("div"),this.viewcube.className="viewcube",this.container.appendChild(this.viewcube),this.cube=new b("cube",this.viewer.autocam,this.viewcube,A.LOCALIZATION_REL_PATH),this.cube.registerOnViewTypeChangedCb(this._updateView),this.cube.setGlobalManager(this.globalManager),this.container.appendChild(this.homeViewContainer),this._initTriadVisibility&&this.showTriad(!0),delete this._initTriadVisibility}this.viewcube.style.display=e?"block":"none",this._positionHomeButton(),e&&this.viewer.autocam.refresh()},localize:function(){this.cube&&this.cube.localize()},showCompass:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.cube&&this.cube.showCompass(e)},setCompassRotation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.cube&&this.cube.setCompassRotation(e)},_initCompass:function(e){var t,n=e&&e.getData(),r=n&&n.metadata,o=r&&r["world north vector"];if(o=(o=o&&o.XYZ)&&new THREE.Vector3(o[0],o[1],o[2])){var i=this.viewer.autocam.sceneFrontDirection.clone(),a=this.viewer.autocam.sceneUpDirection.clone(),s=new THREE.Vector3;s.crossVectors(i,o);var c=o.angleTo(i)*(s.dot(a)<0?-1:1),u=r["custom values"],p=u&&u.angleToTrueNorth||0;p*=Math.PI/180;var h=(null==n||null===(t=n.loadOptions)||void 0===t?void 0:t.applyRefPoint)?0:c+p;this.cube.initCompass(),this.setCompassRotation(h),this.showCompass(!!this.viewer.prefs.get(y.Prefs3D.VIEW_CUBE_COMPASS))}},_displayViewCube:function(e){var t=!e&&this.viewer.prefs.get(y.Prefs3D.VIEW_CUBE);this.displayViewCube(t)},_onModelAdded:function(e){this._displayViewCube(this.viewer.impl.is2d),!this.cube||this.cube.hasCompass||this.viewer.impl.is2d||this._initCompass(e.model)},_positionHomeButton:function(){this.homeViewContainer&&(this.cube&&this.viewcube&&"block"===this.viewcube.style.display?this.homeViewContainer.classList.remove("no-viewcube"):this.homeViewContainer.classList.add("no-viewcube"))},refreshCube:function(){this.cube&&this.cube.refreshCube()}}),M.theExtensionManager.registerExtension("Autodesk.ViewCubeUi",x)}});
//# sourceMappingURL=ViewCubeUi.min.js.map