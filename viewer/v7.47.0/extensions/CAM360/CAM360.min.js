/*!
 * LMV v7.47.0
 * 
 * Copyright 2021 Autodesk, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 * 
 * Autodesk Forge Viewer Usage Limitations:
 * 
 * The Autodesk Forge viewer can only be used to view files generated by
 * Autodesk Forge services. The Autodesk Forge Viewer JavaScript must be
 * delivered from an Autodesk hosted URL.
 */
Autodesk.Extensions.CAM360=function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=633)}({633:function(e,t,o){"use strict";o.r(t),o.d(t,"CAM360Extension",(function(){return r}));var i=Autodesk.Viewing.Extensions;function n(e,t,o){i.ViewerModelStructurePanel.call(this,e,t,o),this.viewer=e,this.delegate=null,this.instanceTree=null,this.model=null,this.camNodes=[],this.camModelNodes=[],this.camSetupNodes=[],this.camStockNodes=[],this.camOperationNodes=[],this.camToolNodes=[],this.camFolderNodes=[]}function r(e,t){Autodesk.Viewing.Extension.call(this,e,t),this.name="cam360"}n.prototype=Object.create(i.ViewerModelStructurePanel.prototype),n.prototype.constructor=n,n.prototype.sortCamNodes=function(e,t){var o=this,i=[];e.enumNodeChildren(e.getRootId(),(function(e){i.push(e)}),!0),i.shift(),function e(){var n,r;i.length>0?(n=i.shift(),r=e,o.viewer.getProperties(n,(function(e){var t=function(e,t){for(var o=0;o<e.length;++o){var i=e[o];if(i.displayName===t)return i.displayValue}return null}(e.properties,"9429B915-D020-4CEB-971B-6ADD0A5D4BFA");t?("CAM_Setup"==t?o.camSetupNodes.push(n):"CAM_Operation"==t?o.camOperationNodes.push(n):"CAM_Tool"===t?o.camToolNodes.push(n):"CAM_Stock"===t?o.camStockNodes.push(n):"CAM_Folder"==t&&o.camFolderNodes.push(n),o.camNodes.push(n)):o.camModelNodes.push(n),r()}),(function(e,t,o){r()}))):t()}()},n.prototype.addModel=function(e){this.model=e,this.setVisible(!0),i.ViewerModelStructurePanel.prototype.addModel.call(this,e)},n.prototype.setInstanceTree=function(e,t){if(i.ViewerModelStructurePanel.prototype.setInstanceTree.call(this,e,t),t){this.delegate=e,this.instanceTree=t;var o=this;o.sortCamNodes(t,(function(){o.SetCAMNodeVisible(!1),o.setVisible(!0),o.ExpandSetupNodes(),o.resizeToContent()}))}},n.prototype.initialize=function(){i.ViewerModelStructurePanel.prototype.initialize.call(this);var e=this;this.viewer.model&&this.viewer.model.isLoadDone()||e.addEventListener(e.viewer,Autodesk.Viewing.GEOMETRY_LOADED_EVENT,(function t(o){e.SetCAMNodeVisible(!1),e.removeEventListener(e.viewer,Autodesk.Viewing.GEOMETRY_LOADED_EVENT,t)})),e.addEventListener(e.viewer,Autodesk.Viewing.SHOW_EVENT,(function(t){var o=t.nodeIdArray;if(o)for(var i=0;i<o.length;i++)e.setCamNodeVisibility(o[i])})),e.addEventListener(e.viewer,Autodesk.Viewing.SELECTION_CHANGED_EVENT,(function(t){var o=t.nodeArray;if(o)for(var i=0;i<o.length;i++)e.HideHightlightCAMNode(o[i])})),e.addEventListener(e.viewer,Autodesk.Viewing.ISOLATE_EVENT,(function(t){var o=t.nodeIdArray;if(o)if(0==o.length)e.SetModelVisible(),e.SetCAMNodeVisible(!0);else for(var i=0;i<o.length;i++)e.setCamNodeVisibility(o[i])}))},n.prototype.IsCAMNode=function(e){return-1!==this.camNodes.indexOf(e)},n.prototype.IsCAMSetupNode=function(e){return-1!==this.camSetupNodes.indexOf(e)},n.prototype.IsCAMStockNode=function(e){return-1!==this.camStockNodes.indexOf(e)},n.prototype.IsCAMToolNode=function(e){return-1!==this.camToolNodes.indexOf(e)},n.prototype.IsCAMOperationNode=function(e){return-1!==this.camOperationNodes.indexOf(e)},n.prototype.IsCAMFolderNode=function(e){return-1!==this.camFolderNodes.indexOf(e)},n.prototype.shouldInclude=function(e){return!this.IsCAMStockNode(e)},n.prototype.isGroupNode=function(e){return!this.IsCAMOperationNode(e)&&i.ViewerModelStructurePanel.prototype.isGroupNode.call(this,e)},n.prototype.setNodeVisibility=function(e,t){t?this.viewer.show(e):this.viewer.hide(e)},n.prototype.SetModelVisible=function(){if(this.camModelNodes)for(var e=0;e<this.camModelNodes.length;e++)this.setNodeVisibility(this.camModelNodes[e],!0)},n.prototype.SetCAMNodeVisible=function(e){if(this.camNodes){for(var t=0;t<this.camNodes.length;t++)this.setNodeVisibility(this.camNodes[t],e);this.SetToolNodeVisible(!1)}},n.prototype.SetToolNodeVisible=function(e){if(this.camToolNodes)for(var t=0;t<this.camToolNodes.length;t++)this.setNodeVisibility(this.camToolNodes[t],e)},n.prototype.HideHightlightNode=function(e){var t=this.viewer.impl,o=this;o.instanceTree.enumNodeFragments(e,(function(e){t.highlightFragment(o.model,e,!1,!0)}),!0)},n.prototype.HideHightlightCAMNode=function(e){var t=this.IsCAMSetupNode(e),o=this.IsCAMOperationNode(e),i=this.IsCAMFolderNode(e),n=this;n.instanceTree.enumNodeChildren(e,(function(e){t?n.IsCAMStockNode(e)||n.HideHightlightNode(e):o?n.IsCAMToolNode(e)&&n.HideHightlightNode(e):i&&n.HideHightlightNode(e)}),!1)},n.prototype.setCamNodeVisibility=function(e){var t=this.IsCAMSetupNode(e),o=this.IsCAMOperationNode(e),i=this.IsCAMFolderNode(e),n=this;t?this.instanceTree.enumNodeChildren(e,(function(e){var t=n.IsCAMStockNode(e);n.setNodeVisibility(e,t)})):o?this.instanceTree.enumNodeChildren(e,(function(e){n.IsCAMToolNode(e)&&n.setNodeVisibility(e,!1)})):i&&this.instanceTree.enumNodeChildren(e,(function(e){n.setNodeVisibility(e,!1)}))},n.prototype.onClick=function(e,t){i.ViewerModelStructurePanel.prototype.onClick.call(this,e,t),this.SetModelVisible(),this.setCamNodeVisibility(e),this.viewer.fitToView()},n.prototype.ExpandSetupNodes=function(){if(this.camSetupNodes)for(var e=0;e<this.camSetupNodes.length;e++)this.tree.setCollapsed(this.delegate,this.camSetupNodes[e],!1)},r.prototype=Object.create(Autodesk.Viewing.Extension.prototype),r.prototype.constructor=r,r.prototype.load=function(){var e=this.viewer,t=new n(this.viewer,"CAM Model Structure Loading",{});return this.viewer.getExtension("Autodesk.ModelStructure").setModelStructurePanel(t),e.hideLines(!1),e.setGhosting(!1),e.setQualityLevel(!1,!0),e.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,(function t(){e.impl.setLightPreset(0,!0),e.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,t)})),!0},r.prototype.unload=function(){this.viewer.getExtension("Autodesk.ModelStructure").restoreDefaultPanel()},r.prototype.activate=function(){return this.viewer.activateExtension("Autodesk.ModelStructure")},r.prototype.deactivate=function(){return this.viewer.deactivateExtension("Autodesk.ModelStructure")},r.prototype.isActive=function(){return this.viewer.isExtensionActive("Autodesk.ModelStructure")},Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.CAM360",r)}});
//# sourceMappingURL=CAM360.min.js.map