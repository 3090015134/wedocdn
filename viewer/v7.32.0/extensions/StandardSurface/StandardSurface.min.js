/*!
 * LMV v7.32.0
 * 
 * Copyright 2020 Autodesk, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 * 
 * Autodesk Forge Viewer Usage Limitations:
 * 
 * The Autodesk Forge viewer can only be used to view files generated by
 * Autodesk Forge services. The Autodesk Forge Viewer JavaScript must be
 * delivered from an Autodesk hosted URL.
 */
Autodesk.Extensions.StandardSurface=function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=630)}({0:function(e,t){e.exports=THREE},126:function(e,t,r){"use strict";var a=r(36);e.exports=function(e){a.copy(e,this)}},127:function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,a="boolean"==typeof t.cycles&&t.cycles,n=t.cmp&&(r=t.cmp,function(e){return function(t,a){var n={key:t,value:e[t]},o={key:a,value:e[a]};return r(n,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,i;if(Array.isArray(t)){for(i="[",r=0;r<t.length;r++)r&&(i+=","),i+=e(t[r])||"null";return i+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(a)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,l=Object.keys(t).sort(n&&n(t));for(i="",r=0;r<l.length;r++){var c=l[r],u=e(t[c]);u&&(i&&(i+=","),i+=JSON.stringify(c)+":"+u)}return o.splice(s,1),"{"+i+"}"}}(e)}},128:function(e,t,r){"use strict";e.exports=function(e,t,r){var a="",n=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),i=e.self._getId(e.schema);if(e.opts.strictKeywords){var s=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(s){var l="unknown keyword: "+s;if("log"!==e.opts.strictKeywords)throw new Error(l);e.logger.warn(l)}}if(e.isTop&&(a+=" var validate = ",n&&(e.async=!0,a+="async "),a+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",i&&(e.opts.sourceCode||e.opts.processCode)&&(a+=" /*# sourceURL="+i+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){var c=e.level,u=e.dataLevel,f=e.schema["false schema"],d=e.schemaPath+e.util.getProperty("false schema"),m=e.errSchemaPath+"/false schema",p=!e.opts.allErrors,h="data"+(u||""),v="valid"+c;if(!1===e.schema){e.isTop?p=!0:a+=" var "+v+" = false; ",(K=K||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'boolean schema is false' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ";var _=a;a=K.pop(),!e.compositeRule&&p?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?a+=n?" return data; ":" validate.errors = null; return true; ":a+=" var "+v+" = true; ";return e.isTop&&(a+=" }; return validate; "),a}if(e.isTop){var g=e.isTop;c=e.level=0,u=e.dataLevel=0,h="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var y="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(y);e.logger.warn(y)}a+=" var vErrors = null; ",a+=" var errors = 0;     ",a+=" if (rootData === undefined) rootData = data; "}else{c=e.level,h="data"+((u=e.dataLevel)||"");if(i&&(e.baseId=e.resolve.url(e.baseId,i)),n&&!e.async)throw new Error("async schema in sync schema");a+=" var errs_"+c+" = errors;"}v="valid"+c,p=!e.opts.allErrors;var S="",b="",x=e.schema.type,P=Array.isArray(x);if(x&&e.opts.nullable&&!0===e.schema.nullable&&(P?-1==x.indexOf("null")&&(x=x.concat("null")):"null"!=x&&(x=[x,"null"],P=!0)),P&&1==x.length&&(x=x[0],P=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(a+=" "+e.RULES.all.$comment.code(e,"$comment")),x){if(e.opts.coerceTypes)var E=e.util.coerceToTypes(e.opts.coerceTypes,x);var O=e.RULES.types[x];if(E||P||!0===O||O&&!Y(O)){d=e.schemaPath+".type",m=e.errSchemaPath+"/type",d=e.schemaPath+".type",m=e.errSchemaPath+"/type";var w=P?"checkDataTypes":"checkDataType";if(a+=" if ("+e.util[w](x,h,!0)+") { ",E){var T="dataType"+c,R="coerced"+c;a+=" var "+T+" = typeof "+h+"; ","array"==e.opts.coerceTypes&&(a+=" if ("+T+" == 'object' && Array.isArray("+h+")) "+T+" = 'array'; "),a+=" var "+R+" = undefined; ";var A="",F=E;if(F)for(var N,M=-1,I=F.length-1;M<I;)N=F[M+=1],M&&(a+=" if ("+R+" === undefined) { ",A+="}"),"array"==e.opts.coerceTypes&&"array"!=N&&(a+=" if ("+T+" == 'array' && "+h+".length == 1) { "+R+" = "+h+" = "+h+"[0]; "+T+" = typeof "+h+";  } "),"string"==N?a+=" if ("+T+" == 'number' || "+T+" == 'boolean') "+R+" = '' + "+h+"; else if ("+h+" === null) "+R+" = ''; ":"number"==N||"integer"==N?(a+=" if ("+T+" == 'boolean' || "+h+" === null || ("+T+" == 'string' && "+h+" && "+h+" == +"+h+" ","integer"==N&&(a+=" && !("+h+" % 1)"),a+=")) "+R+" = +"+h+"; "):"boolean"==N?a+=" if ("+h+" === 'false' || "+h+" === 0 || "+h+" === null) "+R+" = false; else if ("+h+" === 'true' || "+h+" === 1) "+R+" = true; ":"null"==N?a+=" if ("+h+" === '' || "+h+" === 0 || "+h+" === false) "+R+" = null; ":"array"==e.opts.coerceTypes&&"array"==N&&(a+=" if ("+T+" == 'string' || "+T+" == 'number' || "+T+" == 'boolean' || "+h+" == null) "+R+" = ["+h+"]; ");a+=" "+A+" if ("+R+" === undefined) {   ",(K=K||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: { type: '",a+=P?""+x.join(","):""+x,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=P?""+x.join(","):""+x,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ";_=a;a=K.pop(),!e.compositeRule&&p?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else {  ";var D=u?"data"+(u-1||""):"parentData";a+=" "+h+" = "+R+"; ",u||(a+="if ("+D+" !== undefined)"),a+=" "+D+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+R+"; } "}else{(K=K||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: { type: '",a+=P?""+x.join(","):""+x,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=P?""+x.join(","):""+x,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ";_=a;a=K.pop(),!e.compositeRule&&p?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}a+=" } "}}if(e.schema.$ref&&!o)a+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(a+=" } if (errors === ",a+=g?"0":"errs_"+c,a+=") { ",b+="}");else{var L=e.RULES;if(L)for(var U=-1,$=L.length-1;U<$;)if(Y(O=L[U+=1])){if(O.type&&(a+=" if ("+e.util.checkDataType(O.type,h)+") { "),e.opts.useDefaults)if("object"==O.type&&e.schema.properties){f=e.schema.properties;var C=Object.keys(f);if(C)for(var V,j=-1,k=C.length-1;j<k;){if(void 0!==(z=f[V=C[j+=1]]).default){var B=h+e.util.getProperty(V);if(e.compositeRule){if(e.opts.strictDefaults){y="default is ignored for: "+B;if("log"!==e.opts.strictDefaults)throw new Error(y);e.logger.warn(y)}}else a+=" if ("+B+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+B+" === null || "+B+" === '' "),a+=" ) "+B+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(z.default)+" ":a+=" "+JSON.stringify(z.default)+" ",a+="; "}}}else if("array"==O.type&&Array.isArray(e.schema.items)){var H=e.schema.items;if(H){M=-1;for(var z,q=H.length-1;M<q;)if(void 0!==(z=H[M+=1]).default){B=h+"["+M+"]";if(e.compositeRule){if(e.opts.strictDefaults){y="default is ignored for: "+B;if("log"!==e.opts.strictDefaults)throw new Error(y);e.logger.warn(y)}}else a+=" if ("+B+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+B+" === null || "+B+" === '' "),a+=" ) "+B+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(z.default)+" ":a+=" "+JSON.stringify(z.default)+" ",a+="; "}}}var G=O.rules;if(G)for(var X,Q=-1,W=G.length-1;Q<W;)if(J(X=G[Q+=1])){var Z=X.code(e,X.keyword,O.type);Z&&(a+=" "+Z+" ",p&&(S+="}"))}if(p&&(a+=" "+S+" ",S=""),O.type&&(a+=" } ",x&&x===O.type&&!E)){a+=" else { ";var K;d=e.schemaPath+".type",m=e.errSchemaPath+"/type";(K=K||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: { type: '",a+=P?""+x.join(","):""+x,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=P?""+x.join(","):""+x,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ";_=a;a=K.pop(),!e.compositeRule&&p?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } "}p&&(a+=" if (errors === ",a+=g?"0":"errs_"+c,a+=") { ",b+="}")}}function Y(e){for(var t=e.rules,r=0;r<t.length;r++)if(J(t[r]))return!0}function J(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,a=0;a<r.length;a++)if(void 0!==e.schema[r[a]])return!0}(t)}return p&&(a+=" "+b+" "),g?(n?(a+=" if (errors === 0) return data;           ",a+=" else throw new ValidationError(vErrors); "):(a+=" validate.errors = vErrors; ",a+=" return errors === 0;       "),a+=" }; return validate;"):a+=" var "+v+" = errors === errs_"+c+";",a=e.util.cleanUpCode(a),g&&(a=e.util.finalCleanUpCode(a,n)),a}},129:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(i||""),d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=s;var m="maximum"==t,p=m?"exclusiveMaximum":"exclusiveMinimum",h=e.schema[p],v=e.opts.$data&&h&&h.$data,_=m?"<":">",g=m?">":"<",y=void 0;if(v){var S=e.util.getData(h.$data,i,e.dataPathArr),b="exclusive"+o,x="exclType"+o,P="exclIsNumber"+o,E="' + "+(T="op"+o)+" + '";n+=" var schemaExcl"+o+" = "+S+"; ",n+=" var "+b+"; var "+x+" = typeof "+(S="schemaExcl"+o)+"; if ("+x+" != 'boolean' && "+x+" != 'undefined' && "+x+" != 'number') { ";var O;y=p;(O=O||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(y||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(n+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var w=n;n=O.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+w+"]); ":n+=" validate.errors = ["+w+"]; return false; ":n+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else if ( ",d&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" "+x+" == 'number' ? ( ("+b+" = "+a+" === undefined || "+S+" "+_+"= "+a+") ? "+f+" "+g+"= "+S+" : "+f+" "+g+" "+a+" ) : ( ("+b+" = "+S+" === true) ? "+f+" "+g+"= "+a+" : "+f+" "+g+" "+a+" ) || "+f+" !== "+f+") { var op"+o+" = "+b+" ? '"+_+"' : '"+_+"='; ",void 0===s&&(y=p,c=e.errSchemaPath+"/"+p,a=S,d=v)}else{E=_;if((P="number"==typeof h)&&d){var T="'"+E+"'";n+=" if ( ",d&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" ( "+a+" === undefined || "+h+" "+_+"= "+a+" ? "+f+" "+g+"= "+h+" : "+f+" "+g+" "+a+" ) || "+f+" !== "+f+") { "}else{P&&void 0===s?(b=!0,y=p,c=e.errSchemaPath+"/"+p,a=h,g+="="):(P&&(a=Math[m?"min":"max"](h,s)),h===(!P||a)?(b=!0,y=p,c=e.errSchemaPath+"/"+p,g+="="):(b=!1,E+="="));T="'"+E+"'";n+=" if ( ",d&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" "+f+" "+g+" "+a+" || "+f+" !== "+f+") { "}}y=y||t,(O=O||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(y||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+T+", limit: "+a+", exclusive: "+b+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be "+E+" ",n+=d?"' + "+a:a+"'"),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";w=n;return n=O.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+w+"]); ":n+=" validate.errors = ["+w+"]; return false; ":n+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u&&(n+=" else { "),n}},130:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(i||""),d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=s,n+="if ( ",d&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" "+f+".length "+("maxItems"==t?">":"<")+" "+a+") { ";var m=t,p=p||[];p.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(m||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxItems"==t?"more":"fewer",n+=" than ",n+=d?"' + "+a+" + '":""+s,n+=" items' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var h=n;return n=p.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+h+"]); ":n+=" validate.errors = ["+h+"]; return false; ":n+=" var err = "+h+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},131:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(i||""),d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=s;var m="maxLength"==t?">":"<";n+="if ( ",d&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),!1===e.opts.unicode?n+=" "+f+".length ":n+=" ucs2length("+f+") ",n+=" "+m+" "+a+") { ";var p=t,h=h||[];h.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be ",n+="maxLength"==t?"longer":"shorter",n+=" than ",n+=d?"' + "+a+" + '":""+s,n+=" characters' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var v=n;return n=h.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},132:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(i||""),d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=s,n+="if ( ",d&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" Object.keys("+f+").length "+("maxProperties"==t?">":"<")+" "+a+") { ";var m=t,p=p||[];p.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(m||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxProperties"==t?"more":"fewer",n+=" than ",n+=d?"' + "+a+" + '":""+s,n+=" properties' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var h=n;return n=p.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+h+"]); ":n+=" validate.errors = ["+h+"]; return false; ":n+=" var err = "+h+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},133:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},319:function(e,t,r){"use strict";var a=r(555),n=r(76),o=r(559),i=r(126),s=r(127),l=r(560),c=r(561),u=r(582),f=r(36);e.exports=_,_.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var a=this._addSchema(e);r=a.validate||this._compile(a)}var n=r(t);!0!==r.$async&&(this.errors=r.errors);return n},_.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},_.prototype.addSchema=function(e,t,r,a){if(Array.isArray(e)){for(var o=0;o<e.length;o++)this.addSchema(e[o],void 0,r,a);return this}var i=this._getId(e);if(void 0!==i&&"string"!=typeof i)throw new Error("schema id must be string");return P(this,t=n.normalizeId(t||i)),this._schemas[t]=this._addSchema(e,r,a,!0),this},_.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},_.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(p)?p:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var a=this.validate(r,e);if(!a&&t){var n="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(n);this.logger.error(n)}return a},_.prototype.getSchema=function(e){var t=g(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=n.schema.call(e,{schema:{}},t);if(r){var o=r.schema,s=r.root,l=r.baseId,c=a.call(e,o,s,void 0,l);return e._fragments[t]=new i({ref:t,fragment:!0,schema:o,root:s,baseId:l,validate:c}),c}}(this,e)}},_.prototype.removeSchema=function(e){if(e instanceof RegExp)return y(this,this._schemas,e),y(this,this._refs,e),this;switch(typeof e){case"undefined":return y(this,this._schemas),y(this,this._refs),this._cache.clear(),this;case"string":var t=g(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,a=r?r(e):e;this._cache.del(a);var o=this._getId(e);o&&(o=n.normalizeId(o),delete this._schemas[o],delete this._refs[o])}return this},_.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},_.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,a=void 0===t.dataVar?"data":t.dataVar,n="",o=0;o<e.length;o++){var i=e[o];i&&(n+=a+i.dataPath+" "+i.message+r)}return n.slice(0,-r.length)},_.prototype._addSchema=function(e,t,r,a){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,s=o?o(e):e,l=this._cache.get(s);if(l)return l;a=a||!1!==this._opts.addUsedSchema;var c=n.normalizeId(this._getId(e));c&&a&&P(this,c);var u,f=!1!==this._opts.validateSchema&&!t;f&&!(u=c&&c==n.normalizeId(e.$schema))&&this.validateSchema(e,!0);var d=n.ids.call(this,e),m=new i({id:c,schema:e,localRefs:d,cacheKey:s,meta:r});"#"!=c[0]&&a&&(this._refs[c]=m);this._cache.put(s,m),f&&u&&this.validateSchema(e,!0);return m},_.prototype._compile=function(e,t){if(e.compiling)return e.validate=o,o.schema=e.schema,o.errors=null,o.root=t||o,!0===e.schema.$async&&(o.$async=!0),o;var r,n;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{n=a.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=n,e.refs=n.refs,e.refVal=n.refVal,e.root=n.root,n;function o(){var t=e.validate,r=t.apply(this,arguments);return o.errors=t.errors,r}},_.prototype.compileAsync=r(583);var d=r(584);_.prototype.addKeyword=d.add,_.prototype.getKeyword=d.get,_.prototype.removeKeyword=d.remove,_.prototype.validateKeyword=d.validate;var m=r(78);_.ValidationError=m.Validation,_.MissingRefError=m.MissingRef,_.$dataMetaSchema=u;var p="http://json-schema.org/draft-07/schema",h=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],v=["/properties"];function _(e){if(!(this instanceof _))return new _(e);e=this._opts=f.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:E,warn:E,error:E};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=l(e.format),this._cache=e.cache||new o,this._loadingSchemas={},this._compilations=[],this.RULES=c(),this._getId=function(e){switch(e.schemaId){case"auto":return x;case"id":return S;default:return b}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=s),this._metaOpts=function(e){for(var t=f.copy(e._opts),r=0;r<h.length;r++)delete t[h[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;e._opts.$data&&(t=r(587),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var a=r(133);e._opts.$data&&(a=u(a,v));e.addMetaSchema(a,p,!0),e._refs["http://json-schema.org/schema"]=p}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function g(e,t){return t=n.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function y(e,t,r){for(var a in t){var n=t[a];n.meta||r&&!r.test(a)||(e._cache.del(n.cacheKey),delete t[a])}}function S(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function b(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function x(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function P(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function E(){}},320:function(e){e.exports=JSON.parse('{"definitions":{"color":{"type":"object","required":["value"],"properties":{"value":{"type":"object","required":["r","g","b"],"properties":{"r":{"type":"number","minimum":0,"maximum":1},"g":{"type":"number","minimum":0,"maximum":1},"b":{"type":"number","minimum":0,"maximum":1}}}}},"colorOrTextureReference":{"oneOf":[{"$ref":"#/definitions/color"},{"$ref":"#/definitions/textureReference"}]},"angleZeroToTwoPi":{"oneOf":[{"type":"object","required":["units","value"],"properties":{"units":{"type":"string","const":"radian"},"value":{"type":"number","minimum":0,"maximum":6.283185307179586}}},{"type":"object","required":["units","value"],"properties":{"units":{"type":"string","const":"degree"},"value":{"type":"number","minimum":0,"maximum":360}}}]},"angleZeroToTwoPiOrTextureReference":{"oneOf":[{"$ref":"#/definitions/angleZeroToTwoPi"},{"allOf":[{"type":"object","required":["units"],"properties":{"units":{"type":"string","enum":["degree","radian"]}}},{"$ref":"#/definitions/textureReference"}]}]},"distanceUnits":{"type":"object","required":["units"],"properties":{"units":{"type":"string","enum":["nanometer","millimeter","decimeter","centimeter","meter","kilometer","inch","foot","mile","yard",""]}}},"distanceZeroToInfinityOrTextureReference":{"allOf":[{"$ref":"#/definitions/distanceUnits"},{"oneOf":[{"$ref":"#/definitions/scalarZeroToInfinity"},{"$ref":"#/definitions/textureReference"}]}]},"scalarNegativeOneToOne":{"type":"object","required":["value"],"properties":{"value":{"type":"number","minimum":-1,"maximum":1}}},"scalarNegativeOneToOneOrTextureReference":{"oneOf":[{"$ref":"#/definitions/scalarNegativeOneToOne"},{"$ref":"#/definitions/textureReference"}]},"scalarUnlimited":{"type":"object","required":["value"],"properties":{"value":{"type":"number"}}},"scalarUnlimitedOrTextureReference":{"oneOf":[{"$ref":"#/definitions/scalarUnlimited"},{"$ref":"#/definitions/textureReference"}]},"scalarZeroToInfinity":{"type":"object","required":["value"],"properties":{"value":{"type":"number","minimum":0}}},"scalarZeroToInfinityOrTextureReference":{"oneOf":[{"$ref":"#/definitions/scalarZeroToInfinity"},{"$ref":"#/definitions/textureReference"}]},"scalarZeroToOne":{"type":"object","required":["value"],"properties":{"value":{"type":"number","minimum":0,"maximum":1}}},"scalarZeroToOneOrTextureReference":{"oneOf":[{"$ref":"#/definitions/scalarZeroToOne"},{"$ref":"#/definitions/textureReference"}]},"textureReference":{"type":"object","required":["texture"],"properties":{"texture":{"description":"A reference to a texture; when using a texture for a scalar-valued parameter, the first channel of the sampled value (after scaling by \'rgbScale\') is used.","type":"object","required":["$ref"],"properties":{"$ref":{"description":"JSON reference to the texture; must be within the same JSON document.","type":"string","pattern":"^#/.+$"}}}}},"vector":{"type":"object","required":["value"],"properties":{"value":{"type":"object","required":["x","y","z"],"properties":{"x":{"type":"number","minimum":0,"maximum":1},"y":{"type":"number","minimum":0,"maximum":1},"z":{"type":"number","minimum":0,"maximum":1}}}}},"vectorOrTextureReference":{"oneOf":[{"$ref":"#/definitions/vector"},{"$ref":"#/definitions/textureReference"}]}},"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://autodesk.com/schemas/standard-surface.schema.json","type":"object","required":["tag","definition","transparent","parameters"],"properties":{"tag":{"description":"Unique name or identifier for the material. MUST NOT be empty. Could be displayed to users.","type":"string","pattern":"^.+$"},"definition":{"description":"Identifier for the type of this material. MUST be \'StandardSurface\'.","type":"string","const":"StandardSurface"},"transparent":{"description":"Transparency hint. SHOULD be true if the material is transparent.","type":"boolean","default":false},"parameters":{"description":"Standard Surface material parameter values.","type":"object","properties":{"base":{"description":"Scalar multiplier for base_color; reflection weight of diffuse_brdf.","default":{"value":0.8},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"base_color":{"description":"Reflection color at normal incidence (i.e., surface seen from straight up); reflection color of diffuse_brdf.","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"coat":{"description":"Coating reflection weight (coating reflection color is fixed to white).","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"coat_affect_color":{"description":"How much to additionally modulate diffuse reflection and subsurface scattering saturation.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"coat_affect_roughness":{"description":"How much to affect the roughness of the specular reflection layers below.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"coat_anisotropy":{"description":"Reflection anisotropy of coat_brdf.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"coat_color":{"description":"Tint color for the light coming from all layers below.","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"coat_IOR":{"description":"Refractive index of coat_brdf.","default":{"value":1.5},"allOf":[{"$ref":"#/definitions/scalarUnlimitedOrTextureReference"}]},"coat_normal":{"description":"Shading normal for the coating reflections; optional, overrides the default shading normal; has no effect on the closure combination weights; if present and of non-zero length, will be normalized.","default":{"value":{"x":0,"y":0,"z":0}},"allOf":[{"$ref":"#/definitions/vectorOrTextureReference"}]},"coat_rotation":{"description":"Orientation of coating anisotropy. Units apply to this value and MUST be one of \'radian\' or \'degree\'.","default":{"units":"radian","value":0},"allOf":[{"$ref":"#/definitions/angleZeroToTwoPiOrTextureReference"}]},"coat_roughness":{"description":"Coat reflection roughness; squared internally before being passed to the BSDF to achieve a more linear perceptual response.","default":{"value":0.1},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"diffuse_roughness":{"description":"Reflection roughness of diffuse_brdf; transmission roughness of diffuse_btdf.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"emission":{"description":"Emission color multiplier.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"emission_color":{"description":"Emission color.","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"metalness":{"description":"Weight of metal_brdf vs the specular reflection layer.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"normal":{"description":"Shading normal for the base layer; optional, overrides the default shading normal; has no effect on the closure combination weights; if present and of non-zero length, will be normalized.","default":{"value":{"x":0,"y":0,"z":0}},"allOf":[{"$ref":"#/definitions/vectorOrTextureReference"}]},"sheen":{"description":"Reflection weight of sheen_brdf.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"sheen_color":{"description":"Reflection color of sheen_brdf","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"sheen_roughness":{"description":"Reflection roughness of sheen_brdf.","default":{"value":0.3},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"specular":{"description":"Scalar multiplier to specular_color; specular reflection weight.","default":{"value":1},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"specular_anisotropy":{"description":"Reflection anisotropy of metal_brdf and specular_brdf.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"specular_color":{"description":"Reflection color at grazing incidence (i.e., around silhouettes); specular reflection color.","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"specular_IOR":{"description":"Refractive index of specular_brdf and specular_btdf.","default":{"value":1.52},"allOf":[{"$ref":"#/definitions/scalarUnlimitedOrTextureReference"}]},"specular_rotation":{"description":"Orientation of specular anisotropy. Units apply to this value and MUST be one of \'radian\' or \'degree\'.","default":{"units":"radian","value":0},"allOf":[{"$ref":"#/definitions/angleZeroToTwoPiOrTextureReference"}]},"specular_roughness":{"description":"Reflection roughness of specular_brdf; refraction roughness of specular_btdf; squared internally before being passed to the BxDFs to achieve a more uniform roughness look over the parameter range.","default":{"value":0.1},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"subsurface":{"description":"Diffuse transmission weight; subsurface scattering weight.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"subsurface_anisotropy":{"description":"Anisotropy of the subsurface medium phase function.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarNegativeOneToOneOrTextureReference"}]},"subsurface_color":{"description":"Diffuse transmission color; subsurface color, used by subsurface(...) closure.","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"subsurface_radius":{"description":"Subsurface radii (i.e., mean free paths) of the red, green, and blue channels","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"subsurface_scale":{"description":"Scalar scale for subsurface_radius. Units apply to this value and MUST be one of \'nanometer\', \'millimeter\', \'decimeter\', \'centimeter\', \'meter\', \'kilometer\', \'inch\', \'foot\', \'mile\', \'yard\', or \'\' (to use scene units).","default":{"units":"","value":1},"allOf":[{"$ref":"#/definitions/distanceZeroToInfinityOrTextureReference"}]},"thin_film_IOR":{"description":"Refractive index of the film.","default":{"value":1.5},"allOf":[{"$ref":"#/definitions/scalarUnlimitedOrTextureReference"}]},"thin_film_thickness":{"description":"Thickness of the film. Units apply to this value and MUST be one of \'nanometer\', \'millimeter\', \'decimeter\', \'centimeter\', \'meter\', \'kilometer\', \'inch\', \'foot\', \'mile\', \'yard\', or \'\' (to use scene units).","default":{"units":"nanometer","value":0},"allOf":[{"$ref":"#/definitions/distanceZeroToInfinityOrTextureReference"}]},"thin_walled":{"description":"If true, the object is considered infinitely thin and the surface double-sided.","type":"boolean","default":false},"transmission":{"description":"Transmission weight.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToOneOrTextureReference"}]},"transmission_color":{"description":"Transmission color, i.e., tint.","default":{"value":{"r":1,"g":1,"b":1}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"transmission_depth":{"description":"The distance travelled inside the material by white light before its color becomes exactly transmission_color by Beer\'s law, determining the extinction coefficient of the interior medium; if zero, transmission_color acts as a constant (on-surface) transmission tint. Units apply to this value and MUST be one of \'nanometer\', \'millimeter\', \'decimeter\', \'centimeter\', \'meter\', \'kilometer\', \'inch\', \'foot\', \'mile\', \'yard\', or \'\' (to use scene units).","default":{"units":"","value":0},"allOf":[{"$ref":"#/definitions/distanceZeroToInfinityOrTextureReference"}]},"transmission_dispersion":{"description":"Dispersion Abbe number, describing how much the index of refraction varies across wavelengths.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarZeroToInfinityOrTextureReference"}]},"transmission_extra_roughness":{"description":"Additional (positive or negative) roughness on top of specular_roughness. Values other than 0 are not physically correct.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarNegativeOneToOneOrTextureReference"}]},"transmission_scatter":{"description":"Scattering coefficient of the interior medium.","default":{"value":{"r":0,"g":0,"b":0}},"allOf":[{"$ref":"#/definitions/colorOrTextureReference"}]},"transmission_scatter_anisotropy":{"description":"The anisotropy of the Henyey-Greenstein phase function of the interior medium.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarNegativeOneToOneOrTextureReference"}]}}},"textures":{"description":"Texture definitions; each texture key MUST begin with any number of digits followed by an underscore and one or more additional characters.","type":"object","additionalProperties":{"type":"object","required":["bitmap"],"properties":{"bitmap":{"description":"SVF path to the image file.","type":"string"},"filtering":{"description":"Type of filtering to use when sampling the image; MUST be either \'linear\' (linear interpolation) or \'nearest\' (nearest pixel).","default":"linear","type":"string","enum":["linear","nearest"]},"encoding":{"description":"Color space encoding of the supplied bitmap file; MUST be either \'linear\' (linear RGB) or \'srgb\' (sRGB); default is \'srgb\'.","default":"srgb","type":"string","enum":["linear","srgb"]},"isHeightMap":{"description":"Whether this texture represents a height (bump) map that should be converted to a normal map; this MUST be true when using a height (bump) map for a parameter that expects a vector (e.g., \'coat_normal\').","default":false,"type":"boolean"},"heightMapScale":{"description":"Real-world scale of the height (bump) map; ignored if \'isHeightMap\' is not true; Units apply to this value and MUST be one of \'nanometer\', \'millimeter\', \'decimeter\', \'centimeter\', \'meter\', \'kilometer\', \'inch\', \'foot\', \'mile\', \'yard\', or \'\' (to use scene units).","default":{"units":"","value":1},"allOf":[{"$ref":"#/definitions/distanceUnits"},{"$ref":"#/definitions/scalarZeroToInfinity"}]},"invert":{"description":"Whether the sampled texture values should be inverted; inversion of each channel is done independently.","default":false,"type":"boolean"},"realWorldOffsetX":{"description":"Offset of the texture in the X/U direction in real-world units.","default":{"units":"","value":0},"allOf":[{"$ref":"#/definitions/distanceUnits"},{"$ref":"#/definitions/scalarUnlimited"}]},"realWorldOffsetY":{"description":"Offset of the texture in the Y/V direction in real-world units.","default":{"units":"","value":0},"allOf":[{"$ref":"#/definitions/distanceUnits"},{"$ref":"#/definitions/scalarUnlimited"}]},"realWorldScaleX":{"description":"Size of the texture in the X/U direction in real-world units.","default":{"units":"","value":1},"allOf":[{"$ref":"#/definitions/distanceUnits"},{"$ref":"#/definitions/scalarZeroToInfinity"}]},"realWorldScaleY":{"description":"Size of the texture in the Y/V direction in real-world units.","default":{"units":"","value":1},"allOf":[{"$ref":"#/definitions/distanceUnits"},{"$ref":"#/definitions/scalarZeroToInfinity"}]},"rgbScale":{"description":"Scalar multiplier for the sampled value.","default":{"value":1},"allOf":[{"$ref":"#/definitions/scalarZeroToInfinity"}]},"uOffset":{"description":"Offset of the texture in the X/U direction in UV coordinate space; this offset is added after converting the real-world offset into UV space.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarNegativeOneToOne"}]},"uRepeat":{"description":"Whether the texture should repeat in the X/U direction; when false, out-of-range samples will be clamped to the nearest edge.","default":true,"type":"boolean"},"uScale":{"description":"Size of the texture in the X/U direction in UV coordinate space; this scaling factor is added after converting the real-world scaling factor into UV space.","default":{"value":1},"allOf":[{"$ref":"#/definitions/scalarZeroToInfinity"}]},"vOffset":{"description":"Offset of the texture in the Y/V direction in UV coordinate space; this offset is added after converting the real-world offset into UV space.","default":{"value":0},"allOf":[{"$ref":"#/definitions/scalarNegativeOneToOne"}]},"vRepeat":{"description":"Whether the texture should repeat in the Y/V direction; when false, out-of-range samples will be clamped to the nearest edge.","default":true,"type":"boolean"},"vScale":{"description":"Size of the texture in the Y/V direction in UV coordinate space; this scaling factor is added after converting the real-world scaling factor into UV space.","default":{"value":1},"allOf":[{"$ref":"#/definitions/scalarZeroToInfinity"}]},"wAngle":{"description":"Rotation of the texture about its center.","default":{"units":"radian","value":0},"allOf":[{"$ref":"#/definitions/angleZeroToTwoPi"}]}}}}}}')},321:function(e,t){e.exports="varying vec3 vWorldNormal;\nvarying vec3 vWorldPosition;\n#if defined(USE_MAP) || defined(USE_BASE_MAP) || defined(USE_BASE_COLOR_MAP) || defined(USE_COAT_MAP) || defined(USE_COAT_AFFECT_COLOR_MAP) || defined(USE_COAT_AFFECT_ROUGHNESS_MAP) || defined(USE_COAT_ANISOTROPY_MAP) || defined(USE_COAT_COLOR_MAP) || defined(USE_COAT_IOR_MAP) || defined(USE_COAT_NORMAL_MAP) || defined(USE_COAT_ROTATION_MAP) || defined(USE_COAT_ROUGHNESS_MAP) || defined(USE_DIFFUSE_ROUGHNESS_MAP) || defined(USE_EMISSION_MAP) || defined(USE_EMISSION_COLOR_MAP) || defined(USE_METALNESS_MAP) || defined(USE_NORMAL_MAP) || defined(USE_OPACITY_MAP) || defined(USE_SHEEN_MAP) || defined(USE_SHEEN_COLOR_MAP) || defined(USE_SHEEN_ROUGHNESS_MAP) || defined(USE_SPECULAR_MAP) || defined(USE_SPECULAR_ANISOTROPY_MAP) || defined(USE_SPECULAR_COLOR_MAP) || defined(USE_SPECULAR_IOR_MAP) || defined(USE_SPECULAR_ROTATION_MAP) || defined(USE_SPECULAR_ROUGHNESS_MAP) || defined(USE_SUBSURFACE_MAP) || defined(USE_SUBSURFACE_ANISOTROPY_MAP) || defined(USE_SUBSURFACE_COLOR_MAP) || defined(USE_SUBSURFACE_RADIUS_MAP) || defined(USE_SUBSURFACE_SCALE_MAP) || defined(USE_THIN_FILM_IOR_MAP) || defined(USE_THIN_FILM_THICKNESS_MAP) || defined(USE_THIN_WALLED_MAP) || defined(USE_TRANSMISSION_MAP) || defined(USE_TRANSMISSION_COLOR_MAP) || defined(USE_TRANSMISSION_DEPTH_MAP) || defined(USE_TRANSMISSION_DISPERSION_MAP) || defined(USE_TRANSMISSION_EXTRA_ROUGHNESS_MAP) || defined(USE_TRANSMISSION_SCATTER_MAP) || defined(USE_TRANSMISSION_SCATTER_ANISOTROPY_MAP)\n#define USE_MAP\n#endif\nvarying vec2 vUv;\n#ifdef MRT_NORMALS\nvarying float depth;\nvarying vec3 vGeomNormal;\n#endif\n#include<pack_normals>\n#include<instancing_decl_vert>\n#include<id_decl_vert>\n#include<shadowmap_decl_vert>\nvoid main() {\n#ifdef UNPACK_NORMALS\n    vec3 instNorm = decodeNormal(normal);\n#else\n    vec3 instNorm = normal;\n#endif\n    instNorm = getInstanceNormal(instNorm);\n    vec3 instPos = getInstancePos(position);\n#ifdef MRT_NORMALS\n    vGeomNormal = normalize(normalMatrix * instNorm);\n#endif\n    vec4 positionWorld = modelMatrix * vec4(instPos, 1.0);\n    mat3 worldInverseTransposeMatrix = mat3(modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz);\n    vec4 mvPosition = modelViewMatrix * vec4(instPos, 1.0);\n    gl_Position = projectionMatrix * mvPosition;\n    vWorldNormal = normalize(worldInverseTransposeMatrix * instNorm);\n    vWorldPosition = positionWorld.xyz;\n    vUv = uv;\n#ifdef MRT_NORMALS\n    depth = mvPosition.z;\n#endif\n#include<id_vert>\n#include<shadowmap_vert>\n}\n"},322:function(e,t){e.exports="#include<common>\n#define M_PI_INV 1.0/PI\n#define M_GOLDEN_RATIO 1.6180339887498948482045868343656\n#define M_FLOAT_EPS 0.000001\n#define MAX_LIGHTS (MAX_POINT_LIGHTS + MAX_SPOT_LIGHTS + MAX_DIR_LIGHTS)\n#define BSDF vec3\n#define EDF vec3\nstruct VDF { vec3 absorption; vec3 scattering; };\nstruct surfaceshader { vec3 color; vec3 transparency; };\nstruct volumeshader { VDF vdf; EDF edf; };\nstruct displacementshader { vec3 offset; float scale; };\nstruct lightshader { vec3 intensity; vec3 direction; };\nuniform sampler2D u_sheenAlbedo;\nuniform sampler2D u_samplingRandomMap;\n#inject<uniforms>\n#ifdef USE_TILING\nuniform mat4 tilingOverallTransform;\nuniform sampler2D TilingMap;\nuniform mat3 TilingMap_texMatrix;\nuniform vec4 uv2tile;\nuniform vec4 tile2uv;\nuniform vec2 tileAlignOffset;\nuniform mat4 tilingUVTransform;\n#ifdef USE_TILING_NORMAL\nuniform sampler2D TilingNormalMap;\nuniform mat3 TilingNormalMap_texMatrix;\n#endif\n#ifdef USE_TILING_RANDOM\nuniform sampler2D TilingRandomMap;\nuniform mat3 TilingRandomMap_texMatrix;\nuniform vec2 tilingRandomAxisS;\nuniform vec2 tilingRandomAxisT;\nuniform vec2 tilingRandomAlignmentOffset;\n#endif\n#endif\nuniform float envExponentMin;\nuniform float envExponentMax;\nuniform float envExponentCount;\n#include<env_sample>\n#if TONEMAP_OUTPUT > 0\nuniform float exposureBias;\n#include<tonemap>\n#endif\nvarying vec3 vWorldPosition;\n#include<id_decl_frag>\n#include<theming_decl_frag>\n#include<shadowmap_decl_frag>\n#ifdef MRT_NORMALS\nvarying vec3 vGeomNormal;\n#endif\n#ifdef USE_FOG\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#if defined(USE_MAP) || defined(USE_BASE_MAP) || defined(USE_BASE_COLOR_MAP) || defined(USE_COAT_MAP) || defined(USE_COAT_AFFECT_COLOR_MAP) || defined(USE_COAT_AFFECT_ROUGHNESS_MAP) || defined(USE_COAT_ANISOTROPY_MAP) || defined(USE_COAT_COLOR_MAP) || defined(USE_COAT_IOR_MAP) || defined(USE_COAT_NORMAL_MAP) || defined(USE_COAT_ROTATION_MAP) || defined(USE_COAT_ROUGHNESS_MAP) || defined(USE_DIFFUSE_ROUGHNESS_MAP) || defined(USE_EMISSION_MAP) || defined(USE_EMISSION_COLOR_MAP) || defined(USE_METALNESS_MAP) || defined(USE_NORMAL_MAP) || defined(USE_OPACITY_MAP) || defined(USE_SHEEN_MAP) || defined(USE_SHEEN_COLOR_MAP) || defined(USE_SHEEN_ROUGHNESS_MAP) || defined(USE_SPECULAR_MAP) || defined(USE_SPECULAR_ANISOTROPY_MAP) || defined(USE_SPECULAR_COLOR_MAP) || defined(USE_SPECULAR_IOR_MAP) || defined(USE_SPECULAR_ROTATION_MAP) || defined(USE_SPECULAR_ROUGHNESS_MAP) || defined(USE_SUBSURFACE_MAP) || defined(USE_SUBSURFACE_ANISOTROPY_MAP) || defined(USE_SUBSURFACE_COLOR_MAP) || defined(USE_SUBSURFACE_RADIUS_MAP) || defined(USE_SUBSURFACE_SCALE_MAP) || defined(USE_THIN_FILM_IOR_MAP) || defined(USE_THIN_FILM_THICKNESS_MAP) || defined(USE_THIN_WALLED_MAP) || defined(USE_TRANSMISSION_MAP) || defined(USE_TRANSMISSION_COLOR_MAP) || defined(USE_TRANSMISSION_DEPTH_MAP) || defined(USE_TRANSMISSION_DISPERSION_MAP) || defined(USE_TRANSMISSION_EXTRA_ROUGHNESS_MAP) || defined(USE_TRANSMISSION_SCATTER_MAP) || defined(USE_TRANSMISSION_SCATTER_ANISOTROPY_MAP)\n#define USE_MAP\n#endif\nvarying vec2 vUv;\nfloat linear_to_srgb(in float v) {\n    float o = v;\n    if (o <= 0.0031308) {\n        o *= 12.92;\n    } else {\n        o = 1.055 * pow(o, 1.0 / 2.4) - 0.055;\n    }\n    return o;\n}\nvec3 linear_to_srgb(in vec3 v) {\n    vec3 o = v;\n    o.r = linear_to_srgb(o.r);\n    o.g = linear_to_srgb(o.g);\n    o.b = linear_to_srgb(o.b);\n    return o;\n}\nfloat srgb_to_linear(in float v) {\n    float o = v;\n    if (o <= 0.04045) {\n        o *= 0.07739938;\n    } else {\n        o = pow(abs((o + 0.055) * 0.947867298), 2.4);\n    }\n    return o;\n}\nvec3 srgb_to_linear(in vec3 v) {\n    vec3 o = v;\n    o.r = srgb_to_linear(o.r);\n    o.g = srgb_to_linear(o.g);\n    o.b = srgb_to_linear(o.b);\n    return o;\n}\n#if defined(USE_ENVMAP)\nuniform samplerCube envMap;\nuniform float envMapExposure;\nuniform int envMapMipLevels;\n#if defined(USE_IRRADIANCEMAP)\nuniform samplerCube irradianceMap;\n#endif\n#endif\nvarying vec3 vWorldNormal;\n#ifndef _LMVWEBGL2_\nint clamp(int x, int minVal, int maxVal) {\n    if (x < minVal) return minVal;\n    if (x > maxVal) return maxVal;\n    return x;\n}\n#endif\nvec3 sample_map(vec2 st, sampler2D map, int invert, int encoding, float valueScale) {\n    vec3 raw = texture2D(map, st).rgb;\n    if (encoding == 0) {\n        raw = srgb_to_linear(raw);\n    }\n    if (invert == 1) {\n        raw = vec3(1.0) - raw;\n    }\n    return raw * valueScale;\n}\nmat3 two_vector(in vec3 N, in vec3 Np) {\n    vec3 v = cross(N, Np);\n    float c = dot(N, Np);\n    if (abs(c) > 0.999) {\n        return sign(c) * mat3(1.0);\n    }\n    mat3 vX = mat3(0.0, v.z, -v.y, -v.z, 0.0, v.x, v.y, -v.x, 0.0);\n    return mat3(1.0) + vX + (vX * vX) * 1.0 / (1.0 - c);\n}\nvoid transform_basis(inout vec3 T, inout vec3 B, inout vec3 N, in vec2 uv, in sampler2D map, in mat3 texMatrix, in int invert, in int encoding, in float valueScale, in int isHeight, in vec2 heightScale) {\n    vec2 st = (texMatrix * vec3(uv, 1.0)).xy;\n    vec3 Np = vec3(0.0, 0.0, 1.0);\n    mat3 TBN = mat3(T, B, N);\n    if (isHeight == 1) {\n        vec2 offset = fwidth(st);\n        float h0 = sample_map(st, map, invert, encoding, valueScale).x;\n        float hx = sample_map(st + vec2(offset.x, 0.0), map, invert, encoding, valueScale).x;\n        float hy = sample_map(st + vec2(0.0, offset.y), map, invert, encoding, valueScale).x;\n        vec2 diff = vec2(h0 - hx, h0 - hy) / offset;\n        Np = normalize(vec3(diff.x * heightScale.x, diff.y * heightScale.y, 1.0));\n        Np = normalize(inverse(texMatrix) * Np);\n    } else {\n        Np = normalize(2.0 * sample_map(st, map, invert, encoding, valueScale).xyz - 1.0);\n    }\n    N = normalize(TBN * Np);\n    B = cross(N, T);\n    T = cross(TBN[1], N);\n}\nvec3 sample_irradiance_map(vec3 dir) {\n    return applyEnvShadow(sampleIrradianceMap(dir, irradianceMap, envMapExposure), dir);\n}\nvec3 sample_radiance_map(vec3 dir, float lod) {\n    vec3 direction = adjustLookupVector(dir);\n#ifdef HAVE_TEXTURE_LOD\n    vec4 val = textureCubeLodEXT(envMap, direction, lod);\n#else\n    vec4 val = textureCube(envMap, direction, lod);\n#endif\n#ifdef ENV_GAMMA\n    return GammaDecode(val, envMapExposure);\n#elif defined(ENV_RGBM)\n    return RGBMDecode(val, envMapExposure);\n#else\n#ifdef GAMMA_INPUT\n    return val.xyz * val.xyz;\n#else\n    return val.xyz;\n#endif\n#endif\n}\n#include<hatch_pattern>\nfloat read_sheen_albedo_table(vec2 uv) {\n    vec4 tex = texture2D(u_sheenAlbedo, vec2(uv.x, 1.0 - uv.y));\n    float adj = 256.0 / 255.0;\n    float val = dot(tex, vec4(adj, adj / 255.0, adj / 65025.0, adj / 16581375.0));\n    return val * SHEEN_ALBEDO_TABLE_RANGE + SHEEN_ALBEDO_TABLE_MIN;\n}\n#if MAX_LIGHTS > 0\nfloat calc_light_attenuation(float distance, float cutoffDistance, float decayExp) {\n    if (decayExp > 0.0) {\n        return pow(clamp(1.0 - distance / cutoffDistance, 0.0, 1.0), decayExp);\n    }\n    return 1.0;\n}\n#if MAX_POINT_LIGHTS > 0\nuniform vec3  pointLightColor[MAX_POINT_LIGHTS];\nuniform vec3  pointLightPosition[MAX_POINT_LIGHTS];\nuniform float pointLightDistance[MAX_POINT_LIGHTS];\nuniform float pointLightDecay[MAX_POINT_LIGHTS];\nvoid sample_point_light(int idx, vec3 position, out lightshader result) {\n    for (int i = 0; i < MAX_POINT_LIGHTS; ++i) {\n        if (i == idx) {\n            vec3 lightWorldPosition = pointLightPosition[i];\n            vec3 lightWorldVector = lightWorldPosition - position;\n            float attenuation = calc_light_attenuation(length(lightWorldVector), pointLightDistance[i], pointLightDecay[i]);\n            result.direction = normalize(lightWorldVector);\n            result.intensity = pointLightColor[i] * attenuation;\n            return;\n        }\n    }\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3  spotLightColor[MAX_SPOT_LIGHTS];\nuniform vec3  spotLightPosition[MAX_SPOT_LIGHTS];\nuniform vec3  spotLightDirection[MAX_SPOT_LIGHTS];\nuniform float spotLightAngleCos[MAX_SPOT_LIGHTS];\nuniform float spotLightExponent[MAX_SPOT_LIGHTS];\nuniform float spotLightDistance[MAX_SPOT_LIGHTS];\nuniform float spotLightDecay[MAX_SPOT_LIGHTS];\nvoid sample_spot_light(int idx, vec3 position, out lightshader result) {\n    for (int i = 0; i < MAX_SPOT_LIGHTS; ++i) {\n        if (i == idx) {\n            vec3 lightWorldPosition = spotLightPosition[i];\n            vec3 lightWorldVector = lightWorldPosition + position;\n            float attenuation = calc_light_attenuation(length(lightWorldVector), spotLightDistance[i], spotLightDecay[i]);\n            float spotEffect = dot(spotLightDirection[i], normalize(spotLightPosition[i] - position));\n            result.direction = normalize(lightWorldVector);\n            if (spotEffect > spotLightAngleCos[i]) {\n                spotEffect = max(pow(max(spotEffect, 0.0), spotLightExponent[i]), 0.0);\n                result.intensity = spotLightColor[i] * attenuation * spotEffect;\n            } else {\n                result.intensity = vec3(0.0);\n            }\n            return;\n        }\n    }\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\nvoid sample_dir_light(int idx, vec3 position, out lightshader result) {\n    for (int i = 0; i < MAX_DIR_LIGHTS; ++i) {\n        if (i == idx) {\n            vec3 lightWorldVector = directionalLightDirection[i];\n            result.direction = normalize(lightWorldVector);\n            result.intensity = directionalLightColor[i];\n            return;\n        }\n    }\n}\n#endif\nvoid sample_light(int idx, vec3 position, out lightshader result) {\n#if MAX_POINT_LIGHTS > 0\n    if (idx < MAX_POINT_LIGHTS) {\n        sample_point_light(idx, position, result);\n        return;\n    }\n#endif\n#if MAX_SPOT_LIGHTS > 0\n    if (idx < MAX_POINT_LIGHTS + MAX_SPOT_LIGHTS) {\n        sample_spot_light(idx - MAX_POINT_LIGHTS, position, result);\n        return;\n    }\n#endif\n#if MAX_DIR_LIGHTS > 0\n    if (idx < MAX_POINT_LIGHTS + MAX_SPOT_LIGHTS + MAX_DIR_LIGHTS) {\n        sample_dir_light(idx - (MAX_POINT_LIGHTS + MAX_SPOT_LIGHTS), position, result);\n        return;\n    }\n#endif\n    result.intensity = vec3(0.0);\n}\n#endif\n#inject<getters>\nvoid computeTangets(in vec3 pos, in vec2 uv, out vec3 T, out vec3 B) {\n    vec3 q0 = dFdx( pos );\n    vec3 q1 = dFdy( pos );\n    vec2 st0 = dFdx( uv );\n    vec2 st1 = dFdy( uv );\n    float scale = 1.0 / (st1.t * st0.s - st0.t * st1.s);\n    T = normalize((  q0 * st1.t - q1 * st0.t ) * scale );\n    B = normalize(( -q0 * st1.s + q1 * st0.s ) * scale );\n}\nfloat mx_square(float x) { return x*x; }\nvec2 mx_square(vec2 x) { return x*x; }\nvec3 mx_square(vec3 x) { return x*x; }\nvec4 mx_square(vec4 x) { return x*x; }\nfloat mx_pow5(float x) { return mx_square(mx_square(x)) * x; }\nfloat mx_max_component(vec2 v) { return max(v.x, v.y); }\nfloat mx_max_component(vec3 v) { return max(max(v.x, v.y), v.z); }\nfloat mx_max_component(vec4 v) { return max(max(max(v.x, v.y), v.z), v.w); }\nbool mx_is_tiny(float v) { return abs(v) < EPSILON; }\nbool mx_is_tiny(vec3 v) { return all(lessThan(abs(v), vec3(EPSILON))); }\nfloat mx_mix(float v00, float v01, float v10, float v11, float x, float y) {\n    float v0_ = mix(v00, v01, x);\n    float v1_ = mix(v10, v11, x);\n    return mix(v0_, v1_, y);\n}\n#ifdef USE_LMV_SAMPLING\nvec2 hammersley(int index, int envSamples) {\n    float u = (float(index) + 0.5) / float(SAMPLING_RANDOM_TABLE_SIZE);\n    const float v = 0.5;\n    float noise = texture2D(u_samplingRandomMap, vec2(u, v), 0.0).r;\n    return vec2(float(index/envSamples), noise);\n}\n#else\nfloat mx_golden_ratio_sequence(int i) {\n    return fract((float(i) + 1.0) * M_GOLDEN_RATIO);\n}\nvec2 mx_spherical_fibonacci(int i, int numSamples) {\n    return vec2((float(i) + 0.5) / float(numSamples), mx_golden_ratio_sequence(i));\n}\n#endif\nfloat mx_orennayar(vec3 L, vec3 V, vec3 N, float NdotL, float roughness) {\n    float LdotV = dot(L, V);\n    float NdotV = dot(N, V);\n    float t = LdotV - NdotL * NdotV;\n    t = t > 0.0 ? t / max(NdotL, NdotV) : 0.0;\n    float sigma2 = mx_square(roughness * PI);\n    float A = 1.0 - 0.5 * (sigma2 / (sigma2 + 0.33));\n    float B = 0.45 * sigma2 / (sigma2 + 0.09);\n    return A + B * t;\n}\nfloat mx_microfacet_ggx_NDF(vec3 X, vec3 Y, vec3 H, float NdotH, float alphaX, float alphaY) {\n    float XdotH = dot(X, H);\n    float YdotH = dot(Y, H);\n    float denom = mx_square(XdotH / alphaX) + mx_square(YdotH / alphaY) + mx_square(NdotH);\n    return 1.0 / (PI * alphaX * alphaY * mx_square(denom));\n}\nfloat mx_microfacet_ggx_PDF(vec3 X, vec3 Y, vec3 H, float NdotH, float LdotH, float alphaX, float alphaY) {\n    return mx_microfacet_ggx_NDF(X, Y, H, NdotH, alphaX, alphaY) * NdotH / (4.0 * LdotH);\n}\nvec3 mx_microfacet_ggx_IS(vec2 Xi, vec3 X, vec3 Y, vec3 N, float alphaX, float alphaY) {\n    float phi = 2.0 * PI * Xi.x;\n    float tanTheta = sqrt(Xi.y / (1.0 - Xi.y));\n    vec3 H = vec3(X * (tanTheta * alphaX * cos(phi)) +\n    Y * (tanTheta * alphaY * sin(phi)) +\n    N);\n    return normalize(H);\n}\nfloat mx_microfacet_ggx_G1(float cosTheta, float alpha) {\n    float cosTheta2 = cosTheta * cosTheta;\n    float tanTheta2 = (1.0 - cosTheta2) / cosTheta2;\n    return 2.0 / (1.0 + sqrt(1.0 + alpha * alpha * tanTheta2));\n}\nfloat mx_microfacet_ggx_smith_G(float NdotL, float NdotV, float alpha) {\n    return mx_microfacet_ggx_G1(NdotL, alpha) * mx_microfacet_ggx_G1(NdotV, alpha);\n}\nfloat mx_microfacet_sheen_NDF(float cosTheta, float roughness) {\n    float invRoughness = 1.0 / roughness;\n    float cos2 = cosTheta * cosTheta;\n    float sin2 = 1.0 - cos2;\n    return (2.0 + invRoughness) * pow(sin2, invRoughness * 0.5) / (2.0 * PI);\n}\nfloat mx_microfacet_sheen_albedo(float cosTheta, float roughness) {\n    return clamp(read_sheen_albedo_table(vec2(cosTheta, roughness)), 0.0, 1.0);\n}\nfloat mx_fresnel_schlick(float cosTheta, float F0, float F90, float exponent) {\n    float x = clamp(1.0 - cosTheta, 0.0, 1.0);\n    return mix(F0, F90, pow(x, exponent));\n}\nvec3 mx_fresnel_schlick(float cosTheta, vec3 F0, vec3 F90, float exponent) {\n    float x = clamp(1.0 - cosTheta, 0.0, 1.0);\n    return mix(F0, F90, pow(x, exponent));\n}\nvec3 mx_fresnel_schlick(float cosTheta, vec3 F0) {\n    if (cosTheta < 0.0) return vec3(1.0);\n    float x = 1.0 - cosTheta;\n    float x2 = x*x;\n    float x5 = x2*x2*x;\n    return F0 + (1.0 - F0) * x5;\n}\nfloat mx_fresnel_schlick(float cosTheta, float ior) {\n    if (cosTheta < 0.0) return 1.0;\n    float F0 = (ior - 1.0) / (ior + 1.0);\n    F0 *= F0;\n    float x = 1.0 - cosTheta;\n    float x2 = x*x;\n    float x5 = x2*x2*x;\n    return F0 + (1.0 - F0) * x5;\n}\nfloat mx_fresnel_schlick_roughness(float cosTheta, float ior, float roughness) {\n    cosTheta = abs(cosTheta);\n    float F0 = (ior - 1.0) / (ior + 1.0);\n    F0 *= F0;\n    float x = 1.0 - cosTheta;\n    float x2 = x*x;\n    float x5 = x2*x2*x;\n    return F0 + (max(1.0 - roughness, F0) - F0) * x5;\n}\nfloat mx_fresnel_dielectric(float cosTheta, float ior) {\n    if (cosTheta < 0.0) return 1.0;\n    float g =  ior*ior + cosTheta*cosTheta - 1.0;\n    if (g < 0.0) return 1.0;\n    g = sqrt(g);\n    float gmc = g - cosTheta;\n    float gpc = g + cosTheta;\n    float x = gmc / gpc;\n    float y = (gpc * cosTheta - 1.0) / (gmc * cosTheta + 1.0);\n    return 0.5 * x * x * (1.0 + y * y);\n}\nvec3 mx_fresnel_conductor(float cosTheta, vec3 n, vec3 k) {\n    float c2 = cosTheta*cosTheta;\n    vec3 n2_k2 = n*n + k*k;\n    vec3 nc2 = 2.0 * n * cosTheta;\n    vec3 rs_a = n2_k2 + c2;\n    vec3 rp_a = n2_k2 * c2 + 1.0;\n    vec3 rs = (rs_a - nc2) / (rs_a + nc2);\n    vec3 rp = (rp_a - nc2) / (rp_a + nc2);\n    return 0.5 * (rs + rp);\n}\nfloat mx_burley_diffuse(vec3 L, vec3 V, vec3 N, float NdotL, float roughness) {\n    vec3 H = normalize(L + V);\n    float LdotH = max(dot(L, H), 0.0);\n    float NdotV = max(dot(N, V), 0.0);\n    float F90 = 0.5 + (2.0 * roughness * mx_square(LdotH));\n    float refL = mx_fresnel_schlick(NdotL, 1.0, F90, 5.0);\n    float refV = mx_fresnel_schlick(NdotV, 1.0, F90, 5.0);\n    return refL * refV * M_PI_INV;\n}\nfloat mx_burley_directional_albedo(vec3 V, vec3 N, float roughness) {\n    float x = dot(N, V);\n    float fit0 = 0.97619 - 0.488095 * mx_pow5(1.0 - x);\n    float fit1 = 1.55754 + (-2.02221 + (2.56283 - 1.06244 * x) * x) * x;\n    return mix(fit0, fit1, roughness);\n}\nfloat mx_compute_lod(vec3 dir, float pdf, int maxMipLevel, int envSamples) {\n    const float MIP_LEVEL_OFFSET = 1.5;\n    float effectiveMaxMipLevel = float(maxMipLevel) - MIP_LEVEL_OFFSET;\n    float distortion = sqrt(1.0 - mx_square(dir.y));\n    return max(effectiveMaxMipLevel - 0.5 * log2(float(envSamples) * pdf * distortion), 0.0);\n}\nvec3 mx_environment_radiance(vec3 N, vec3 V, vec3 X, vec2 roughness, int distribution) {\n    vec3 Y = normalize(cross(N, X));\n    X = cross(Y, N);\n    float NdotV = clamp(dot(N, V), 1e-8, 1.0);\n    vec3 radiance = vec3(0.0);\n    for (int i = 0; i < NUM_SAMPLES; i++) {\n#ifdef USE_LMV_SAMPLING\n        vec2 Xi = hammersley(i, NUM_SAMPLES);\n#else\n        vec2 Xi = mx_spherical_fibonacci(i, NUM_SAMPLES);\n#endif\n        vec3 H = mx_microfacet_ggx_IS(Xi, X, Y, N, roughness.x, roughness.y);\n        vec3 L = -reflect(V, H);\n        float NdotH = clamp(dot(N, H), 1e-8, 1.0);\n        float NdotL = clamp(dot(N, L), 1e-8, 1.0);\n        float VdotH = clamp(dot(V, H), 1e-8, 1.0);\n        float LdotH = VdotH;\n        float pdf = mx_microfacet_ggx_PDF(X, Y, H, NdotH, LdotH, roughness.x, roughness.y);\n        float lod = mx_compute_lod(L, pdf, envMapMipLevels, NUM_SAMPLES);\n        vec3 sampleColor = sample_radiance_map(L, lod);\n        float G = mx_microfacet_ggx_smith_G(NdotL, NdotV, max(roughness.x, roughness.y));\n        const float F = 1.0;\n        radiance += sampleColor * G * F * VdotH / (NdotV * NdotH);\n    }\n    radiance /= float(NUM_SAMPLES);\n    return radiance;\n}\nvec3 mx_environment_irradiance(vec3 N) {\n    return sample_irradiance_map(N);\n}\nvoid mx_luminance_color3(vec3 _in, vec3 lumacoeffs, out vec3 result) {\n    result = vec3(dot(_in, lumacoeffs));\n}\nvoid mx_roughness_anisotropy(float roughness, float anisotropy, out vec2 result) {\n    float roughness_sqr = clamp(roughness*roughness, EPSILON, 1.0);\n    if (anisotropy > 0.0) {\n        float aspect = sqrt(1.0 - clamp(anisotropy, 0.0, 0.98));\n        result.x = min(roughness_sqr / aspect, 1.0);\n        result.y = roughness_sqr * aspect;\n    } else {\n        result.x = roughness_sqr;\n        result.y = roughness_sqr;\n    }\n}\nvoid mx_fresnel_ior(float ior, vec3 N, vec3 V, out float result) {\n    float cosTheta = dot(N, -V);\n    result = mx_fresnel_dielectric(cosTheta, ior);\n}\nmat4 mx_rotationMatrix(vec3 axis, float angle) {\n    axis = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                0.0,                                0.0,                                0.0,                                1.0);\n}\nvoid mx_rotate_vector3(vec3 v, float amount, vec3 axis, out vec3 result) {\n    float rotationRadians = radians(amount);\n    mat4 m = mx_rotationMatrix(axis, rotationRadians);\n    result = (m * vec4(v, 1.0)).xyz;\n}\nvoid mx_complex_to_artistic_ior(vec3 ior, vec3 extinction, out vec3 reflectivity, out vec3 edge_color) {\n    vec3 nm1 = ior - 1.0;\n    vec3 np1 = ior + 1.0;\n    vec3 k2  = extinction * extinction;\n    vec3 r = (nm1*nm1 + k2) / (np1*np1 + k2);\n    reflectivity = r;\n    vec3 r_sqrt = sqrt(r);\n    vec3 n_min = (1.0 - r) / (1.0 + r);\n    vec3 n_max = (1.0 + r_sqrt) / (1.0 - r_sqrt);\n    edge_color = (n_max - ior) / (n_max - n_min);\n}\nvoid mx_artistic_to_complex_ior(vec3 reflectivity, vec3 edge_color, out vec3 ior, out vec3 extinction) {\n    vec3 r = clamp(reflectivity, 0.0, 0.99);\n    vec3 r_sqrt = sqrt(r);\n    vec3 n_min = (1.0 - r) / (1.0 + r);\n    vec3 n_max = (1.0 + r_sqrt) / (1.0 - r_sqrt);\n    ior = mix(n_max, n_min, edge_color);\n    vec3 np1 = ior + 1.0;\n    vec3 nm1 = ior - 1.0;\n    vec3 k2 = (np1*np1 * r - nm1*nm1) / (1.0 - r);\n    k2 = max(k2, 0.0);\n    extinction = sqrt(k2);\n}\nvoid mx_conductor_brdf_reflection(vec3 L, vec3 V, float weight, vec3 reflectivity, vec3 edge_color, vec2 roughness, vec3 N, vec3 X, int distribution, out BSDF result) {\n    if (weight < EPSILON) {\n        result = BSDF(0.0);\n        return;\n    }\n    float NdotL = dot(N, L);\n    float NdotV = dot(N, V);\n    if (NdotL <= 0.0 || NdotV <= 0.0) {\n        result = BSDF(0.0);\n        return;\n    }\n    vec3 Y = normalize(cross(N, X));\n    vec3 H = normalize(L + V);\n    float NdotH = dot(N, H);\n    float D = mx_microfacet_ggx_NDF(X, Y, H, NdotH, roughness.x, roughness.y);\n    float G = mx_microfacet_ggx_smith_G(NdotL, NdotV, max(roughness.x, roughness.y));\n    vec3 ior_n, ior_k;\n    mx_artistic_to_complex_ior(reflectivity, edge_color, ior_n, ior_k);\n    float VdotH = dot(V, H);\n    vec3 F = mx_fresnel_conductor(VdotH, ior_n, ior_k);\n    F *= weight;\n    result = F * D * G / (4.0 * NdotV);\n}\nvoid mx_conductor_brdf_indirect(vec3 V, float weight, vec3 reflectivity, vec3 edge_color, vec2 roughness, vec3 N, vec3 Li, out vec3 result) {\n    if (weight < EPSILON) {\n        result = vec3(0.0);\n        return;\n    }\n    vec3 ior_n, ior_k;\n    mx_artistic_to_complex_ior(reflectivity, edge_color, ior_n, ior_k);\n    vec3 F = mx_fresnel_conductor(dot(N, V), ior_n, ior_k);\n    F *= weight;\n    result = Li * F;\n}\nvoid mx_dielectric_btdf_transmission(vec3 V, float weight, vec3 tint, float ior, vec2 roughness, vec3 normal, vec3 tangent, int distribution, VDF interior, out BSDF result) {\n    result = tint * weight;\n}\nvoid mx_diffuse_btdf_reflection(vec3 L, vec3 V, float weight, vec3 color, vec3 normal, out BSDF result) {\n    float NdotL = dot(L, -normal);\n    if (NdotL <= 0.0 || weight < EPSILON) {\n        result = BSDF(0.0);\n        return;\n    }\n    result = color * weight * NdotL * M_PI_INV;\n}\nvoid mx_diffuse_btdf_indirect(vec3 V, float weight, vec3 color, vec3 normal, out vec3 result) {\n    if (weight < EPSILON) {\n        result = vec3(0.0);\n        return;\n    }\n    vec3 Li = mx_environment_irradiance(-normal);\n    result = Li * color * weight;\n}\nvoid mx_subsurface_brdf_reflection(vec3 L, vec3 V, float weight, vec3 color, vec3 radius, float anisotropy, vec3 normal, out BSDF result) {\n    float NdotL = dot(L, -normal);\n    if (NdotL <= 0.0 || weight < EPSILON) {\n        result = BSDF(0.0);\n        return;\n    }\n    result = color * weight * NdotL * M_PI_INV;\n}\nvoid mx_subsurface_brdf_indirect(vec3 V, float weight, vec3 color, vec3 radius, float anisotropy, vec3 normal, out vec3 result) {\n    if (weight < EPSILON) {\n        result = vec3(0.0);\n        return;\n    }\n    vec3 Li = mx_environment_irradiance(-normal);\n    result = Li * color * weight;\n}\nvoid mx_diffuse_brdf_reflection(vec3 L, vec3 V, float weight, vec3 color, float roughness, vec3 normal, out BSDF result) {\n    float NdotL = dot(L, normal);\n    if (NdotL <= 0.0 || weight < EPSILON) {\n        result = BSDF(0.0);\n        return;\n    }\n    result = color * weight * NdotL * M_PI_INV;\n    if (roughness > 0.0) {\n        result *= mx_orennayar(L, V, normal, NdotL, roughness);\n    }\n}\nvoid mx_diffuse_brdf_indirect(vec3 V, float weight, vec3 color, float roughness, vec3 normal, out vec3 result) {\n    if (weight < EPSILON) {\n        result = vec3(0.0);\n        return;\n    }\n    vec3 Li = mx_environment_irradiance(normal);\n    result = Li * color * weight;\n}\nvoid mx_mix_bsdf_reflection(vec3 L, vec3 V, BSDF fg, BSDF bg, float w, out BSDF result) {\n    result = mix(bg, fg, clamp(w, 0.0, 1.0));\n}\nvoid mx_mix_bsdf_transmission(vec3 V, BSDF fg, BSDF bg, float w, out BSDF result) {\n    result = mix(bg, fg, clamp(w, 0.0, 1.0));\n}\nvoid mx_mix_bsdf_indirect(vec3 V, vec3 fg, vec3 bg, float w, out vec3 result) {\n    result = mix(bg, fg, clamp(w, 0.0, 1.0));\n}\nvoid mx_sheen_brdf_reflection(vec3 L, vec3 V, float weight, vec3 color, float roughness, vec3 N, BSDF base, out BSDF result) {\n    if (weight < EPSILON) {\n        result = base;\n        return;\n    }\n    float NdotL = dot(N, L);\n    float NdotV = dot(N, V);\n    if (NdotL <= 0.0 || NdotV <= 0.0) {\n        result = base;\n        return;\n    }\n    vec3 H = normalize(L + V);\n    float NdotH = dot(N, H);\n    float alpha = clamp(roughness, EPSILON, 1.0);\n    float D = mx_microfacet_sheen_NDF(NdotH, alpha);\n    vec3 F = color * weight;\n    vec3 fr = D * F / (4.0 * (NdotL + NdotV - NdotL*NdotV));\n    float albedo = weight * mx_microfacet_sheen_albedo(NdotV, alpha);\n    result = fr * NdotL + base * (1.0 - albedo);\n}\nvoid mx_sheen_brdf_indirect(vec3 V, float weight, vec3 color, float roughness, vec3 N, BSDF base, out vec3 result) {\n    if (weight <= 0.0) {\n        result = base;\n        return;\n    }\n    float NdotV = abs(dot(N, V));\n    float alpha = clamp(roughness, EPSILON, 1.0);\n    float albedo = weight * mx_microfacet_sheen_albedo(NdotV, alpha);\n    vec3 Li = mx_environment_irradiance(N);\n    result = Li * color * albedo + base * (1.0 - albedo);\n}\nvoid mx_uniform_edf(vec3 N, vec3 L, vec3 color, out EDF result) {\n    result = color;\n}\nvoid mx_dielectric_brdf_reflection(vec3 L, vec3 V, float weight, vec3 tint, float ior, vec2 roughness, vec3 N, vec3 X, int distribution, BSDF base, out BSDF result) {\n    if (weight < EPSILON) {\n        result = base;\n        return;\n    }\n    float NdotL = dot(N, L);\n    float NdotV = dot(N, V);\n    if (NdotL <= 0.0 || NdotV <= 0.0) {\n        result = base;\n        return;\n    }\n    vec3 Y = normalize(cross(N, X));\n    vec3 H = normalize(L + V);\n    float NdotH = dot(N, H);\n    float D = mx_microfacet_ggx_NDF(X, Y, H, NdotH, roughness.x, roughness.y);\n    float G = mx_microfacet_ggx_smith_G(NdotL, NdotV, max(roughness.x, roughness.y));\n    float VdotH = dot(V, H);\n    float F = mx_fresnel_schlick(VdotH, ior);\n    F *= weight;\n    result = tint * D * G * F / (4.0 * NdotV) + base * (1.0 - F);\n}\nvoid mx_dielectric_brdf_transmission(vec3 V, float weight, vec3 tint, float ior, vec2 roughness, vec3 N, vec3 X, int distribution, BSDF base, out BSDF result) {\n    if (weight < EPSILON) {\n        result = base;\n        return;\n    }\n    float NdotV = abs(dot(N, V));\n    float F = mx_fresnel_schlick(NdotV, ior);\n    F *= weight;\n    result = base * (1.0 - F);\n}\nvoid mx_dielectric_brdf_indirect(vec3 V, float weight, vec3 tint, float ior, vec2 roughness, vec3 N, vec3 Li, BSDF base, out BSDF result) {\n    if (weight < EPSILON) {\n        result = base;\n        return;\n    }\n    float NdotV = dot(N, V);\n    float F = mx_fresnel_schlick_roughness(NdotV, ior, max(roughness.x, roughness.y));\n    F *= weight;\n    result = Li * tint * F + base * (1.0 - F);\n}\nvoid mx_multiply_bsdf_color_reflection(vec3 L, vec3 V, BSDF in1, vec3 in2, out BSDF result) {\n    result = in1 * clamp(in2, 0.0, 1.0);\n}\nvoid mx_multiply_bsdf_color_transmission(vec3 V, BSDF in1, vec3 in2, out BSDF result) {\n    result = in1 * clamp(in2, 0.0, 1.0);\n}\nvoid mx_multiply_bsdf_color_indirect(vec3 V, vec3 in1, vec3 in2, out vec3 result) {\n    result = in1 * clamp(in2, 0.0, 1.0);\n}\nvoid IMPL_standard_surface_surfaceshader(float base, vec3 base_color, float diffuse_roughness, float metalness, float specular, vec3 specular_color, float specular_roughness, float specular_IOR, float specular_anisotropy, float specular_rotation, float transmission, vec3 transmission_color, float transmission_depth, vec3 transmission_scatter, float transmission_scatter_anisotropy, float transmission_dispersion, float transmission_extra_roughness, float subsurface, vec3 subsurface_color, vec3 subsurface_radius, float subsurface_scale, float subsurface_anisotropy, float sheen, vec3 sheen_color, float sheen_roughness, float coat, vec3 coat_color, float coat_roughness, float coat_anisotropy, float coat_rotation, float coat_IOR, vec3 coat_normal, float coat_affect_color, float coat_affect_roughness, float thin_film_thickness, float thin_film_IOR, float emission, vec3 emission_color, vec3 opacity, int thin_walled, vec3 normal, vec3 tangent, vec3 geomWorldPosition, vec3 geomWorldNormal, vec3 camWorldPosition, out surfaceshader out275) {\n    vec3 opacity_luminance_out = vec3(0.0);\n    const vec3 lum = vec3(0.272287, 0.674082, 0.053689);\n    mx_luminance_color3(opacity, lum, opacity_luminance_out);\n    vec3 emission_weight_out = emission_color * emission;\n    float subsurface_selector_out = float(thin_walled);\n    vec3 geomprop_Vworld_out = normalize(geomWorldPosition - camWorldPosition);\n    float coat_affect_roughness_multiply1_out = coat_affect_roughness * coat;\n    const float tangent_rotate_degree_in2_tmp = 360.0;\n    float tangent_rotate_degree_out = specular_rotation * tangent_rotate_degree_in2_tmp;\n    vec3 metal_edgecolor_out = specular_color * specular;\n    vec3 subsurface_radius_vector_out = vec3(subsurface_radius.x, subsurface_radius.y, subsurface_radius.z);\n    vec3 metal_reflectivity_out = base_color * base;\n    const float coat_tangent_rotate_degree_in2_tmp = 360.0;\n    float coat_tangent_rotate_degree_out = coat_rotation * coat_tangent_rotate_degree_in2_tmp;\n    float coat_clamped_out = clamp(coat, 0.0, 1.0);\n    vec3 coat_attenuation_out = mix(vec3(1.0), coat_color, coat);\n    vec2 coat_roughness_out = vec2(0.0);\n    mx_roughness_anisotropy(coat_roughness, coat_anisotropy, coat_roughness_out);\n    float coat_fresnel_out = 0.0;\n    mx_fresnel_ior(coat_IOR, coat_normal, geomprop_Vworld_out, coat_fresnel_out);\n    float coat_affect_roughness_multiply2_out = coat_affect_roughness_multiply1_out * coat_roughness;\n    vec3 tangent_rotate_out = vec3(0.0);\n    mx_rotate_vector3(tangent, tangent_rotate_degree_out, normal, tangent_rotate_out);\n    vec3 subsurface_radius_scaled_out = subsurface_radius_vector_out * subsurface_scale;\n    vec3 coat_tangent_rotate_out = vec3(0.0);\n    mx_rotate_vector3(tangent, coat_tangent_rotate_degree_out, coat_normal, coat_tangent_rotate_out);\n    float coat_gamma_multiply_out = coat_clamped_out * coat_affect_color;\n    float coat_fresnel_inv_out = 1.0 - coat_fresnel_out;\n    float coat_affected_roughness_out = mix(specular_roughness, 1.0, coat_affect_roughness_multiply2_out);\n    vec3 tangent_rotate_normalize_out = normalize(tangent_rotate_out);\n    vec3 coat_tangent_rotate_normalize_out = normalize(coat_tangent_rotate_out);\n    float coat_gamma_out = coat_gamma_multiply_out + 1.0;\n    vec3 coat_color_fresnel_out = coat_color * coat_fresnel_inv_out;\n    vec2 main_roughness_out = vec2(0.0);\n    mx_roughness_anisotropy(coat_affected_roughness_out, specular_anisotropy, main_roughness_out);\n    vec3 main_tangent_out = vec3(0.0);\n    if (specular_anisotropy > 0.0) {\n        main_tangent_out = tangent_rotate_normalize_out;\n    } else {\n        main_tangent_out = tangent;\n    }\n    vec3 coat_tangent_out = vec3(0.0);\n    if (coat_anisotropy > 0.0) {\n        coat_tangent_out = coat_tangent_rotate_normalize_out;\n    } else {\n        coat_tangent_out = tangent;\n    }\n    vec3 coat_affected_subsurface_color_out = pow(subsurface_color, vec3(coat_gamma_out));\n    vec3 coat_affected_diffuse_color_out = pow(base_color, vec3(coat_gamma_out));\n    vec3 coat_emission_attenuation_out = mix(vec3(1.0), coat_color_fresnel_out, coat);\n    vec3 emission_weight_attenuated_out = emission_weight_out * coat_emission_attenuation_out;\n    surfaceshader standard_surface_constructor_out = surfaceshader(vec3(0.0), vec3(0.0));\n    {\n        float surfaceOpacity = opacity_luminance_out.x;\n        if (surfaceOpacity < 0.001) discard;\n        vec3 N = normalize(geomWorldNormal);\n        vec3 V = normalize(camWorldPosition - geomWorldPosition);\n        lightshader lightShader;\n#if MAX_LIGHTS > 0\n        for (int lightIdx = 0; lightIdx < MAX_LIGHTS; ++lightIdx) {\n            sample_light(lightIdx, geomWorldPosition, lightShader);\n            vec3 L = lightShader.direction;\n            BSDF transmission_bsdf_out = BSDF(0.0);\n            BSDF metal_bsdf_out = BSDF(0.0);\n            mx_conductor_brdf_reflection(L, V, 1.0, metal_reflectivity_out, metal_edgecolor_out, main_roughness_out, normal, main_tangent_out, 0, metal_bsdf_out);\n            BSDF translucent_bsdf_out = BSDF(0.0);\n            mx_diffuse_btdf_reflection(L, V, 1.0, coat_affected_subsurface_color_out, normal, translucent_bsdf_out);\n            BSDF subsurface_bsdf_out = BSDF(0.0);\n            mx_subsurface_brdf_reflection(L, V, 1.0, coat_affected_subsurface_color_out, subsurface_radius_scaled_out, subsurface_anisotropy, normal, subsurface_bsdf_out);\n            BSDF diffuse_bsdf_out = BSDF(0.0);\n            mx_diffuse_brdf_reflection(L, V, base, coat_affected_diffuse_color_out, diffuse_roughness, normal, diffuse_bsdf_out);\n            BSDF selected_subsurface_bsdf_out = BSDF(0.0);\n            mx_mix_bsdf_reflection(L, V, translucent_bsdf_out, subsurface_bsdf_out, subsurface_selector_out, selected_subsurface_bsdf_out);\n            BSDF sheen_bsdf_out = BSDF(0.0);\n            mx_sheen_brdf_reflection(L, V, sheen, sheen_color, sheen_roughness, normal, diffuse_bsdf_out, sheen_bsdf_out);\n            BSDF subsurface_mix_out = BSDF(0.0);\n            mx_mix_bsdf_reflection(L, V, selected_subsurface_bsdf_out, sheen_bsdf_out, subsurface, subsurface_mix_out);\n            BSDF transmission_mix_out = BSDF(0.0);\n            mx_mix_bsdf_reflection(L, V, transmission_bsdf_out, subsurface_mix_out, transmission, transmission_mix_out);\n            BSDF specular_bsdf_out = BSDF(0.0);\n            mx_dielectric_brdf_reflection(L, V, specular, specular_color, specular_IOR, main_roughness_out, normal, main_tangent_out, 0, transmission_mix_out, specular_bsdf_out);\n            BSDF metalness_mix_out = BSDF(0.0);\n            mx_mix_bsdf_reflection(L, V, metal_bsdf_out, specular_bsdf_out, metalness, metalness_mix_out);\n            BSDF metalness_mix_attenuated_out = BSDF(0.0);\n            mx_multiply_bsdf_color_reflection(L, V, metalness_mix_out, coat_attenuation_out, metalness_mix_attenuated_out);\n            BSDF coat_bsdf_out = BSDF(0.0);\n            mx_dielectric_brdf_reflection(L, V, coat, vec3(1.0), coat_IOR, coat_roughness_out, coat_normal, coat_tangent_out, 0, metalness_mix_attenuated_out, coat_bsdf_out);\n            standard_surface_constructor_out.color += lightShader.intensity * coat_bsdf_out;\n        }\n#endif\n        {\n            EDF emission_edf_out = EDF(0.0);\n            mx_uniform_edf(N, V, emission_weight_attenuated_out, emission_edf_out);\n            standard_surface_constructor_out.color += emission_edf_out;\n        }\n        {\n            BSDF transmission_bsdf_out = BSDF(0.0);\n            BSDF metal_bsdf_out = BSDF(0.0);\n            vec3 Li = mx_environment_radiance(normal, V, main_tangent_out, main_roughness_out, 0);\n            mx_conductor_brdf_indirect(V, 1.0, metal_reflectivity_out, metal_edgecolor_out, main_roughness_out, normal, Li, metal_bsdf_out);\n            BSDF translucent_bsdf_out = BSDF(0.0);\n            mx_diffuse_btdf_indirect(V, 1.0, coat_affected_subsurface_color_out, normal, translucent_bsdf_out);\n            BSDF subsurface_bsdf_out = BSDF(0.0);\n            mx_subsurface_brdf_indirect(V, 1.0, coat_affected_subsurface_color_out, subsurface_radius_scaled_out, subsurface_anisotropy, normal, subsurface_bsdf_out);\n            BSDF diffuse_bsdf_out = BSDF(0.0);\n            mx_diffuse_brdf_indirect(V, base, coat_affected_diffuse_color_out, diffuse_roughness, normal, diffuse_bsdf_out);\n            BSDF selected_subsurface_bsdf_out = BSDF(0.0);\n            mx_mix_bsdf_indirect(V, translucent_bsdf_out, subsurface_bsdf_out, subsurface_selector_out, selected_subsurface_bsdf_out);\n            BSDF sheen_bsdf_out = BSDF(0.0);\n            mx_sheen_brdf_indirect(V, sheen, sheen_color, sheen_roughness, normal, diffuse_bsdf_out, sheen_bsdf_out);\n            BSDF subsurface_mix_out = BSDF(0.0);\n            mx_mix_bsdf_indirect(V, selected_subsurface_bsdf_out, sheen_bsdf_out, subsurface, subsurface_mix_out);\n            BSDF transmission_mix_out = BSDF(0.0);\n            mx_mix_bsdf_indirect(V, transmission_bsdf_out, subsurface_mix_out, transmission, transmission_mix_out);\n            BSDF specular_bsdf_out = BSDF(0.0);\n            mx_dielectric_brdf_indirect(V, specular, specular_color, specular_IOR, main_roughness_out, normal, Li, transmission_mix_out, specular_bsdf_out);\n            BSDF metalness_mix_out = BSDF(0.0);\n            mx_mix_bsdf_indirect(V, metal_bsdf_out, specular_bsdf_out, metalness, metalness_mix_out);\n            BSDF metalness_mix_attenuated_out = BSDF(0.0);\n            mx_multiply_bsdf_color_indirect(V, metalness_mix_out, coat_attenuation_out, metalness_mix_attenuated_out);\n            BSDF coat_bsdf_out = BSDF(0.0);\n            if (coat > EPSILON && (normal != coat_normal || main_tangent_out != coat_tangent_out || main_roughness_out != coat_roughness_out)) {\n                Li = mx_environment_radiance(coat_normal, V, coat_tangent_out, coat_roughness_out, 0);\n            }\n            mx_dielectric_brdf_indirect(V, coat, vec3(1.0), coat_IOR, coat_roughness_out, coat_normal, Li, metalness_mix_attenuated_out, coat_bsdf_out);\n            standard_surface_constructor_out.color += coat_bsdf_out;\n        }\n        {\n            BSDF transmission_bsdf_out = BSDF(0.0);\n            mx_dielectric_btdf_transmission(V, 1.0, transmission_color, specular_IOR, main_roughness_out, normal, main_tangent_out, 0, VDF(vec3(0.0),vec3(0.0)), transmission_bsdf_out);\n            BSDF metal_bsdf_out = BSDF(0.0);\n            BSDF translucent_bsdf_out = BSDF(0.0);\n            BSDF subsurface_bsdf_out = BSDF(0.0);\n            BSDF diffuse_bsdf_out = BSDF(0.0);\n            BSDF selected_subsurface_bsdf_out = BSDF(0.0);\n            mx_mix_bsdf_transmission(V, translucent_bsdf_out, subsurface_bsdf_out, subsurface_selector_out, selected_subsurface_bsdf_out);\n            BSDF sheen_bsdf_out = BSDF(0.0);\n            BSDF subsurface_mix_out = BSDF(0.0);\n            mx_mix_bsdf_transmission(V, selected_subsurface_bsdf_out, sheen_bsdf_out, subsurface, subsurface_mix_out);\n            BSDF transmission_mix_out = BSDF(0.0);\n            mx_mix_bsdf_transmission(V, transmission_bsdf_out, subsurface_mix_out, transmission, transmission_mix_out);\n            BSDF specular_bsdf_out = BSDF(0.0);\n            mx_dielectric_brdf_transmission(V, specular, specular_color, specular_IOR, main_roughness_out, normal, main_tangent_out, 0, transmission_mix_out, specular_bsdf_out);\n            BSDF metalness_mix_out = BSDF(0.0);\n            mx_mix_bsdf_transmission(V, metal_bsdf_out, specular_bsdf_out, metalness, metalness_mix_out);\n            BSDF metalness_mix_attenuated_out = BSDF(0.0);\n            mx_multiply_bsdf_color_transmission(V, metalness_mix_out, coat_attenuation_out, metalness_mix_attenuated_out);\n            BSDF coat_bsdf_out = BSDF(0.0);\n            mx_dielectric_brdf_transmission(V, coat, vec3(1.0), coat_IOR, coat_roughness_out, coat_normal, coat_tangent_out, 0, metalness_mix_attenuated_out, coat_bsdf_out);\n            standard_surface_constructor_out.transparency = coat_bsdf_out;\n        }\n        standard_surface_constructor_out.color *= surfaceOpacity;\n        standard_surface_constructor_out.transparency = mix(vec3(1.0), standard_surface_constructor_out.transparency, surfaceOpacity);\n    }\n    out275 = standard_surface_constructor_out;\n}\n#include<cutplanes>\nvoid main() {\n#if NUM_CUTPLANES > 0\n    checkCutPlanes(vWorldPosition);\n#endif\n    vec2 uv = vec2(0.0);\n    uv = vUv;\n#ifdef USE_TILING\n    vec3 tilingXform = tilingTransform(vUv, tilingOverallTransform);\n    vec4 tilingMap = tilingMapText(TilingMap, TilingMap_texMatrix, tilingXform, uv2tile, tile2uv);\n    uv = tilingSubMaterialRelocate(tilingXform, tilingMap, tile2uv) + tileAlignOffset;\n#ifdef USE_TILING_NORMAL\n    vec2 uvNorm = uv;\n#endif\n#ifdef USE_TILING_RANDOM\n    uv = tilingRandom(uv, tilingMap, TilingRandomMap, TilingRandomMap_texMatrix, tilingRandomAxisS, tilingRandomAxisT, tilingRandomAlignmentOffset);\n#endif\n    uv = tilingTransform(uv, tilingUVTransform).xy;\n#endif\n#ifdef USE_TILING_NORMAL\n    tilingNormalOffset(TilingNormalMap, uvNorm, TilingNormalMap_texMatrix, TBN[0], TBN[1], TBN[2]);\n#endif\n    vec3 T, B;\n    computeTangets(vWorldPosition, uv, T, B);\n    mat3 TBN = get_TBN(vWorldNormal, T, B, uv);\n    mat3 coat_TBN = get_coat_TBN(vWorldNormal, T, B, uv);\n    surfaceshader SR_out = surfaceshader(vec3(0.0), vec3(0.0));\n    IMPL_standard_surface_surfaceshader(\n        get_base(uv),\n        get_base_color(uv),\n        get_diffuse_roughness(uv),\n        get_metalness(uv),\n        get_specular(uv),\n        get_specular_color(uv),\n        get_specular_roughness(uv),\n        get_specular_IOR(uv),\n        get_specular_anisotropy(uv),\n        get_specular_rotation(uv),\n        get_transmission(uv),\n        get_transmission_color(uv),\n        get_transmission_depth(uv),\n        get_transmission_scatter(uv),\n        get_transmission_scatter_anisotropy(uv),\n        get_transmission_dispersion(uv),\n        get_transmission_extra_roughness(uv),\n        get_subsurface(uv),\n        get_subsurface_color(uv),\n        get_subsurface_radius(uv),\n        get_subsurface_scale(uv),\n        get_subsurface_anisotropy(uv),\n        get_sheen(uv),\n        get_sheen_color(uv),\n        get_sheen_roughness(uv),\n        get_coat(uv),\n        get_coat_color(uv),\n        get_coat_roughness(uv),\n        get_coat_anisotropy(uv),\n        get_coat_rotation(uv),\n        get_coat_IOR(uv),\n        coat_TBN[2],\n        get_coat_affect_color(uv),\n        get_coat_affect_roughness(uv),\n        get_thin_film_thickness(uv),\n        get_thin_film_IOR(uv),\n        get_emission(uv),\n        get_emission_color(uv),\n        get_opacity(uv),\n        get_thin_walled(uv),\n        TBN[2],\n        TBN[0],\n        vWorldPosition,\n        vWorldNormal,\n        cameraPosition,\n        SR_out);\n    float outAlpha = clamp(1.0 - dot(SR_out.transparency, vec3(0.3333)), 0.0, 1.0);\n    gl_FragColor = vec4(SR_out.color, outAlpha);\n#ifdef MRT_NORMALS\n    vec3 geomNormal = vGeomNormal;\n#endif\n#if TONEMAP_OUTPUT == 1\n    gl_FragColor.rgb = toneMapCanonOGS_WithGamma_WithColorPerserving(exposureBias * gl_FragColor.rgb);\n#elif TONEMAP_OUTPUT == 2\n    gl_FragColor.rgb = toneMapCanonFilmic_WithGamma(exposureBias * gl_FragColor.rgb);\n#endif\n#ifdef USE_FOG\n    float fogdepth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep(fogNear, fogFar, fogdepth);\n    gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.a), fogFactor);\n#endif\n#ifdef USE_TILING\n    gl_FragColor.a *= tilingMap.a;\n#endif\n#include<theming_frag>\n#include<final_frag>\n}\n"},36:function(e,t,r){"use strict";function a(e,t,r){var a=r?" !== ":" === ",n=r?" || ":" && ",o=r?"!":"",i=r?"":"!";switch(e){case"null":return t+a+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+n+"typeof "+t+a+'"object"'+n+i+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+a+'"number"'+n+i+"("+t+" % 1)"+n+t+a+t+")";default:return"typeof "+t+a+'"'+e+'"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:a,checkDataTypes:function(e,t){switch(e.length){case 1:return a(e[0],t,!0);default:var r="",n=o(e);for(var i in n.array&&n.object&&(r=n.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete n.null,delete n.array,delete n.object),n.number&&delete n.integer,n)r+=(r?" && ":"")+a(i,t,!0);return r}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],a=0;a<t.length;a++){var o=t[a];(n[o]||"array"===e&&"array"===o)&&(r[r.length]=o)}if(r.length)return r}else{if(n[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:o,getProperty:l,escapeQuotes:c,equal:r(77),ucs2length:r(557),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},cleanUpCode:function(e){return e.replace(u,"").replace(f,"").replace(d,"if (!($1))")},finalCleanUpCode:function(e,t){var r=e.match(m);r&&2==r.length&&(e=t?e.replace(h,"").replace(v,"return data;"):e.replace(p,"").replace("return errors === 0;","validate.errors = null; return true;"));return(r=e.match(_))&&3===r.length?e.replace(g,""):e},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var a in e)if(a!=r&&t[a])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:y,getPathExpr:function(e,t,r,a){return x(e,r?"'/' + "+t+(a?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):a?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var a=y(r?"/"+P(t):l(t));return x(e,a)},getData:function(e,t,r){var a,n,o,i;if(""===e)return"rootData";if("/"==e[0]){if(!S.test(e))throw new Error("Invalid JSON-pointer: "+e);n=e,o="rootData"}else{if(!(i=e.match(b)))throw new Error("Invalid JSON-pointer: "+e);if(a=+i[1],"#"==(n=i[2])){if(a>=t)throw new Error("Cannot access property/index "+a+" levels up, current level is "+t);return r[t-a]}if(a>t)throw new Error("Cannot access data "+a+" levels up, current level is "+t);if(o="data"+(t-a||""),!n)return o}for(var s=o,c=n.split("/"),u=0;u<c.length;u++){var f=c[u];f&&(o+=l(E(f)),s+=" && "+o)}return s},unescapeFragment:function(e){return E(decodeURIComponent(e))},unescapeJsonPointer:E,escapeFragment:function(e){return encodeURIComponent(P(e))},escapeJsonPointer:P};var n=o(["string","number","integer","boolean","null"]);function o(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var i=/^[a-z$_][a-z$_0-9]*$/i,s=/'|\\/g;function l(e){return"number"==typeof e?"["+e+"]":i.test(e)?"."+e:"['"+c(e)+"']"}function c(e){return e.replace(s,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var u=/else\s*{\s*}/g,f=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,d=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var m=/[^v.]errors/g,p=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,h=/var errors = 0;|var vErrors = null;/g,v=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,_=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,g=/if \(rootData === undefined\) rootData = data;/;function y(e){return"'"+c(e)+"'"}var S=/^\/(?:[^~]|~0|~1)*$/,b=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function x(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function P(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function E(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},555:function(e,t,r){"use strict";var a=r(76),n=r(36),o=r(78),i=r(127),s=r(128),l=n.ucs2length,c=r(77),u=o.Validation;function f(e,t,r){var a=m.call(this,e,t,r);return a>=0?{index:a,compiling:!0}:(a=this._compilations.length,this._compilations[a]={schema:e,root:t,baseId:r},{index:a,compiling:!1})}function d(e,t,r){var a=m.call(this,e,t,r);a>=0&&this._compilations.splice(a,1)}function m(e,t,r){for(var a=0;a<this._compilations.length;a++){var n=this._compilations[a];if(n.schema==e&&n.root==t&&n.baseId==r)return a}return-1}function p(e,t){return"var pattern"+e+" = new RegExp("+n.toQuotedString(t[e])+");"}function h(e){return"var default"+e+" = defaults["+e+"];"}function v(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function _(e){return"var customRule"+e+" = customRules["+e+"];"}function g(e,t){if(!e.length)return"";for(var r="",a=0;a<e.length;a++)r+=t(a,e);return r}e.exports=function e(t,r,m,y){var S=this,b=this._opts,x=[void 0],P={},E=[],O={},w=[],T={},R=[];r=r||{schema:t,refVal:x,refs:P};var A=f.call(this,t,r,y),F=this._compilations[A.index];if(A.compiling)return F.callValidate=function e(){var t=F.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var N=this._formats,M=this.RULES;try{var I=L(t,r,m,y);F.validate=I;var D=F.callValidate;return D&&(D.schema=I.schema,D.errors=null,D.refs=I.refs,D.refVal=I.refVal,D.root=I.root,D.$async=I.$async,b.sourceCode&&(D.source=I.source)),I}finally{d.call(this,t,r,y)}function L(t,i,f,d){var m=!i||i&&i.schema==t;if(i.schema!=r.schema)return e.call(S,t,i,f,d);var y,O=!0===t.$async,T=s({isTop:!0,schema:t,isRoot:m,baseId:d,root:i,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:o.MissingRef,RULES:M,validate:s,util:n,resolve:a,resolveRef:U,usePattern:V,useDefault:j,useCustomRule:k,opts:b,formats:N,logger:S.logger,self:S});T=g(x,v)+g(E,p)+g(w,h)+g(R,_)+T,b.processCode&&(T=b.processCode(T));try{y=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",T)(S,M,N,r,x,w,R,c,l,u),x[0]=y}catch(e){throw S.logger.error("Error compiling schema, function code:",T),e}return y.schema=t,y.errors=null,y.refs=P,y.refVal=x,y.root=m?y:i,O&&(y.$async=!0),!0===b.sourceCode&&(y.source={code:T,patterns:E,defaults:w}),y}function U(t,n,o){n=a.url(t,n);var i,s,l=P[n];if(void 0!==l)return C(i=x[l],s="refVal["+l+"]");if(!o&&r.refs){var c=r.refs[n];if(void 0!==c)return C(i=r.refVal[c],s=$(n,i))}s=$(n);var u=a.call(S,L,r,n);if(void 0===u){var f=m&&m[n];f&&(u=a.inlineRef(f,b.inlineRefs)?f:e.call(S,f,r,m,t))}if(void 0!==u)return function(e,t){var r=P[e];x[r]=t}(n,u),C(u,s);!function(e){delete P[e]}(n)}function $(e,t){var r=x.length;return x[r]=t,P[e]=r,"refVal"+r}function C(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function V(e){var t=O[e];return void 0===t&&(t=O[e]=E.length,E[t]=e),"pattern"+t}function j(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return n.toQuotedString(e);case"object":if(null===e)return"null";var t=i(e),r=T[t];return void 0===r&&(r=T[t]=w.length,w[r]=e),"default"+r}}function k(e,t,r,a){if(!1!==S._opts.validateSchema){var n=e.definition.dependencies;if(n&&!n.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+n.join(","));var o=e.definition.validateSchema;if(o)if(!o(t)){var i="keyword schema is invalid: "+S.errorsText(o.errors);if("log"!=S._opts.validateSchema)throw new Error(i);S.logger.error(i)}}var s,l=e.definition.compile,c=e.definition.inline,u=e.definition.macro;if(l)s=l.call(S,t,r,a);else if(u)s=u.call(S,t,r,a),!1!==b.validateSchema&&S.validateSchema(s,!0);else if(c)s=c.call(S,a,e.keyword,t,r);else if(!(s=e.definition.validate))return;if(void 0===s)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var f=R.length;return R[f]=s,{code:"customRule"+f,validate:s}}}},556:function(e,t,r){
/** @license URI.js v4.2.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var a=t.length-1,n=1;n<a;++n)t[n]=t[n].slice(1,-1);return t[a]=t[a].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function a(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function n(e){return e.toUpperCase()}function o(e){var a=t("[0-9]","[A-Fa-f]"),n=r(r("%[EFef]"+a+"%"+a+a+"%"+a+a)+"|"+r("%[89A-Fa-f]"+a+"%"+a+a)+"|"+r("%"+a+a)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",i=t("[\\:\\/\\?\\#\\[\\]\\@]",o),s=e?"[\\uE000-\\uF8FF]":"[]",l=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),u=r(r(n+"|"+t(l,o,"[\\:]"))+"*"),f=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|[0-9]"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),d=r(f+"\\."+f+"\\."+f+"\\."+f),m=r(a+"{1,4}"),p=r(r(m+"\\:"+m)+"|"+d),h=r(r(m+"\\:")+"{6}"+p),v=r("\\:\\:"+r(m+"\\:")+"{5}"+p),_=r(r(m)+"?\\:\\:"+r(m+"\\:")+"{4}"+p),g=r(r(r(m+"\\:")+"{0,1}"+m)+"?\\:\\:"+r(m+"\\:")+"{3}"+p),y=r(r(r(m+"\\:")+"{0,2}"+m)+"?\\:\\:"+r(m+"\\:")+"{2}"+p),S=r(r(r(m+"\\:")+"{0,3}"+m)+"?\\:\\:"+m+"\\:"+p),b=r(r(r(m+"\\:")+"{0,4}"+m)+"?\\:\\:"+p),x=r(r(r(m+"\\:")+"{0,5}"+m)+"?\\:\\:"+m),P=r(r(r(m+"\\:")+"{0,6}"+m)+"?\\:\\:"),E=r([h,v,_,g,y,S,b,x,P].join("|")),O=r(r(l+"|"+n)+"+"),w=(r(E+"\\%25"+O),r(E+r("\\%25|\\%(?!"+a+"{2})")+O)),T=r("[vV]"+a+"+\\."+t(l,o,"[\\:]")+"+"),R=r("\\["+r(w+"|"+E+"|"+T)+"\\]"),A=r(r(n+"|"+t(l,o))+"*"),F=r(R+"|"+d+"(?!"+A+")|"+A),N=r("[0-9]*"),M=r(r(u+"@")+"?"+F+r("\\:"+N)+"?"),I=r(n+"|"+t(l,o,"[\\:\\@]")),D=r(I+"*"),L=r(I+"+"),U=r(r(n+"|"+t(l,o,"[\\@]"))+"+"),$=r(r("\\/"+D)+"*"),C=r("\\/"+r(L+$)+"?"),V=r(U+$),j=r(L+$),k="(?!"+I+")",B=(r($+"|"+C+"|"+V+"|"+j+"|"+k),r(r(I+"|"+t("[\\/\\?]",s))+"*")),H=r(r(I+"|[\\/\\?]")+"*"),z=r(r("\\/\\/"+M+$)+"|"+C+"|"+j+"|"+k),q=r(c+"\\:"+z+r("\\?"+B)+"?"+r("\\#"+H)+"?"),G=r(r("\\/\\/"+M+$)+"|"+C+"|"+V+"|"+k),X=r(G+r("\\?"+B)+"?"+r("\\#"+H)+"?");return r(q+"|"+X),r(c+"\\:"+z+r("\\?"+B)+"?"),r(r("\\/\\/("+r("("+u+")@")+"?("+F+")"+r("\\:("+N+")")+"?)")+"?("+$+"|"+C+"|"+j+"|"+k+")"),r("\\?("+B+")"),r("\\#("+H+")"),r(r("\\/\\/("+r("("+u+")@")+"?("+F+")"+r("\\:("+N+")")+"?)")+"?("+$+"|"+C+"|"+V+"|"+k+")"),r("\\?("+B+")"),r("\\#("+H+")"),r(r("\\/\\/("+r("("+u+")@")+"?("+F+")"+r("\\:("+N+")")+"?)")+"?("+$+"|"+C+"|"+j+"|"+k+")"),r("\\?("+B+")"),r("\\#("+H+")"),r("("+u+")@"),r("\\:("+N+")"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",l,o),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",l,o),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",l,o),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",l,o),"g"),NOT_QUERY:new RegExp(t("[^\\%]",l,o,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",l,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",l,o),"g"),UNRESERVED:new RegExp(l,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",l,i),"g"),PCT_ENCODED:new RegExp(n,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+E+")"+r(r("\\%25|\\%(?!"+a+"{2})")+"("+O+")")+"?\\]?$")}}var i=o(!1),s=o(!0),l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,u=/^xn--/,f=/[^\0-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,h=String.fromCharCode;function v(e){throw new RangeError(m[e])}function _(e,t){var r=e.split("@"),a="";r.length>1&&(a=r[0]+"@",e=r[1]);var n=function(e,t){for(var r=[],a=e.length;a--;)r[a]=t(e[a]);return r}((e=e.replace(d,".")).split("."),t).join(".");return a+n}function g(e){for(var t=[],r=0,a=e.length;r<a;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<a){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&n)<<10)+(1023&o)+65536):(t.push(n),r--)}else t.push(n)}return t}var y=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},S=function(e,t,r){var a=0;for(e=r?p(e/700):e>>1,e+=p(e/t);e>455;a+=36)e=p(e/35);return p(a+36*e/(e+38))},b=function(e){var t,r=[],a=e.length,n=0,o=128,i=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var l=0;l<s;++l)e.charCodeAt(l)>=128&&v("not-basic"),r.push(e.charCodeAt(l));for(var u=s>0?s+1:0;u<a;){for(var f=n,d=1,m=36;;m+=36){u>=a&&v("invalid-input");var h=(t=e.charCodeAt(u++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(h>=36||h>p((c-n)/d))&&v("overflow"),n+=h*d;var _=m<=i?1:m>=i+26?26:m-i;if(h<_)break;var g=36-_;d>p(c/g)&&v("overflow"),d*=g}var y=r.length+1;i=S(n-f,y,0==f),p(n/y)>c-o&&v("overflow"),o+=p(n/y),n%=y,r.splice(n++,0,o)}return String.fromCodePoint.apply(String,r)},x=function(e){var t=[],r=(e=g(e)).length,a=128,n=0,o=72,i=!0,s=!1,l=void 0;try{for(var u,f=e[Symbol.iterator]();!(i=(u=f.next()).done);i=!0){var d=u.value;d<128&&t.push(h(d))}}catch(e){s=!0,l=e}finally{try{!i&&f.return&&f.return()}finally{if(s)throw l}}var m=t.length,_=m;for(m&&t.push("-");_<r;){var b=c,x=!0,P=!1,E=void 0;try{for(var O,w=e[Symbol.iterator]();!(x=(O=w.next()).done);x=!0){var T=O.value;T>=a&&T<b&&(b=T)}}catch(e){P=!0,E=e}finally{try{!x&&w.return&&w.return()}finally{if(P)throw E}}var R=_+1;b-a>p((c-n)/R)&&v("overflow"),n+=(b-a)*R,a=b;var A=!0,F=!1,N=void 0;try{for(var M,I=e[Symbol.iterator]();!(A=(M=I.next()).done);A=!0){var D=M.value;if(D<a&&++n>c&&v("overflow"),D==a){for(var L=n,U=36;;U+=36){var $=U<=o?1:U>=o+26?26:U-o;if(L<$)break;var C=L-$,V=36-$;t.push(h(y($+C%V,0))),L=p(C/V)}t.push(h(y(L,0))),o=S(n,R,_==m),n=0,++_}}}catch(e){F=!0,N=e}finally{try{!A&&I.return&&I.return()}finally{if(F)throw N}}++n,++a}return t.join("")},P=function(e){return _(e,(function(e){return f.test(e)?"xn--"+x(e):e}))},E=function(e){return _(e,(function(e){return u.test(e)?b(e.slice(4).toLowerCase()):e}))},O={};function w(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function T(e){for(var t="",r=0,a=e.length;r<a;){var n=parseInt(e.substr(r+1,2),16);if(n<128)t+=String.fromCharCode(n),r+=3;else if(n>=194&&n<224){if(a-r>=6){var o=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&n)<<6|63&o)}else t+=e.substr(r,6);r+=6}else if(n>=224){if(a-r>=9){var i=parseInt(e.substr(r+4,2),16),s=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&s)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function R(e,t){function r(e){var r=T(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,w).replace(t.PCT_ENCODED,n)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,w).replace(t.PCT_ENCODED,n)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,w).replace(t.PCT_ENCODED,n)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,w).replace(t.PCT_ENCODED,n)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,w).replace(t.PCT_ENCODED,n)),e}function A(e){return e.replace(/^0*(.*)/,"$1")||"0"}function F(e,t){var r=e.match(t.IPV4ADDRESS)||[],a=l(r,2)[1];return a?a.split(".").map(A).join("."):e}function N(e,t){var r=e.match(t.IPV6ADDRESS)||[],a=l(r,3),n=a[1],o=a[2];if(n){for(var i=n.toLowerCase().split("::").reverse(),s=l(i,2),c=s[0],u=s[1],f=u?u.split(":").map(A):[],d=c.split(":").map(A),m=t.IPV4ADDRESS.test(d[d.length-1]),p=m?7:8,h=d.length-p,v=Array(p),_=0;_<p;++_)v[_]=f[_]||d[h+_]||"";m&&(v[p-1]=F(v[p-1],t));var g=v.reduce((function(e,t,r){if(!t||"0"===t){var a=e[e.length-1];a&&a.index+a.length===r?a.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],y=void 0;if(g&&g.length>1){var S=v.slice(0,g.index),b=v.slice(g.index+g.length);y=S.join(":")+"::"+b.join(":")}else y=v.join(":");return o&&(y+="%"+o),y}return e}var M=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,I=void 0==="".match(/(){0}/)[1];function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},a=!1!==t.iri?s:i;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var n=e.match(M);if(n){I?(r.scheme=n[1],r.userinfo=n[3],r.host=n[4],r.port=parseInt(n[5],10),r.path=n[6]||"",r.query=n[7],r.fragment=n[8],isNaN(r.port)&&(r.port=n[5])):(r.scheme=n[1]||void 0,r.userinfo=-1!==e.indexOf("@")?n[3]:void 0,r.host=-1!==e.indexOf("//")?n[4]:void 0,r.port=parseInt(n[5],10),r.path=n[6]||"",r.query=-1!==e.indexOf("?")?n[7]:void 0,r.fragment=-1!==e.indexOf("#")?n[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?n[4]:void 0)),r.host&&(r.host=N(F(r.host,a),a)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var o=O[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)R(r,a);else{if(r.host&&(t.domainHost||o&&o.domainHost))try{r.host=P(r.host.replace(a.PCT_ENCODED,T).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}R(r,i)}o&&o.parse&&o.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function L(e,t){var r=!1!==t.iri?s:i,a=[];return void 0!==e.userinfo&&(a.push(e.userinfo),a.push("@")),void 0!==e.host&&a.push(N(F(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"==typeof e.port&&(a.push(":"),a.push(e.port.toString(10))),a.length?a.join(""):void 0}var U=/^\.\.?\//,$=/^\/\.(\/|$)/,C=/^\/\.\.(\/|$)/,V=/^\/?(?:.|\n)*?(?=\/|$)/;function j(e){for(var t=[];e.length;)if(e.match(U))e=e.replace(U,"");else if(e.match($))e=e.replace($,"/");else if(e.match(C))e=e.replace(C,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(V);if(!r)throw new Error("Unexpected dot segment condition");var a=r[0];e=e.slice(a.length),t.push(a)}return t.join("")}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?s:i,a=[],n=O[(t.scheme||e.scheme||"").toLowerCase()];if(n&&n.serialize&&n.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||n&&n.domainHost)try{e.host=t.iri?E(e.host):P(e.host.replace(r.PCT_ENCODED,T).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}R(e,r),"suffix"!==t.reference&&e.scheme&&(a.push(e.scheme),a.push(":"));var o=L(e,t);if(void 0!==o&&("suffix"!==t.reference&&a.push("//"),a.push(o),e.path&&"/"!==e.path.charAt(0)&&a.push("/")),void 0!==e.path){var l=e.path;t.absolutePath||n&&n.absolutePath||(l=j(l)),void 0===o&&(l=l.replace(/^\/\//,"/%2F")),a.push(l)}return void 0!==e.query&&(a.push("?"),a.push(e.query)),void 0!==e.fragment&&(a.push("#"),a.push(e.fragment)),a.join("")}function B(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments[3],n={};return a||(e=D(k(e,r),r),t=D(k(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=j(t.path||""),n.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=j(t.path||""),n.query=t.query):(t.path?("/"===t.path.charAt(0)?n.path=j(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:n.path=t.path:n.path="/"+t.path,n.path=j(n.path)),n.query=t.query):(n.path=e.path,void 0!==t.query?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function H(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:i.PCT_ENCODED,T)}var z={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},q={scheme:"https",domainHost:z.domainHost,parse:z.parse,serialize:z.serialize},G={},X="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Q="[0-9A-Fa-f]",W=r(r("%[EFef]"+Q+"%"+Q+Q+"%"+Q+Q)+"|"+r("%[89A-Fa-f]"+Q+"%"+Q+Q)+"|"+r("%"+Q+Q)),Z=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),K=new RegExp(X,"g"),Y=new RegExp(W,"g"),J=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Z),"g"),ee=new RegExp(t("[^]",X,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),te=ee;function re(e){var t=T(e);return t.match(K)?t:e}var ae={scheme:"mailto",parse:function(e,t){var r=e,a=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var n=!1,o={},i=r.query.split("&"),s=0,l=i.length;s<l;++s){var c=i[s].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),f=0,d=u.length;f<d;++f)a.push(u[f]);break;case"subject":r.subject=H(c[1],t);break;case"body":r.body=H(c[1],t);break;default:n=!0,o[H(c[0],t)]=H(c[1],t)}}n&&(r.headers=o)}r.query=void 0;for(var m=0,p=a.length;m<p;++m){var h=a[m].split("@");if(h[0]=H(h[0]),t.unicodeSupport)h[1]=H(h[1],t).toLowerCase();else try{h[1]=P(H(h[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}a[m]=h.join("@")}return r},serialize:function(e,t){var r,a=e,o=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(o){for(var i=0,s=o.length;i<s;++i){var l=String(o[i]),c=l.lastIndexOf("@"),u=l.slice(0,c).replace(Y,re).replace(Y,n).replace(J,w),f=l.slice(c+1);try{f=t.iri?E(f):P(H(f,t).toLowerCase())}catch(e){a.error=a.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}o[i]=u+"@"+f}a.path=o.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var m=[];for(var p in d)d[p]!==G[p]&&m.push(p.replace(Y,re).replace(Y,n).replace(ee,w)+"="+d[p].replace(Y,re).replace(Y,n).replace(te,w));return m.length&&(a.query=m.join("&")),a}},ne=/^([^\:]+)\:(.*)/,oe={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ne),a=e;if(r){var n=t.scheme||a.scheme||"urn",o=r[1].toLowerCase(),i=r[2],s=n+":"+(t.nid||o),l=O[s];a.nid=o,a.nss=i,a.path=void 0,l&&(a=l.parse(a,t))}else a.error=a.error||"URN can not be parsed.";return a},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",a=e.nid,n=r+":"+(t.nid||a),o=O[n];o&&(e=o.serialize(e,t));var i=e,s=e.nss;return i.path=(a||t.nid)+":"+s,i}},ie=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,se={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ie)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};O[z.scheme]=z,O[q.scheme]=q,O[ae.scheme]=ae,O[oe.scheme]=oe,O[se.scheme]=se,e.SCHEMES=O,e.pctEncChar=w,e.pctDecChars=T,e.parse=D,e.removeDotSegments=j,e.serialize=k,e.resolveComponents=B,e.resolve=function(e,t,r){var a=function(e,t){var r=e;if(t)for(var a in t)r[a]=t[a];return r}({scheme:"null"},r);return k(B(D(e,a),D(t,a),a,!0),a)},e.normalize=function(e,t){return"string"==typeof e?e=k(D(e,t),t):"object"===a(e)&&(e=D(k(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=k(D(e,r),r):"object"===a(e)&&(e=k(e,r)),"string"==typeof t?t=k(D(t,r),r):"object"===a(t)&&(t=k(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:i.ESCAPE,w)},e.unescapeComponent=H,Object.defineProperty(e,"__esModule",{value:!0})}(t)},557:function(e,t,r){"use strict";e.exports=function(e){for(var t,r=0,a=e.length,n=0;n<a;)r++,(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<a&&56320==(64512&(t=e.charCodeAt(n)))&&n++;return r}},558:function(e,t,r){"use strict";var a=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function e(t,r,n,o,i,s,l,c,u,f){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var d in r(o,i,s,l,c,u,f),o){var m=o[d];if(Array.isArray(m)){if(d in a.arrayKeywords)for(var p=0;p<m.length;p++)e(t,r,n,m[p],i+"/"+d+"/"+p,s,i,d,o,p)}else if(d in a.propsKeywords){if(m&&"object"==typeof m)for(var h in m)e(t,r,n,m[h],i+"/"+d+"/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),s,i,d,o,h)}else(d in a.keywords||t.allKeys&&!(d in a.skipKeywords))&&e(t,r,n,m,i+"/"+d,s,i,d,o)}n(o,i,s,l,c,u,f)}}(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};a.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},a.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},a.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},a.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},559:function(e,t,r){"use strict";var a=e.exports=function(){this._cache={}};a.prototype.put=function(e,t){this._cache[e]=t},a.prototype.get=function(e){return this._cache[e]},a.prototype.del=function(e){delete this._cache[e]},a.prototype.clear=function(){this._cache={}}},560:function(e,t,r){"use strict";var a=r(36),n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31],i=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,s=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,l=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,c=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,u=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,f=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,d=/^(?:\/(?:[^~/]|~0|~1)*)*$/,m=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,p=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function h(e){return e="full"==e?"full":"fast",a.copy(h[e])}function v(e){var t=e.match(n);if(!t)return!1;var r=+t[1],a=+t[2],i=+t[3];return a>=1&&a<=12&&i>=1&&i<=(2==a&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:o[a])}function _(e,t){var r=e.match(i);if(!r)return!1;var a=r[1],n=r[2],o=r[3],s=r[5];return(a<=23&&n<=59&&o<=59||23==a&&59==n&&60==o)&&(!t||s)}e.exports=h,h.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":c,url:u,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:b,uuid:f,"json-pointer":d,"json-pointer-uri-fragment":m,"relative-json-pointer":p},h.full={date:v,time:_,"date-time":function(e){var t=e.split(g);return 2==t.length&&v(t[0])&&_(t[1],!0)},uri:function(e){return y.test(e)&&l.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":c,url:u,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:b,uuid:f,"json-pointer":d,"json-pointer-uri-fragment":m,"relative-json-pointer":p};var g=/t|\s/i;var y=/\/|:/;var S=/[^\\]\\Z/;function b(e){if(S.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},561:function(e,t,r){"use strict";var a=r(562),n=r(36).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=n(t),e.types=n(["number","integer","string","array","object","boolean","null"]),e.forEach((function(r){r.rules=r.rules.map((function(r){var n;if("object"==typeof r){var o=Object.keys(r)[0];n=r[o],r=o,n.forEach((function(r){t.push(r),e.all[r]=!0}))}return t.push(r),e.all[r]={keyword:r,code:a[r],implements:n}})),e.all.$comment={keyword:"$comment",code:a.$comment},r.type&&(e.types[r.type]=r)})),e.keywords=n(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},562:function(e,t,r){"use strict";e.exports={$ref:r(563),allOf:r(564),anyOf:r(565),$comment:r(566),const:r(567),contains:r(568),dependencies:r(569),enum:r(570),format:r(571),if:r(572),items:r(573),maximum:r(129),minimum:r(129),maxItems:r(130),minItems:r(130),maxLength:r(131),minLength:r(131),maxProperties:r(132),minProperties:r(132),multipleOf:r(574),not:r(575),oneOf:r(576),pattern:r(577),properties:r(578),propertyNames:r(579),required:r(580),uniqueItems:r(581),validate:r(128)}},563:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n,o=" ",i=e.level,s=e.dataLevel,l=e.schema[t],c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(s||""),d="valid"+i;if("#"==l||"#/"==l)e.isRoot?(a=e.async,n="validate"):(a=!0===e.root.schema.$async,n="root.refVal[0]");else{var m=e.resolveRef(e.baseId,l,e.isRoot);if(void 0===m){var p=e.MissingRefError.message(e.baseId,l);if("fail"==e.opts.missingRefs){e.logger.error(p),(g=g||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",!1!==e.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),o+=" } "):o+=" {} ";var h=o;o=g.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+h+"]); ":o+=" validate.errors = ["+h+"]; return false; ":o+=" var err = "+h+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,l,p);e.logger.warn(p),u&&(o+=" if (true) { ")}}else if(m.inline){var v=e.util.copy(e);v.level++;var _="valid"+v.level;v.schema=m.schema,v.schemaPath="",v.errSchemaPath=l,o+=" "+e.validate(v).replace(/validate\.schema/g,m.code)+" ",u&&(o+=" if ("+_+") { ")}else a=!0===m.$async||e.async&&!1!==m.$async,n=m.code}if(n){var g;(g=g||[]).push(o),o="",e.opts.passContext?o+=" "+n+".call(this, ":o+=" "+n+"( ",o+=" "+f+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var y=o+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";if(o=g.pop(),a){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(o+=" var "+d+"; "),o+=" try { await "+y+"; ",u&&(o+=" "+d+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(o+=" "+d+" = false; "),o+=" } ",u&&(o+=" if ("+d+") { ")}else o+=" if (!"+y+") { if (vErrors === null) vErrors = "+n+".errors; else vErrors = vErrors.concat("+n+".errors); errors = vErrors.length; } ",u&&(o+=" else { ")}return o}},564:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),i=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,l=e.util.copy(e),c="";l.level++;var u="valid"+l.level,f=l.baseId,d=!0,m=n;if(m)for(var p,h=-1,v=m.length-1;h<v;)p=m[h+=1],(e.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0:e.util.schemaHasRules(p,e.RULES.all))&&(d=!1,l.schema=p,l.schemaPath=o+"["+h+"]",l.errSchemaPath=i+"/"+h,a+="  "+e.validate(l)+" ",l.baseId=f,s&&(a+=" if ("+u+") { ",c+="}"));return s&&(a+=d?" if (true) { ":" "+c.slice(0,-1)+" "),a=e.util.cleanUpCode(a)}},565:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d="errs__"+n,m=e.util.copy(e),p="";m.level++;var h="valid"+m.level;if(i.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0:e.util.schemaHasRules(t,e.RULES.all)}))){var v=m.baseId;a+=" var "+d+" = errors; var "+f+" = false;  ";var _=e.compositeRule;e.compositeRule=m.compositeRule=!0;var g=i;if(g)for(var y,S=-1,b=g.length-1;S<b;)y=g[S+=1],m.schema=y,m.schemaPath=s+"["+S+"]",m.errSchemaPath=l+"/"+S,a+="  "+e.validate(m)+" ",m.baseId=v,a+=" "+f+" = "+f+" || "+h+"; if (!"+f+") { ",p+="}";e.compositeRule=m.compositeRule=_,a+=" "+p+" if (!"+f+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } "),a=e.util.cleanUpCode(a)}else c&&(a+=" if (true) { ");return a}},566:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.schema[t],o=e.errSchemaPath+"/"+t,i=(e.opts.allErrors,e.util.toQuotedString(n));return!0===e.opts.$comment?a+=" console.log("+i+");":"function"==typeof e.opts.$comment&&(a+=" self._opts.$comment("+i+", "+e.util.toQuotedString(o)+", validate.root.schema);"),a}},567:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d=e.opts.$data&&i&&i.$data;d&&(a+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; "),d||(a+=" var schema"+n+" = validate.schema"+s+";"),a+="var "+f+" = equal("+u+", schema"+n+"); if (!"+f+") {   ";var m=m||[];m.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+n+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to constant' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var p=a;return a=m.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+p+"]); ":a+=" validate.errors = ["+p+"]; return false; ":a+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",c&&(a+=" else { "),a}},568:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d="errs__"+n,m=e.util.copy(e);m.level++;var p="valid"+m.level,h="i"+n,v=m.dataLevel=e.dataLevel+1,_="data"+v,g=e.baseId,y=e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0:e.util.schemaHasRules(i,e.RULES.all);if(a+="var "+d+" = errors;var "+f+";",y){var S=e.compositeRule;e.compositeRule=m.compositeRule=!0,m.schema=i,m.schemaPath=s,m.errSchemaPath=l,a+=" var "+p+" = false; for (var "+h+" = 0; "+h+" < "+u+".length; "+h+"++) { ",m.errorPath=e.util.getPathExpr(e.errorPath,h,e.opts.jsonPointers,!0);var b=u+"["+h+"]";m.dataPathArr[v]=h;var x=e.validate(m);m.baseId=g,e.util.varOccurences(x,_)<2?a+=" "+e.util.varReplace(x,_,b)+" ":a+=" var "+_+" = "+b+"; "+x+" ",a+=" if ("+p+") break; }  ",e.compositeRule=m.compositeRule=S,a+="  if (!"+p+") {"}else a+=" if ("+u+".length == 0) {";var P=P||[];P.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should contain a valid item' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var E=a;return a=P.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+E+"]); ":a+=" validate.errors = ["+E+"]; return false; ":a+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { ",y&&(a+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(a+=" } "),a=e.util.cleanUpCode(a)}},569:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="errs__"+n,d=e.util.copy(e),m="";d.level++;var p="valid"+d.level,h={},v={},_=e.opts.ownProperties;for(b in i){var g=i[b],y=Array.isArray(g)?v:h;y[b]=g}a+="var "+f+" = errors;";var S=e.errorPath;for(var b in a+="var missing"+n+";",v)if((y=v[b]).length){if(a+=" if ( "+u+e.util.getProperty(b)+" !== undefined ",_&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(b)+"') "),c){a+=" && ( ";var x=y;if(x)for(var P=-1,E=x.length-1;P<E;){F=x[P+=1],P&&(a+=" || "),a+=" ( ( "+(D=u+(I=e.util.getProperty(F)))+" === undefined ",_&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(F)+"') "),a+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?F:I)+") ) "}a+=")) {  ";var O="missing"+n,w="' + "+O+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(S,O,!0):S+" + "+O);var T=T||[];T.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(b)+"', missingProperty: '"+w+"', depsCount: "+y.length+", deps: '"+e.util.escapeQuotes(1==y.length?y[0]:y.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==y.length?a+="property "+e.util.escapeQuotes(y[0]):a+="properties "+e.util.escapeQuotes(y.join(", ")),a+=" when property "+e.util.escapeQuotes(b)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var R=a;a=T.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+R+"]); ":a+=" validate.errors = ["+R+"]; return false; ":a+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{a+=" ) { ";var A=y;if(A)for(var F,N=-1,M=A.length-1;N<M;){F=A[N+=1];var I=e.util.getProperty(F),D=(w=e.util.escapeQuotes(F),u+I);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(S,F,e.opts.jsonPointers)),a+=" if ( "+D+" === undefined ",_&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(F)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(b)+"', missingProperty: '"+w+"', depsCount: "+y.length+", deps: '"+e.util.escapeQuotes(1==y.length?y[0]:y.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==y.length?a+="property "+e.util.escapeQuotes(y[0]):a+="properties "+e.util.escapeQuotes(y.join(", ")),a+=" when property "+e.util.escapeQuotes(b)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}a+=" }   ",c&&(m+="}",a+=" else { ")}e.errorPath=S;var L=d.baseId;for(var b in h){g=h[b];(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0:e.util.schemaHasRules(g,e.RULES.all))&&(a+=" "+p+" = true; if ( "+u+e.util.getProperty(b)+" !== undefined ",_&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(b)+"') "),a+=") { ",d.schema=g,d.schemaPath=s+e.util.getProperty(b),d.errSchemaPath=l+"/"+e.util.escapeFragment(b),a+="  "+e.validate(d)+" ",d.baseId=L,a+=" }  ",c&&(a+=" if ("+p+") { ",m+="}"))}return c&&(a+="   "+m+" if ("+f+" == errors) {"),a=e.util.cleanUpCode(a)}},570:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d=e.opts.$data&&i&&i.$data;d&&(a+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ");var m="i"+n,p="schema"+n;d||(a+=" var "+p+" = validate.schema"+s+";"),a+="var "+f+";",d&&(a+=" if (schema"+n+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+n+")) "+f+" = false; else {"),a+=f+" = false;for (var "+m+"=0; "+m+"<"+p+".length; "+m+"++) if (equal("+u+", "+p+"["+m+"])) { "+f+" = true; break; }",d&&(a+="  }  "),a+=" if (!"+f+") {   ";var h=h||[];h.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+n+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var v=a;return a=h.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",c&&(a+=" else { "),a}},571:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||"");if(!1===e.opts.format)return c&&(a+=" if (true) { "),a;var f,d=e.opts.$data&&i&&i.$data;d?(a+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",f="schema"+n):f=i;var m=e.opts.unknownFormats,p=Array.isArray(m);if(d){a+=" var "+(h="format"+n)+" = formats["+f+"]; var "+(v="isObject"+n)+" = typeof "+h+" == 'object' && !("+h+" instanceof RegExp) && "+h+".validate; var "+(_="formatType"+n)+" = "+v+" && "+h+".type || 'string'; if ("+v+") { ",e.async&&(a+=" var async"+n+" = "+h+".async; "),a+=" "+h+" = "+h+".validate; } if (  ",d&&(a+=" ("+f+" !== undefined && typeof "+f+" != 'string') || "),a+=" (","ignore"!=m&&(a+=" ("+f+" && !"+h+" ",p&&(a+=" && self._opts.unknownFormats.indexOf("+f+") == -1 "),a+=") || "),a+=" ("+h+" && "+_+" == '"+r+"' && !(typeof "+h+" == 'function' ? ",e.async?a+=" (async"+n+" ? await "+h+"("+u+") : "+h+"("+u+")) ":a+=" "+h+"("+u+") ",a+=" : "+h+".test("+u+"))))) {"}else{var h;if(!(h=e.formats[i])){if("ignore"==m)return e.logger.warn('unknown format "'+i+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(a+=" if (true) { "),a;if(p&&m.indexOf(i)>=0)return c&&(a+=" if (true) { "),a;throw new Error('unknown format "'+i+'" is used in schema at path "'+e.errSchemaPath+'"')}var v,_=(v="object"==typeof h&&!(h instanceof RegExp)&&h.validate)&&h.type||"string";if(v){var g=!0===h.async;h=h.validate}if(_!=r)return c&&(a+=" if (true) { "),a;if(g){if(!e.async)throw new Error("async format in sync schema");a+=" if (!(await "+(y="formats"+e.util.getProperty(i)+".validate")+"("+u+"))) { "}else{a+=" if (! ";var y="formats"+e.util.getProperty(i);v&&(y+=".validate"),a+="function"==typeof h?" "+y+"("+u+") ":" "+y+".test("+u+") ",a+=") { "}}var S=S||[];S.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",a+=d?""+f:""+e.util.toQuotedString(i),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match format \"",a+=d?"' + "+f+" + '":""+e.util.escapeQuotes(i),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",a+=d?"validate.schema"+s:""+e.util.toQuotedString(i),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var b=a;return a=S.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+b+"]); ":a+=" validate.errors = ["+b+"]; return false; ":a+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",c&&(a+=" else { "),a}},572:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d="errs__"+n,m=e.util.copy(e);m.level++;var p="valid"+m.level,h=e.schema.then,v=e.schema.else,_=void 0!==h&&(e.opts.strictKeywords?"object"==typeof h&&Object.keys(h).length>0:e.util.schemaHasRules(h,e.RULES.all)),g=void 0!==v&&(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0:e.util.schemaHasRules(v,e.RULES.all)),y=m.baseId;if(_||g){var S;m.createErrors=!1,m.schema=i,m.schemaPath=s,m.errSchemaPath=l,a+=" var "+d+" = errors; var "+f+" = true;  ";var b=e.compositeRule;e.compositeRule=m.compositeRule=!0,a+="  "+e.validate(m)+" ",m.baseId=y,m.createErrors=!0,a+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",e.compositeRule=m.compositeRule=b,_?(a+=" if ("+p+") {  ",m.schema=e.schema.then,m.schemaPath=e.schemaPath+".then",m.errSchemaPath=e.errSchemaPath+"/then",a+="  "+e.validate(m)+" ",m.baseId=y,a+=" "+f+" = "+p+"; ",_&&g?a+=" var "+(S="ifClause"+n)+" = 'then'; ":S="'then'",a+=" } ",g&&(a+=" else { ")):a+=" if (!"+p+") { ",g&&(m.schema=e.schema.else,m.schemaPath=e.schemaPath+".else",m.errSchemaPath=e.errSchemaPath+"/else",a+="  "+e.validate(m)+" ",m.baseId=y,a+=" "+f+" = "+p+"; ",_&&g?a+=" var "+(S="ifClause"+n)+" = 'else'; ":S="'else'",a+=" } "),a+=" if (!"+f+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+S+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match \"' + "+S+" + '\" schema' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" }   ",c&&(a+=" else { "),a=e.util.cleanUpCode(a)}else c&&(a+=" if (true) { ");return a}},573:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d="errs__"+n,m=e.util.copy(e),p="";m.level++;var h="valid"+m.level,v="i"+n,_=m.dataLevel=e.dataLevel+1,g="data"+_,y=e.baseId;if(a+="var "+d+" = errors;var "+f+";",Array.isArray(i)){var S=e.schema.additionalItems;if(!1===S){a+=" "+f+" = "+u+".length <= "+i.length+"; ";var b=l;l=e.errSchemaPath+"/additionalItems",a+="  if (!"+f+") {   ";var x=x||[];x.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+i.length+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have more than "+i.length+" items' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var P=a;a=x.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+P+"]); ":a+=" validate.errors = ["+P+"]; return false; ":a+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",l=b,c&&(p+="}",a+=" else { ")}var E=i;if(E)for(var O,w=-1,T=E.length-1;w<T;)if(O=E[w+=1],e.opts.strictKeywords?"object"==typeof O&&Object.keys(O).length>0:e.util.schemaHasRules(O,e.RULES.all)){a+=" "+h+" = true; if ("+u+".length > "+w+") { ";var R=u+"["+w+"]";m.schema=O,m.schemaPath=s+"["+w+"]",m.errSchemaPath=l+"/"+w,m.errorPath=e.util.getPathExpr(e.errorPath,w,e.opts.jsonPointers,!0),m.dataPathArr[_]=w;var A=e.validate(m);m.baseId=y,e.util.varOccurences(A,g)<2?a+=" "+e.util.varReplace(A,g,R)+" ":a+=" var "+g+" = "+R+"; "+A+" ",a+=" }  ",c&&(a+=" if ("+h+") { ",p+="}")}if("object"==typeof S&&(e.opts.strictKeywords?"object"==typeof S&&Object.keys(S).length>0:e.util.schemaHasRules(S,e.RULES.all))){m.schema=S,m.schemaPath=e.schemaPath+".additionalItems",m.errSchemaPath=e.errSchemaPath+"/additionalItems",a+=" "+h+" = true; if ("+u+".length > "+i.length+") {  for (var "+v+" = "+i.length+"; "+v+" < "+u+".length; "+v+"++) { ",m.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);R=u+"["+v+"]";m.dataPathArr[_]=v;A=e.validate(m);m.baseId=y,e.util.varOccurences(A,g)<2?a+=" "+e.util.varReplace(A,g,R)+" ":a+=" var "+g+" = "+R+"; "+A+" ",c&&(a+=" if (!"+h+") break; "),a+=" } }  ",c&&(a+=" if ("+h+") { ",p+="}")}}else if(e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0:e.util.schemaHasRules(i,e.RULES.all)){m.schema=i,m.schemaPath=s,m.errSchemaPath=l,a+="  for (var "+v+" = 0; "+v+" < "+u+".length; "+v+"++) { ",m.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);R=u+"["+v+"]";m.dataPathArr[_]=v;A=e.validate(m);m.baseId=y,e.util.varOccurences(A,g)<2?a+=" "+e.util.varReplace(A,g,R)+" ":a+=" var "+g+" = "+R+"; "+A+" ",c&&(a+=" if (!"+h+") break; "),a+=" }"}return c&&(a+=" "+p+" if ("+d+" == errors) {"),a=e.util.cleanUpCode(a)}},574:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(i||""),d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=s,n+="var division"+o+";if (",d&&(n+=" "+a+" !== undefined && ( typeof "+a+" != 'number' || "),n+=" (division"+o+" = "+f+" / "+a+", ",e.opts.multipleOfPrecision?n+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":n+=" division"+o+" !== parseInt(division"+o+") ",n+=" ) ",d&&(n+="  )  "),n+=" ) {   ";var m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be multiple of ",n+=d?"' + "+a:a+"'"),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var p=n;return n=m.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+p+"]); ":n+=" validate.errors = ["+p+"]; return false; ":n+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},575:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="errs__"+n,d=e.util.copy(e);d.level++;var m="valid"+d.level;if(e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0:e.util.schemaHasRules(i,e.RULES.all)){d.schema=i,d.schemaPath=s,d.errSchemaPath=l,a+=" var "+f+" = errors;  ";var p,h=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.createErrors=!1,d.opts.allErrors&&(p=d.opts.allErrors,d.opts.allErrors=!1),a+=" "+e.validate(d)+" ",d.createErrors=!0,p&&(d.opts.allErrors=p),e.compositeRule=d.compositeRule=h,a+=" if ("+m+") {   ";var v=v||[];v.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var _=a;a=v.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } ")}else a+="  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(a+=" if (false) { ");return a}},576:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d="errs__"+n,m=e.util.copy(e),p="";m.level++;var h="valid"+m.level,v=m.baseId,_="prevValid"+n,g="passingSchemas"+n;a+="var "+d+" = errors , "+_+" = false , "+f+" = false , "+g+" = null; ";var y=e.compositeRule;e.compositeRule=m.compositeRule=!0;var S=i;if(S)for(var b,x=-1,P=S.length-1;x<P;)b=S[x+=1],(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:e.util.schemaHasRules(b,e.RULES.all))?(m.schema=b,m.schemaPath=s+"["+x+"]",m.errSchemaPath=l+"/"+x,a+="  "+e.validate(m)+" ",m.baseId=v):a+=" var "+h+" = true; ",x&&(a+=" if ("+h+" && "+_+") { "+f+" = false; "+g+" = ["+g+", "+x+"]; } else { ",p+="}"),a+=" if ("+h+") { "+f+" = "+_+" = true; "+g+" = "+x+"; }";return e.compositeRule=m.compositeRule=y,a+=p+"if (!"+f+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+g+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",e.opts.allErrors&&(a+=" } "),a}},577:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(i||""),d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=s,n+="if ( ",d&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'string') || "),n+=" !"+(d?"(new RegExp("+a+"))":e.usePattern(s))+".test("+f+") ) {   ";var m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",n+=d?""+a:""+e.util.toQuotedString(s),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match pattern \"",n+=d?"' + "+a+" + '":""+e.util.escapeQuotes(s),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+e.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var p=n;return n=m.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+p+"]); ":n+=" validate.errors = ["+p+"]; return false; ":n+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},578:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="errs__"+n,d=e.util.copy(e),m="";d.level++;var p="valid"+d.level,h="key"+n,v="idx"+n,_=d.dataLevel=e.dataLevel+1,g="data"+_,y="dataProperties"+n,S=Object.keys(i||{}),b=e.schema.patternProperties||{},x=Object.keys(b),P=e.schema.additionalProperties,E=S.length||x.length,O=!1===P,w="object"==typeof P&&Object.keys(P).length,T=e.opts.removeAdditional,R=O||w||T,A=e.opts.ownProperties,F=e.baseId,N=e.schema.required;if(N&&(!e.opts.$data||!N.$data)&&N.length<e.opts.loopRequired)var M=e.util.toHash(N);if(a+="var "+f+" = errors;var "+p+" = true;",A&&(a+=" var "+y+" = undefined;"),R){if(a+=A?" "+y+" = "+y+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+y+".length; "+v+"++) { var "+h+" = "+y+"["+v+"]; ":" for (var "+h+" in "+u+") { ",E){if(a+=" var isAdditional"+n+" = !(false ",S.length)if(S.length>8)a+=" || validate.schema"+s+".hasOwnProperty("+h+") ";else{var I=S;if(I)for(var D=-1,L=I.length-1;D<L;)Q=I[D+=1],a+=" || "+h+" == "+e.util.toQuotedString(Q)+" "}if(x.length){var U=x;if(U)for(var $=-1,C=U.length-1;$<C;)ne=U[$+=1],a+=" || "+e.usePattern(ne)+".test("+h+") "}a+=" ); if (isAdditional"+n+") { "}if("all"==T)a+=" delete "+u+"["+h+"]; ";else{var V=e.errorPath,j="' + "+h+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,h,e.opts.jsonPointers)),O)if(T)a+=" delete "+u+"["+h+"]; ";else{a+=" "+p+" = false; ";var k=l;l=e.errSchemaPath+"/additionalProperties",(te=te||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+j+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is an invalid additional property":a+="should NOT have additional properties",a+="' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var B=a;a=te.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+B+"]); ":a+=" validate.errors = ["+B+"]; return false; ":a+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=k,c&&(a+=" break; ")}else if(w)if("failing"==T){a+=" var "+f+" = errors;  ";var H=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=P,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,h,e.opts.jsonPointers);var z=u+"["+h+"]";d.dataPathArr[_]=h;var q=e.validate(d);d.baseId=F,e.util.varOccurences(q,g)<2?a+=" "+e.util.varReplace(q,g,z)+" ":a+=" var "+g+" = "+z+"; "+q+" ",a+=" if (!"+p+") { errors = "+f+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+h+"]; }  ",e.compositeRule=d.compositeRule=H}else{d.schema=P,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,h,e.opts.jsonPointers);z=u+"["+h+"]";d.dataPathArr[_]=h;q=e.validate(d);d.baseId=F,e.util.varOccurences(q,g)<2?a+=" "+e.util.varReplace(q,g,z)+" ":a+=" var "+g+" = "+z+"; "+q+" ",c&&(a+=" if (!"+p+") break; ")}e.errorPath=V}E&&(a+=" } "),a+=" }  ",c&&(a+=" if ("+p+") { ",m+="}")}var G=e.opts.useDefaults&&!e.compositeRule;if(S.length){var X=S;if(X)for(var Q,W=-1,Z=X.length-1;W<Z;){var K=i[Q=X[W+=1]];if(e.opts.strictKeywords?"object"==typeof K&&Object.keys(K).length>0:e.util.schemaHasRules(K,e.RULES.all)){var Y=e.util.getProperty(Q),J=(z=u+Y,G&&void 0!==K.default);d.schema=K,d.schemaPath=s+Y,d.errSchemaPath=l+"/"+e.util.escapeFragment(Q),d.errorPath=e.util.getPath(e.errorPath,Q,e.opts.jsonPointers),d.dataPathArr[_]=e.util.toQuotedString(Q);q=e.validate(d);if(d.baseId=F,e.util.varOccurences(q,g)<2){q=e.util.varReplace(q,g,z);var ee=z}else{ee=g;a+=" var "+g+" = "+z+"; "}if(J)a+=" "+q+" ";else{if(M&&M[Q]){a+=" if ( "+ee+" === undefined ",A&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(Q)+"') "),a+=") { "+p+" = false; ";V=e.errorPath,k=l;var te,re=e.util.escapeQuotes(Q);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(V,Q,e.opts.jsonPointers)),l=e.errSchemaPath+"/required",(te=te||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+re+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+re+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";B=a;a=te.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+B+"]); ":a+=" validate.errors = ["+B+"]; return false; ":a+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=k,e.errorPath=V,a+=" } else { "}else c?(a+=" if ( "+ee+" === undefined ",A&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(Q)+"') "),a+=") { "+p+" = true; } else { "):(a+=" if ("+ee+" !== undefined ",A&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(Q)+"') "),a+=" ) { ");a+=" "+q+" } "}}c&&(a+=" if ("+p+") { ",m+="}")}}if(x.length){var ae=x;if(ae)for(var ne,oe=-1,ie=ae.length-1;oe<ie;){K=b[ne=ae[oe+=1]];if(e.opts.strictKeywords?"object"==typeof K&&Object.keys(K).length>0:e.util.schemaHasRules(K,e.RULES.all)){d.schema=K,d.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ne),d.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ne),a+=A?" "+y+" = "+y+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+y+".length; "+v+"++) { var "+h+" = "+y+"["+v+"]; ":" for (var "+h+" in "+u+") { ",a+=" if ("+e.usePattern(ne)+".test("+h+")) { ",d.errorPath=e.util.getPathExpr(e.errorPath,h,e.opts.jsonPointers);z=u+"["+h+"]";d.dataPathArr[_]=h;q=e.validate(d);d.baseId=F,e.util.varOccurences(q,g)<2?a+=" "+e.util.varReplace(q,g,z)+" ":a+=" var "+g+" = "+z+"; "+q+" ",c&&(a+=" if (!"+p+") break; "),a+=" } ",c&&(a+=" else "+p+" = true; "),a+=" }  ",c&&(a+=" if ("+p+") { ",m+="}")}}}return c&&(a+=" "+m+" if ("+f+" == errors) {"),a=e.util.cleanUpCode(a)}},579:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="errs__"+n,d=e.util.copy(e);d.level++;var m="valid"+d.level;if(a+="var "+f+" = errors;",e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0:e.util.schemaHasRules(i,e.RULES.all)){d.schema=i,d.schemaPath=s,d.errSchemaPath=l;var p="key"+n,h="idx"+n,v="i"+n,_="' + "+p+" + '",g="data"+(d.dataLevel=e.dataLevel+1),y="dataProperties"+n,S=e.opts.ownProperties,b=e.baseId;S&&(a+=" var "+y+" = undefined; "),a+=S?" "+y+" = "+y+" || Object.keys("+u+"); for (var "+h+"=0; "+h+"<"+y+".length; "+h+"++) { var "+p+" = "+y+"["+h+"]; ":" for (var "+p+" in "+u+") { ",a+=" var startErrs"+n+" = errors; ";var x=p,P=e.compositeRule;e.compositeRule=d.compositeRule=!0;var E=e.validate(d);d.baseId=b,e.util.varOccurences(E,g)<2?a+=" "+e.util.varReplace(E,g,x)+" ":a+=" var "+g+" = "+x+"; "+E+" ",e.compositeRule=d.compositeRule=P,a+=" if (!"+m+") { for (var "+v+"=startErrs"+n+"; "+v+"<errors; "+v+"++) { vErrors["+v+"].propertyName = "+p+"; }   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+_+"' } ",!1!==e.opts.messages&&(a+=" , message: 'property name \\'"+_+"\\' is invalid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),c&&(a+=" break; "),a+=" } }"}return c&&(a+="  if ("+f+" == errors) {"),a=e.util.cleanUpCode(a)}},580:function(e,t,r){"use strict";e.exports=function(e,t,r){var a=" ",n=e.level,o=e.dataLevel,i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),f="valid"+n,d=e.opts.$data&&i&&i.$data;d&&(a+=" var schema"+n+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ");var m="schema"+n;if(!d)if(i.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],h=i;if(h)for(var v,_=-1,g=h.length-1;_<g;){v=h[_+=1];var y=e.schema.properties[v];y&&(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0:e.util.schemaHasRules(y,e.RULES.all))||(p[p.length]=v)}}else p=i;if(d||p.length){var S=e.errorPath,b=d||p.length>=e.opts.loopRequired,x=e.opts.ownProperties;if(c)if(a+=" var missing"+n+"; ",b){d||(a+=" var "+m+" = validate.schema"+s+"; ");var P="' + "+(A="schema"+n+"["+(w="i"+n)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(S,A,e.opts.jsonPointers)),a+=" var "+f+" = true; ",d&&(a+=" if (schema"+n+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+n+")) "+f+" = false; else {"),a+=" for (var "+w+" = 0; "+w+" < "+m+".length; "+w+"++) { "+f+" = "+u+"["+m+"["+w+"]] !== undefined ",x&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+m+"["+w+"]) "),a+="; if (!"+f+") break; } ",d&&(a+="  }  "),a+="  if (!"+f+") {   ",(R=R||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+P+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+P+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var E=a;a=R.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+E+"]); ":a+=" validate.errors = ["+E+"]; return false; ":a+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else{a+=" if ( ";var O=p;if(O)for(var w=-1,T=O.length-1;w<T;){N=O[w+=1],w&&(a+=" || "),a+=" ( ( "+(L=u+(D=e.util.getProperty(N)))+" === undefined ",x&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(N)+"') "),a+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?N:D)+") ) "}a+=") {  ";var R;P="' + "+(A="missing"+n)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(S,A,!0):S+" + "+A),(R=R||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+P+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+P+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";E=a;a=R.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+E+"]); ":a+=" validate.errors = ["+E+"]; return false; ":a+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else if(b){d||(a+=" var "+m+" = validate.schema"+s+"; ");var A;P="' + "+(A="schema"+n+"["+(w="i"+n)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(S,A,e.opts.jsonPointers)),d&&(a+=" if ("+m+" && !Array.isArray("+m+")) {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+P+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+P+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+m+" !== undefined) { "),a+=" for (var "+w+" = 0; "+w+" < "+m+".length; "+w+"++) { if ("+u+"["+m+"["+w+"]] === undefined ",x&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+m+"["+w+"]) "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+P+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+P+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(a+="  }  ")}else{var F=p;if(F)for(var N,M=-1,I=F.length-1;M<I;){N=F[M+=1];var D=e.util.getProperty(N),L=(P=e.util.escapeQuotes(N),u+D);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(S,N,e.opts.jsonPointers)),a+=" if ( "+L+" === undefined ",x&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(N)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+P+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+P+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=S}else c&&(a+=" if (true) {");return a}},581:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(i||""),d="valid"+o,m=e.opts.$data&&s&&s.$data;if(m?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",a="schema"+o):a=s,(s||m)&&!1!==e.opts.uniqueItems){m&&(n+=" var "+d+"; if ("+a+" === false || "+a+" === undefined) "+d+" = true; else if (typeof "+a+" != 'boolean') "+d+" = false; else { "),n+=" var i = "+f+".length , "+d+" = true , j; if (i > 1) { ";var p=e.schema.items&&e.schema.items.type,h=Array.isArray(p);if(!p||"object"==p||"array"==p||h&&(p.indexOf("object")>=0||p.indexOf("array")>=0))n+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+f+"[i], "+f+"[j])) { "+d+" = false; break outer; } } } ";else{n+=" var itemIndices = {}, item; for (;i--;) { var item = "+f+"[i]; ";var v="checkDataType"+(h?"s":"");n+=" if ("+e.util[v](p,"item",!0)+") continue; ",h&&(n+=" if (typeof item == 'string') item = '\"' + item; "),n+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}n+=" } ",m&&(n+="  }  "),n+=" if (!"+d+") {   ";var _=_||[];_.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(n+=" , schema:  ",n+=m?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var g=n;n=_.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u&&(n+=" else { ")}else u&&(n+=" if (true) { ");return n}},582:function(e,t,r){"use strict";var a=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var n,o=t[r].split("/"),i=e;for(n=1;n<o.length;n++)i=i[o[n]];for(n=0;n<a.length;n++){var s=a[n],l=i[s];l&&(i[s]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return e}},583:function(e,t,r){"use strict";var a=r(78).MissingRef;e.exports=function e(t,r,n){var o=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(n=r,r=void 0);var i=s(t).then((function(){var e=o._addSchema(t,void 0,r);return e.validate||function e(t){try{return o._compile(t)}catch(e){if(e instanceof a)return n(e);throw e}function n(a){var n=a.missingSchema;if(c(n))throw new Error("Schema "+n+" is loaded but "+a.missingRef+" cannot be resolved");var i=o._loadingSchemas[n];return i||(i=o._loadingSchemas[n]=o._opts.loadSchema(n)).then(l,l),i.then((function(e){if(!c(n))return s(e).then((function(){c(n)||o.addSchema(e,n,void 0,r)}))})).then((function(){return e(t)}));function l(){delete o._loadingSchemas[n]}function c(e){return o._refs[e]||o._schemas[e]}}}(e)}));n&&i.then((function(e){n(null,e)}),n);return i;function s(t){var r=t.$schema;return r&&!o.getSchema(r)?e.call(o,{$ref:r},!0):Promise.resolve()}}},584:function(e,t,r){"use strict";var a=/^[a-z_$][a-z0-9_$-]*$/i,n=r(585),o=r(586);e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!a.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var o=t.type;if(Array.isArray(o))for(var i=0;i<o.length;i++)l(e,o[i],t);else l(e,o,t);var s=t.metaSchema;s&&(t.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(s,!0))}function l(e,t,a){for(var o,i=0;i<r.length;i++){var s=r[i];if(s.type==t){o=s;break}}o||(o={type:t,rules:[]},r.push(o));var l={keyword:e,definition:a,custom:!0,code:n,implements:a.implements};o.rules.push(l),r.custom[e]=l}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var a=t[r].rules,n=0;n<a.length;n++)if(a[n].keyword==e){a.splice(n,1);break}return this},validate:function e(t,r){e.errors=null;var a=this._validateKeyword=this._validateKeyword||this.compile(o,!0);if(a(t))return!0;if(e.errors=a.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(a.errors));return!1}}},585:function(e,t,r){"use strict";e.exports=function(e,t,r){var a,n,o=" ",i=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(s||""),m="valid"+i,p="errs__"+i,h=e.opts.$data&&l&&l.$data;h?(o+=" var schema"+i+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=l;var v,_,g,y,S,b="definition"+i,x=this.definition,P="";if(h&&x.$data){S="keywordValidate"+i;var E=x.validateSchema;o+=" var "+b+" = RULES.custom['"+t+"'].definition; var "+S+" = "+b+".validate;"}else{if(!(y=e.useCustomRule(this,l,e.schema,e)))return;n="validate.schema"+c,S=y.code,v=x.compile,_=x.inline,g=x.macro}var O=S+".errors",w="i"+i,T="ruleErr"+i,R=x.async;if(R&&!e.async)throw new Error("async keyword in sync schema");if(_||g||(o+=O+" = null;"),o+="var "+p+" = errors;var "+m+";",h&&x.$data&&(P+="}",o+=" if ("+n+" === undefined) { "+m+" = true; } else { ",E&&(P+="}",o+=" "+m+" = "+b+".validateSchema("+n+"); if ("+m+") { ")),_)x.statements?o+=" "+y.validate+" ":o+=" "+m+" = "+y.validate+"; ";else if(g){var A=e.util.copy(e);P="";A.level++;var F="valid"+A.level;A.schema=y.validate,A.schemaPath="";var N=e.compositeRule;e.compositeRule=A.compositeRule=!0;var M=e.validate(A).replace(/validate\.schema/g,S);e.compositeRule=A.compositeRule=N,o+=" "+M}else{(U=U||[]).push(o),o="",o+="  "+S+".call( ",e.opts.passContext?o+="this":o+="self",v||!1===x.schema?o+=" , "+d+" ":o+=" , "+n+" , "+d+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var I=s?"data"+(s-1||""):"parentData",D=s?e.dataPathArr[s]:"parentDataProperty",L=o+=" , "+I+" , "+D+" , rootData )  ";o=U.pop(),!1===x.errors?(o+=" "+m+" = ",R&&(o+="await "),o+=L+"; "):o+=R?" var "+(O="customErrors"+i)+" = null; try { "+m+" = await "+L+"; } catch (e) { "+m+" = false; if (e instanceof ValidationError) "+O+" = e.errors; else throw e; } ":" "+O+" = null; "+m+" = "+L+"; "}if(x.modifying&&(o+=" if ("+I+") "+d+" = "+I+"["+D+"];"),o+=""+P,x.valid)f&&(o+=" if (true) { ");else{var U;o+=" if ( ",void 0===x.valid?(o+=" !",o+=g?""+F:""+m):o+=" "+!x.valid+" ",o+=") { ",a=this.keyword,(U=U||[]).push(o),o="",(U=U||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var $=o;o=U.pop(),!e.compositeRule&&f?e.async?o+=" throw new ValidationError(["+$+"]); ":o+=" validate.errors = ["+$+"]; return false; ":o+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var C=o;o=U.pop(),_?x.errors?"full"!=x.errors&&(o+="  for (var "+w+"="+p+"; "+w+"<errors; "+w+"++) { var "+T+" = vErrors["+w+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(o+=" "+T+".schema = "+n+"; "+T+".data = "+d+"; "),o+=" } "):!1===x.errors?o+=" "+C+" ":(o+=" if ("+p+" == errors) { "+C+" } else {  for (var "+w+"="+p+"; "+w+"<errors; "+w+"++) { var "+T+" = vErrors["+w+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(o+=" "+T+".schema = "+n+"; "+T+".data = "+d+"; "),o+=" } } "):g?(o+="   var err =   ",!1!==e.createErrors?(o+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===x.errors?o+=" "+C+" ":(o+=" if (Array.isArray("+O+")) { if (vErrors === null) vErrors = "+O+"; else vErrors = vErrors.concat("+O+"); errors = vErrors.length;  for (var "+w+"="+p+"; "+w+"<errors; "+w+"++) { var "+T+" = vErrors["+w+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+";  "+T+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(o+=" "+T+".schema = "+n+"; "+T+".data = "+d+"; "),o+=" } } else { "+C+" } "),o+=" } ",f&&(o+=" else { ")}return o}},586:function(e,t,r){"use strict";var a=r(133);e.exports={$id:"https://github.com/epoberezkin/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:a.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:a.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},587:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},630:function(e,t,r){"use strict";r.r(t);var a=r(319),n=r(320),o=r(0),i=r(321),s=r.n(i),l=r(322),c=r.n(l);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}return r}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function g(e,t,r){return(g=y()?Reflect.construct:function(e,t,r){var a=[null];a.push.apply(a,t);var n=new(Function.bind.apply(e,a));return r&&S(n,r.prototype),n}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x,P,E,O,w,T,R,A=Autodesk.Viewing.Private,F=A.ShaderChunks,N=A.PrismUtil.GetPrismMapUniforms,M={u_base:{type:"f",value:.8},u_base_color:{type:"c",value:new o.Color(16777215)},u_coat:{type:"f",value:0},u_coat_affect_color:{type:"f",value:0},u_coat_affect_roughness:{type:"f",value:0},u_coat_anisotropy:{type:"f",value:0},u_coat_color:{type:"c",value:new o.Color(16777215)},u_coat_IOR:{type:"f",value:1.5},u_coat_normal:{type:"v3",value:new o.Vector3(0,0,0)},u_coat_rotation:{type:"f",value:0},u_coat_roughness:{type:"f",value:.1},u_diffuse_roughness:{type:"f",value:0},u_emission:{type:"f",value:0},u_emission_color:{type:"c",value:new o.Color(16777215)},u_metalness:{type:"f",value:0},u_normal:{type:"v3",value:new o.Vector3(0,0,0)},u_opacity:{type:"c",value:new o.Color(16777215)},u_sheen:{type:"f",value:0},u_sheen_color:{type:"c",value:new o.Color(16777215)},u_sheen_roughness:{type:"f",value:.3},u_specular:{type:"f",value:1},u_specular_anisotropy:{type:"f",value:0},u_specular_color:{type:"c",value:new o.Color(16777215)},u_specular_IOR:{type:"f",value:1.52},u_specular_rotation:{type:"f",value:0},u_specular_roughness:{type:"f",value:.1},u_subsurface:{type:"f",value:0},u_subsurface_anisotropy:{type:"f",value:0},u_subsurface_color:{type:"c",value:new o.Color(16777215)},u_subsurface_radius:{type:"c",value:new o.Color(16777215)},u_subsurface_scale:{type:"f",value:1},u_thin_film_IOR:{type:"f",value:1.5},u_thin_film_thickness:{type:"f",value:0},u_thin_walled:{type:"i",value:0},u_transmission:{type:"f",value:0},u_transmission_color:{type:"c",value:new o.Color(16777215)},u_transmission_depth:{type:"f",value:0},u_transmission_dispersion:{type:"f",value:0},u_transmission_extra_roughness:{type:"f",value:0},u_transmission_scatter:{type:"c",value:new o.Color(0)},u_transmission_scatter_anisotropy:{type:"f",value:0}},I=(x=[1.6177,.978927,.618938,.391714,.245177,.150234,.0893475,.0511377,.0280191,.0144204,.00687674,.00295935,.00111049,336768e-9,707119e-10,622646e-11,1.1084,.813928,.621389,.479304,.370299,.284835,.21724,.163558,.121254,.0878921,.0619052,.0419894,.0270556,.0161443,.00848212,.00342323,.930468,.725652,.586532,.479542,.393596,.322736,.26353,.213565,.171456,.135718,.105481,.0800472,.0588117,.0412172,.0268329,.0152799,.833791,.671201,.558957,.471006,.398823,.337883,.285615,.240206,.200696,.16597,.135422,.10859,.0850611,.0644477,.0464763,.0308878,.771692,.633819,.537877,.461939,.398865,.344892,.297895,.256371,.219562,.186548,.156842,.130095,.10598,.0841919,.0645311,.04679,.727979,.606373,.52141,.453769,.397174,.348337,.305403,.267056,.232655,.201398,.17286,.146756,.122808,.100751,.0804254,.0616485,.695353,.585281,.508227,.44667,.394925,.350027,.310302,.274561,.242236,.212604,.185281,.16002,.13657,.114693,.0942543,.0750799,.669981,.568519,.497442,.440542,.392567,.350786,.313656,.280075,.249533,.221359,.195196,.170824,.148012,.126537,.106279,.0870713,.649644,.554855,.488453,.435237,.390279,.351028,.316036,.284274,.255266,.228387,.203297,.179796,.157665,.136695,.116774,.0977403,.632951,.543489,.480849,.430619,.388132,.350974,.317777,.287562,.259885,.234153,.210041,.187365,.165914,.145488,.125983,.10724,.61899,.533877,.47433,.426573,.386145,.35075,.319078,.290197,.263681,.238971,.215746,.193838,.173043,.153167,.134113,.115722,.607131,.52564,.468678,.423001,.38432,.35043,.320072,.292349,.266856,.243055,.220636,.199438,.179264,.159926,.141332,.123323,.596927,.518497,.463731,.419829,.382647,.350056,.320842,.294137,.269549,.246564,.224875,.204331,.18474,.165919,.147778,.130162,.588052,.512241,.459365,.416996,.381114,.349657,.321448,.295641,.271862,.24961,.228584,.208643,.189596,.171266,.153566,.136341,.580257,.506717,.455481,.41445,.379708,.34925,.321929,.296923,.273869,.252279,.231859,.212472,.193933,.176066,.158788,.141945,.573355,.5018,.452005,.412151,.378416,.348844,.322316,.298028,.275627,.254638,.234772,.215896,.197828,.180398,.163522,.147049],P=Math.sqrt(x.length),E=Math.max.apply(Math,h(x)),O=Math.min.apply(Math,h(x)),w=E-O,T=new Uint8Array(x.map((function(e){return(e-O)/w})).map((function(e){var t=[1,255,65025,16581375].map((function(t){return t*e*255/256%1}));return[t[0]-t[1]/255,t[1]-t[2]/255,t[2]-t[3]/255,t[3]].map((function(e){return Math.floor(255*e)}))})).flat()),(R=U(T,P,P,o.RGBAFormat,o.UnsignedByteType,o.UVMapping,o.ClampToEdgeWrapping,o.ClampToEdgeWrapping,o.LinearFilter,o.LinearFilter,0)).generateMipmaps=!1,{tex:R,rng:w,min:O,size:P,data:T}),D=function(e){var t=e.length,r=U(new Uint8Array(e),t,1,o.LuminanceFormat,o.UnsignedByteType,o.UVMapping,o.RepeatWrapping,o.RepeatWrapping,o.NearestFilter,o.NearestFilter,0);return r.generateMipmaps=!1,{tex:r,size:t}}([0,128,64,191,32,160,96,223,16,143,80,207,48,175,112,239,8,135,72,199,40,167,103,231,25,151,88,215,56,183,120,250]);function L(e){var t;return b(t={},e,{type:"t",value:null}),b(t,"".concat(e,"_texMatrix"),{type:"m3",value:null}),b(t,"".concat(e,"_invert"),{type:"i",value:0}),b(t,"".concat(e,"_encoding"),{type:"i",value:0}),b(t,"".concat(e,"_valueScale"),{type:"f",value:1}),t}function U(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=g(o.DataTexture,t);return a.needsUpdate=!0,a}function $(e){switch(e){case"i":return"int";case"f":return"float";case"v3":case"c":return"vec3";default:throw new Error("unrecognized uniform type: ".concat(e))}}var C={uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.lights,o.UniformsLib.fog,F.CutPlanesUniforms,F.IdUniforms,F.ThemingUniform,F.ShadowMapUniforms,M].concat(h(Object.keys(M).map((function(e){return/_normal$/.test(e)?(t="".concat(e,"_map"),o.UniformsUtils.merge([L(t),(r={},b(r,"".concat(t,"_isHeight"),{type:"i",value:0}),b(r,"".concat(t,"_heightScale"),{type:"v2",value:new o.Vector2(1,1)}),r)])):L("".concat(e,"_map"));var t,r})).flat()),[N("TilingMap"),N("TilingNormalMap"),N("TilingRandomMap"),{u_sheenAlbedo:{type:"t",value:null},u_samplingRandomMap:{type:"t",value:null},irradianceMap:{type:"t",value:null},envMap:{type:"t",value:null},exposureBias:{type:"f",value:1},envMapExposure:{type:"f",value:1},envRotationSin:{type:"f",value:0},envRotationCos:{type:"f",value:1},envExponentMin:{type:"f",value:1},envExponentMax:{type:"f",value:512},envExponentCount:{type:"f",value:10},envMapMipLevels:{type:"i",value:1},tilingOverallTransform:{type:"m4",value:new o.Matrix4},uv2tile:{type:"v4",value:new o.Vector4(1,0,0,1)},tile2uv:{type:"v4",value:new o.Vector4(1,0,0,1)},tileAlignOffset:{type:"v2",value:new o.Vector2(0,0)},tilingUVTransform:{type:"m4",value:new o.Matrix4},tilingRandomAxisS:{type:"v2",value:new o.Vector2(0,0)},tilingRandomAxisT:{type:"v2",value:new o.Vector2(0,0)},tilingRandomAlignmentOffset:{type:"v2",value:new o.Vector2(0,0)}}])),vertexShader:s.a,fragmentShader:function(e){for(var t="",r="",a=0,n=Object.entries(M);a<n.length;a++){var o=p(n[a],2),i=o[0],s=o[1],l=/_normal$/.test(i);if(t+="uniform ".concat($(s.type).padEnd(9," ")," ").concat(i,";\n#if defined(USE_").concat(i.slice(2).toUpperCase(),"_MAP)\nuniform sampler2D ").concat(i,"_map;\nuniform mat3      ").concat(i,"_map_texMatrix;\nuniform int       ").concat(i,"_map_invert;\nuniform int       ").concat(i,"_map_encoding;\nuniform float     ").concat(i,"_map_valueScale;\n"),l&&(t+="uniform int       ".concat(i,"_map_isHeight;\nuniform vec2      ").concat(i,"_map_heightScale;\n")),t+="#endif\n",l)r+="mat3 get_".concat(i.slice(2).replace(/normal$/,"TBN"),"(in vec3 geoWorldNorm, in vec3 T, in vec3 B, in vec2 uv) {\n    vec3 N = ").concat(i,";\n    if (length(N) <= M_FLOAT_EPS) {\n        N = geoWorldNorm;\n    }\n    N = normalize(N);\n    #if defined(USE_").concat(i.slice(2).toUpperCase(),"_MAP)\n    transform_basis(T, B, N, uv, ").concat(i,"_map, ").concat(i,"_map_texMatrix, ").concat(i,"_map_invert, ").concat(i,"_map_encoding, ").concat(i,"_map_valueScale, ").concat(i,"_map_isHeight, ").concat(i,"_map_heightScale);\n    #endif\n    return mat3(T, B, N);\n}\n\n");else{var c=$(s.type);r+="".concat(c," get_").concat(i.slice(2),"(in vec2 uv) {\n    ").concat(c," val = ").concat(i,";\n    #if defined(USE_").concat(i.slice(2).toUpperCase(),"_MAP)\n    val = ").concat("i"===s.type?"int(":"","sample_map((").concat(i,"_map_texMatrix * vec3(uv, 1.0)).xy, ").concat(i,"_map, ").concat(i,"_map_invert, ").concat(i,"_map_encoding, ").concat(i,"_map_valueScale).r").concat("c"===s.type?"gb":"i"===s.type?" > 0.5)":"",";\n    #endif\n    return val").concat(/rotation$/.test(i)?" / ".concat(c,"(PI * 2.0)"):"",";\n}\n\n")}}return e.replace(/^#inject<uniforms>$/m,t).replace(/^#inject<getters>$/m,r)}(c.a)};function V(e){return e.replace(/(_[a-z])/gi,(function(e){return e.toUpperCase().replace("_","")}))}for(var j,k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(l,e);var t,r,a,n,i,s=(t=l,r=y(),function(){var e,a=m(t);if(r){var n=m(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return d(this,e)});function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=s.call(this,{uniforms:o.UniformsUtils.clone(C.uniforms),vertexShader:C.vertexShader,fragmentShader:C.fragmentShader})).type="StandardSurfaceMaterial",e.supportsMrtNormals=!0,e.lights=!0,e.uniforms.u_sheenAlbedo.value=I.tex,e.uniforms.u_samplingRandomMap.value=D.tex,e.uniforms.envMapMipLevels.value=8,e.defines.SHEEN_ALBEDO_TABLE_SIZE=I.size,e.defines.SHEEN_ALBEDO_TABLE_RANGE=I.rng,e.defines.SHEEN_ALBEDO_TABLE_MIN=I.min,e.defines.SAMPLING_RANDOM_TABLE_SIZE=D.size,e.defines.NUM_SAMPLES=8,e.shading=o.FlatShading,e.isStandardSurfaceMaterial=!0,e.needsUpdate=!0,e}return a=l,(n=[{key:"refreshUniforms",value:function(e){e.exposureBias.value=this.exposureBias;for(var t=0,r=Object.keys(M);t<r.length;t++){var a=r[t],n=this[V(a.slice(2))];n instanceof o.Texture&&this.refreshTextureUniforms(a,n,e)}e.envMap.value=this.envMap,e.irradianceMap.value=this.irradianceMap,e.envMapExposure.value=this.envMapExposure,e.envRotationSin.value=this.envRotationSin,e.envRotationCos.value=this.envRotationCos}},{key:"refreshTextureUniforms",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.uniforms;r["".concat(e,"_map")].value=t,r["".concat(e,"_map_texMatrix")].value=t.matrix,r["".concat(e,"_map_invert")].value=t.invert?1:0,r["".concat(e,"_map_encoding")].value="linear"===t.encoding?1:0,r["".concat(e,"_map_valueScale")].value=t.rgbScale,/normal$/.test(e)&&(r["".concat(e,"_map_isHeight")].value=t.isHeightMap?1:0,r["".concat(e,"_map_heightScale")].value.set(t.heightMapScale,t.heightMapScale))}},{key:"_getter",value:function(e,t){if(this.defines.hasOwnProperty("USE_".concat(t.slice(2).toUpperCase(),"_MAP")))return this.uniforms["".concat(t,"_map")].value;var r=this.uniforms[t].value;return"i"===e?!!r:r}},{key:"_setter",value:function(e,t,r){if(r instanceof o.Texture)return this.refreshTextureUniforms(t,r),this.defines.hasOwnProperty("USE_".concat(t.slice(2).toUpperCase(),"_MAP"))||(this.defines["USE_".concat(t.slice(2).toUpperCase(),"_MAP")]=!0,this.needsUpdate=!0),!0;switch(null==r&&(r="c"===e||"v3"===e?M[t].clone():M[t].value),e){case"f":if("number"!=typeof r)return console.warn("Invalid value for ".concat(V(t.slice(2)),"; expected number or texture")),!1;break;case"c":if(!(r instanceof o.Color)){if("number"!=typeof r&&"string"!=typeof r)return console.warn("Invalid value for ".concat(V(t.slice(2)),"; expected color or texture")),!1;r=new o.Color(r)}break;case"v3":if(!(r instanceof o.Vector3))return console.warn("Invalid value for ".concat(V(t.slice(2)),"; expected vec3 or texture")),!1;break;case"i":r=!!r}return this.uniforms[t].value!==r&&(this.uniforms[t].value=r),this.defines.hasOwnProperty("USE_".concat(t.slice(2).toUpperCase(),"_MAP"))&&(delete this.defines["USE_".concat(t.slice(2).toUpperCase(),"_MAP")],this.needsUpdate=!0),!0}},{key:"clone",value:function(){var e=new l;e.standardSurface=this.standardSurface,e.name=this.tag,e.packedNormals=!0;for(var t=0,r=Object.keys(M);t<r.length;t++){var a=V(r[t].slice(2));this[a]instanceof o.Vector3||this[a]instanceof o.Color?e[a]=this[a].clone():e[a]=this[a]}return e.envMap=this.envMap,e.irradianceMap=this.irradianceMap,e.envMapExposure=this.envMapExposure,e.envRotationSin=this.envRotationSin,e.envRotationCos=this.envRotationCos,e.exposureBias=this.exposureBias,e.tonemapOutput=this.tonemapOutput,e.cutplanes=this.cutplanes,e.textureMaps=this.textureMaps,e.texturesLoaded=this.texturesLoaded,e}},{key:"transparent",get:function(){return this.uniforms.u_opacity.value.r<1||this.uniforms.u_opacity.value.g<1||this.uniforms.u_opacity.value.b<1||this.uniforms.u_transmission.value>0||null!==this.uniforms.u_transmission_map.value},set:function(e){return!0}},{key:"opacity",get:function(){return this.uniforms?(this.uniforms.u_opacity.value.r+this.uniforms.u_opacity.value.g+this.uniforms.u_opacity.value.b)/3:1},set:function(e){return!this.uniforms||("number"==typeof e&&(e=new o.Color(e,e,e)),this._setter("c","u_opacity",e))}},{key:"envMap",get:function(){return this.uniforms.envMap.value},set:function(e){return this.uniforms.envMap.value!==e&&(this.uniforms.envMap.value=e),!0}},{key:"irradianceMap",get:function(){return this.uniforms.irradianceMap.value},set:function(e){return this.uniforms.irradianceMap.value!==e&&(this.uniforms.irradianceMap.value=e),!0}},{key:"envMapExposure",get:function(){return this.uniforms.envMapExposure.value},set:function(e){return this.uniforms.envMapExposure.value!==e&&(this.uniforms.envMapExposure.value=e),!0}},{key:"envRotationSin",get:function(){return this.uniforms.envRotationSin.value},set:function(e){return this.uniforms.envRotationSin.value!==e&&(this.uniforms.envRotationSin.value=e),!0}},{key:"envRotationCos",get:function(){return this.uniforms.envRotationCos.value},set:function(e){return this.uniforms.envRotationSin.value!==e&&(this.uniforms.envRotationCos.value=e),!0}}])&&f(a.prototype,n),i&&f(a,i),l}(o.ShaderMaterial),B=function(){var e=p(z[H],2),t=e[0],r=e[1],a=V(t.slice(2));Object.hasOwnProperty.call(k.prototype,a)||Object.defineProperty(k.prototype,a,{get:function(){return this._getter(r.type,t)},set:function(e){return this._setter(r.type,t,e)}})},H=0,z=Object.entries(M);H<z.length;H++)B();function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e){var t=e.units||"radian";return e.value*="radian"===t?1:Math.PI/180}function W(){return 2*Math.PI}function Z(e,t){var r=e.units||t;return oe(e.value,r,t)}function K(e,t){return oe(1,e.units||t,t)}function Y(e){return e.value}function J(){return 1}var ee={coat_rotation:Q,specular_rotation:Q,subsurface_scale:Z,transmission_depth:Z,thin_film_thickness:function(e,t){var r=e.units||t;return oe(e.value,r,"nanometer")}},te={coat_rotation:W,specular_rotation:W,subsurface_scale:K,transmission_depth:K,thin_film_thickness:function(e,t){return oe(1,e.units||t,"nanometer")}},re={coat_normal:!0,normal:!0},ae={nanometer:{millimeter:1e-6,centimeter:1e-7,inch:3.93701e-8,decimeter:1e-8,foot:3.28084e-9,yard:1.09361e-9,meter:1e-9,kilometer:1e-12,mile:621371e-18},millimeter:{nanometer:1e6,centimeter:.1,inch:.0393701,decimeter:.01,foot:.00328084,yard:.00109361,meter:.001,kilometer:1e-6,mile:6.21371e-7},centimeter:{nanometer:1e7,millimeter:10,inch:.393701,decimeter:.1,foot:.0328084,yard:.0109361,meter:.01,kilometer:1e-5,mile:621371e-11},inch:{nanometer:254e5,millimeter:25.4,centimeter:2.54,decimeter:.254,foot:1/12,yard:1/36,meter:.0254,kilometer:254e-7,mile:1/63360},decimeter:{nanometer:1e8,millimeter:100,centimeter:10,inch:3.93701,foot:.328084,yard:.109361,meter:.1,kilometer:1e-4,mile:621371e-10},foot:{nanometer:3048e5,millimeter:304.8,centimeter:30.48,inch:12,decimeter:3.048,yard:1/3,meter:.3048,kilometer:3048e-7,mile:1/5280},yard:{nanometer:9144e5,millimeter:914.4,centimeter:91.44,inch:36,decimeter:9.144,foot:3,meter:.9144,kilometer:9144e-7,mile:1/1760},meter:{nanometer:1e9,millimeter:1e3,cenimeter:100,inch:39.3701,decimeter:10,foot:3.28084,yard:1.09361,kilometer:.001,mile:621371e-9},kilometer:{nanometer:1e12,millimeter:1e6,centimeter:1e5,inch:39370.1,decimeter:1e4,foot:3280.84,yard:1093.61,meter:1e3,mile:.621371},mile:{nanometer:160934e7,millimeter:1609340,centimeter:160934,inch:63360,decimeter:16093.4,foot:5280,yard:1760,meter:1609.34,kilometer:1.60934}};function ne(e){if("number"==typeof e)switch(e){case 8208:return"nanometer";case 8206:return"millimeter";case 8205:return"centimeter";case 8214:return"inch";case 8204:return"decimeter";case 8215:return"foot";case 8221:return"yard";case 8193:return"meter";case 8201:return"kilometer";case 8225:return"mile";default:return e}else if("string"==typeof e)switch(e.toLowerCase()){case"nm":case"nanometer":case"nanometers":return"nanometer";case"mm":case"millimeter":case"millimeters":return"millimeter";case"cm":case"centimeter":case"centimeters":return"centimeter";case"in":case"inch":case"inches":return"inch";case"dm":case"decimeter":case"decimeters":return"decimeter";case"ft":case"foot":case"feet":return"foot";case"yd":case"yard":case"yards":return"yard";case"m":case"meter":case"meters":return"meter";case"km":case"kilometer":case"kilometers":return"kilometer";case"mi":case"mile":case"miles":return"mile";default:return e}return e}function oe(e,t,r){if((t=ne(t))===(r=ne(r)))return e;if(!ae[t])throw new Error("unrecognized source units: ".concat(t));if(!ae[t][r])throw new Error("unrecognized destination units: ".concat(r));return e*ae[t][r]}function ie(e,t){if(!t)return e;if("/"===t)return e;if(!/^#?\//.test(t))throw new Error("bad pointer: ".concat(t));for(var r=t.split("/").filter((function(e){return e&&"#"!==e}));r.length;)try{e=Array.isArray(e)?e[parseInt(r.shift())]:e[r.shift()]}catch(e){throw new Error("Unable to find by pointer: ".concat(t))}return e}function se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=ie(e,t),a=[];for(var n in r){var o=r[n];if("$ref"===n){var i=o.slice(1);try{ie(e,i)}catch(e){a.push(new Error('Texture reference "#'.concat(i," does not exist (refereced from ").concat(t,"/").concat(n,")")))}}else(Array.isArray(o)||"object"===X(o))&&(a=a.concat(se(e,t+"/"+n)))}return a}function le(e,t){if(!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];j||(j=(new a).compile(n)),j(e);var r=[].concat(j.errors||[],se(e));return!r.length||(t||console.error(["Standard Surface validation errors:"].concat(r.map((function(e){return JSON.stringify(e)}))).join("\n")),!1)}(e))throw new Error("Invalid Standard Surface definition");var r=new k;r.standardSurface=e,r.name=r.tag=e.tag,r.transparent=e.transparent,r.packedNormals=!0,r.needsUpdate=!0;for(var o=r.textureMaps={},i=r.uniforms,s=e.parameters,l=0,c=Object.entries(s);l<c.length;l++){var u=q(c[l],2),f=u[0],d=u[1],m="u_".concat(f);if(!i[m])throw new Error("unrecognized parameter: ".concat(f));var p=i[m].type;if(d.hasOwnProperty("value"))switch(p){case"c":r.uniforms[m].value=new THREE.Color(d.value.r,d.value.g,d.value.b);break;case"v3":r.uniforms[m].value=new THREE.Vector3(d.value.x,d.value.y,d.value.z);break;case"f":i[m].value=(ee[f]||Y)(d,t);break;case"i":r.uniforms[m].value=d.value?1:0;break;default:throw new Error(" unreachable ")}else if(d.hasOwnProperty("texture")){if(!d.texture.hasOwnProperty("$ref")||"string"!=typeof d.texture.$ref)throw new Error("invalid ref");var h=m.slice(2).replace(/(_[a-z])/gi,(function(e){return e.toUpperCase().replace("_","")})),v=ie(e,d.texture.$ref),_="f"===p?(te[f]||J)(d,t):1;o[h]={mapName:h,uri:v.bitmap,textureObj:v,converter:ce,mtlSpecific:{sceneUnit:t,unitScale:_,isNormal:re[f]}}}}return r.needsUpdate=!0,r}function ce(e,t,r,a){var n=e.textureObj;r=e.mtlSpecific.sceneUnit||r,t.anisotropy=e.mtlSpecific.isNormal?0:a||0,t.mapping=THREE.UVMapping,t.wrapS=!1===n.uRepeat?THREE.ClampToEdgeWrapping:THREE.RepeatWrapping,t.wrapT=!1===n.vRepeat?THREE.ClampToEdgeWrapping:THREE.RepeatWrapping,t.magFilter=t.minFilter="nearest"===n.filtering?THREE.NearestFilter:THREE.LinearFilter,t.encoding="linear"===n.encoding?"linear":"srgb",t.isHeightMap=!0===n.isHeightMap,t.invert=!0===n.invert,t.heightMapScale=oe((n.heightMapScale||{}).value||1,(n.heightMapScale||{}).units||r,r),t.rgbScale=((n.rgbScale||{}).value||1)*e.mtlSpecific.unitScale;var o=oe((n.realWorldOffsetX||{}).value||0,(n.realWorldOffsetX||{}).units||r,r),i=oe((n.realWorldOffsetY||{}).value||0,(n.realWorldOffsetY||{}).units||r,r),s=oe((n.realWorldScaleX||{}).value||1,(n.realWorldScaleX||{}).units||r,r),l=oe((n.realWorldScaleY||{}).value||1,(n.realWorldScaleY||{}).units||r,r),c=(n.uOffset||{}).value||0,u=(n.uScale||{}).value||1,f=(n.vOffset||{}).value||0,d=(n.vScale||{}).value||1,m=((n.wAngle||{}).value||0)*("degree"===(n.wAngle||{}).units?Math.PI/180:1),p=Math.cos(m),h=Math.sin(m),v=u/s,_=d/l;t.matrix=new THREE.Matrix3,t.matrix.elements=[p*v,h*v,0,-h*_,p*_,0,-p*v*o+h*_*i+c,-h*v*o-p*_*i+f,1]}function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=he(e);if(t){var n=he(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return pe(this,r)}}function pe(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ve=Autodesk.Viewing,_e=ve.Private,ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(o,e);var t,r,a,n=me(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n.call(this,e,t)}return t=o,(r=[{key:"load",value:function(){return!0}},{key:"unload",value:function(){}},{key:"activate",value:function(){return!1}},{key:"deactivate",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"onToolbarCreated",value:function(e){var t=this,r=this.viewer.renderoptions;if(r){var a,n,o,i;this._updateNumSamplesUI=(a=this.updateNumSamples,n=600,function(){var e=this,t=arguments,r=function(){i=null,o||a.apply(e,t)},s=o&&!i;clearTimeout(i),i=setTimeout(r,n),s&&a.apply(e,t)});var s=_e.OptionSlider;r._numSamples=new s("Num Samples",1,32,r.tbody),r._numSamples.setGlobalManager(this.globalManager),r._numSamples.setValue(8),r._numSamples.sliderElement.step=1,r.addEventListener(r._numSamples,"change",(function(e){var r=parseInt(e.detail.value);_e.logger.debug("value: "+r),t._updateNumSamplesUI(r)})),r.uninitialize=function(){_e.RenderOptionsPanel.prototype.uninitialize.call(this),this._numSamples=null,this._updateNumSamplesUI=null}.bind(r)}}},{key:"processModel",value:function(e){_e.logger.info("SVF contains StandardSurface.json material definitions:");var t=e.getData().stdSurfMats;this.processMaterials(e,t)}},{key:"processMaterials",value:function(e,t){var r=this,a=t.materials,n=t.scene.SceneUnit,o=!1;Object.keys(a).forEach((function(t){var i,s=a[t];try{i=le(s,n)}catch(e){var l=e;return l instanceof Error||(l=new Error("StandardSurface material ".concat(t," parse failed: ").concat(e,"}"))),void _e.logger.error(l)}o=!0,_e.logger.info("StandardSurface material ".concat(t," is valid")),r._updateMaterial(e,t,i).texturesLoaded&&_e.TextureLoader.loadMaterialTextures(e,i,r.viewer.impl)})),o&&this.viewer.impl.sceneUpdated(!1,!1)}},{key:"_updateMaterial",value:function(e,t,r){var a=e.getFragmentList(),n=this.viewer.impl.matman(),o=n._getMaterialHash(e,t),i=n._materials[o];if(i&&i.dispose(),n.addMaterial(o,r,!0),a.useThreeMesh)for(var s=a.vizmeshes,l=0;l<s.length;++l)s[l]&&s[l].material===i&&(s[l].material=r);else{var c=a.materialmap[i.id];void 0!==c&&(a.materialmap[r.id]=c,a.materialIdMap[c]=r)}return i}},{key:"updateNumSamples",value:function(e){var t=0;this.viewer.impl.matman().forEach((function(r){r.isStandardSurfaceMaterial&&r.defines.NUM_SAMPLES!==e&&(r.defines.NUM_SAMPLES=e,r.needsUpdate=!0,t++)}),!0,!1),t>0&&(_e.logger.debug("NUM_SAMPLES: "+e+" / materials updated: "+t+" | Wait for LMV to re-render."),this.viewer.impl.invalidate(!1,!0,!1))}}])&&fe(t.prototype,r),a&&fe(t,a),o}(ve.Extension);ve.theExtensionManager.registerExtension("Autodesk.StandardSurface",ge)},76:function(e,t,r){"use strict";var a=r(556),n=r(77),o=r(36),i=r(126),s=r(558);function l(e,t,r){var a=this._refs[r];if("string"==typeof a){if(!this._refs[a])return l.call(this,e,t,a);a=this._refs[a]}if((a=a||this._schemas[r])instanceof i)return p(a.schema,this._opts.inlineRefs)?a.schema:a.validate||this._compile(a);var n,o,s,u=c.call(this,t,r);return u&&(n=u.schema,t=u.root,s=u.baseId),n instanceof i?o=n.validate||e.call(this,n.schema,t,void 0,s):void 0!==n&&(o=p(n,this._opts.inlineRefs)?n:e.call(this,n,t,void 0,s)),o}function c(e,t){var r=a.parse(t),n=v(r),o=h(this._getId(e.schema));if(0===Object.keys(e.schema).length||n!==o){var s=g(n),l=this._refs[s];if("string"==typeof l)return u.call(this,e,l,r);if(l instanceof i)l.validate||this._compile(l),e=l;else{if(!((l=this._schemas[s])instanceof i))return;if(l.validate||this._compile(l),s==g(t))return{schema:l,root:e,baseId:o};e=l}if(!e.schema)return;o=h(this._getId(e.schema))}return d.call(this,r,o,e.schema,e)}function u(e,t,r){var a=c.call(this,e,t);if(a){var n=a.schema,o=a.baseId;e=a.root;var i=this._getId(n);return i&&(o=y(o,i)),d.call(this,r,o,n,e)}}e.exports=l,l.normalizeId=g,l.fullPath=h,l.url=y,l.ids=function(e){var t=g(this._getId(e)),r={"":t},i={"":h(t,!1)},l={},c=this;return s(e,{allKeys:!0},(function(e,t,s,u,f,d,m){if(""!==t){var p=c._getId(e),h=r[u],v=i[u]+"/"+f;if(void 0!==m&&(v+="/"+("number"==typeof m?m:o.escapeFragment(m))),"string"==typeof p){p=h=g(h?a.resolve(h,p):p);var _=c._refs[p];if("string"==typeof _&&(_=c._refs[_]),_&&_.schema){if(!n(e,_.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=g(v))if("#"==p[0]){if(l[p]&&!n(e,l[p]))throw new Error('id "'+p+'" resolves to more than one schema');l[p]=e}else c._refs[p]=v}r[t]=h,i[t]=v}})),l},l.inlineRef=p,l.schema=c;var f=o.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function d(e,t,r,a){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var n=e.fragment.split("/"),i=1;i<n.length;i++){var s=n[i];if(s){if(void 0===(r=r[s=o.unescapeFragment(s)]))break;var l;if(!f[s]&&((l=this._getId(r))&&(t=y(t,l)),r.$ref)){var u=y(t,r.$ref),d=c.call(this,a,u);d&&(r=d.schema,a=d.root,t=d.baseId)}}}return void 0!==r&&r!==a.schema?{schema:r,root:a,baseId:t}:void 0}}var m=o.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function p(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var a=0;a<t.length;a++)if("object"==typeof(r=t[a])&&!e(r))return!1}else for(var n in t){if("$ref"==n)return!1;if("object"==typeof(r=t[n])&&!e(r))return!1}return!0}(e):t?function e(t){var r,a=0;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(r=t[n])&&(a+=e(r)),a==1/0)return 1/0}else for(var o in t){if("$ref"==o)return 1/0;if(m[o])a++;else if("object"==typeof(r=t[o])&&(a+=e(r)+1),a==1/0)return 1/0}return a}(e)<=t:void 0)}function h(e,t){return!1!==t&&(e=g(e)),v(a.parse(e))}function v(e){return a.serialize(e).split("#")[0]+"#"}var _=/#\/?$/;function g(e){return e?e.replace(_,""):""}function y(e,t){return t=g(t),a.resolve(e,t)}},77:function(e,t,r){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var a,n,o;if(Array.isArray(t)){if((a=t.length)!=r.length)return!1;for(n=a;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((a=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=a;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=a;0!=n--;){var i=o[n];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r}},78:function(e,t,r){"use strict";var a=r(76);function n(e,t,r){this.message=r||n.message(e,t),this.missingRef=a.url(e,t),this.missingSchema=a.normalizeId(a.fullPath(this.missingRef))}function o(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:o((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:o(n)},n.message=function(e,t){return"can't resolve reference "+t+" from id "+e}}});
//# sourceMappingURL=StandardSurface.min.js.map