/*!
 * LMV v7.32.0
 * 
 * Copyright 2020 Autodesk, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 * 
 * Autodesk Forge Viewer Usage Limitations:
 * 
 * The Autodesk Forge viewer can only be used to view files generated by
 * Autodesk Forge services. The Autodesk Forge Viewer JavaScript must be
 * delivered from an Autodesk hosted URL.
 */
Autodesk.Extensions.BoxSelection=function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=642)}({4:function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var i=(s=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),r=o.sources.map((function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"}));return[n].concat(r).concat([i]).join("\n")}var s;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},5:function(t,e,n){var o,i,r={},s=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=o.apply(this,arguments)),i}),a=function(t,e){return e?e.querySelector(t):document.querySelector(t)},l=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var o=a.call(this,t,n);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}e[t]=o}return e[t]}}(),c=null,u=0,f=[],h=n(6);function p(t,e){for(var n=0;n<t.length;n++){var o=t[n],i=r[o.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](o.parts[s]);for(;s<o.parts.length;s++)i.parts.push(g(o.parts[s],e))}else{var a=[];for(s=0;s<o.parts.length;s++)a.push(g(o.parts[s],e));r[o.id]={id:o.id,refs:1,parts:a}}}}function d(t,e){for(var n=[],o={},i=0;i<t.length;i++){var r=t[i],s=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};o[s]?o[s].parts.push(a):n.push(o[s]={id:s,parts:[a]})}return n}function v(t,e){var n=l(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=f[f.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),f.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=l(t.insertAt.before,n);n.insertBefore(e,i)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=f.indexOf(t);e>=0&&f.splice(e,1)}function b(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var o=function(){0;return n.nc}();o&&(t.attrs.nonce=o)}return m(e,t.attrs),v(t,e),e}function m(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function g(t,e){var n,o,i,r;if(e.transform&&t.css){if(!(r="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=r}if(e.singleton){var s=u++;n=c||(c=b(e)),o=S.bind(null,n,s,!1),i=S.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",m(e,t.attrs),v(t,e),e}(e),o=B.bind(null,n,e),i=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=b(e),o=T.bind(null,n),i=function(){y(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return p(n,e),function(t){for(var o=[],i=0;i<n.length;i++){var s=n[i];(a=r[s.id]).refs--,o.push(a)}t&&p(d(t,e),e);for(i=0;i<o.length;i++){var a;if(0===(a=o[i]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete r[a.id]}}}};var w,x=(w=[],function(t,e){return w[t]=e,w.filter(Boolean).join("\n")});function S(t,e,n,o){var i=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=x(e,i);else{var r=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function T(t,e){var n=e.css,o=e.media;if(o&&t.setAttribute("media",o),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function B(t,e,n){var o=n.css,i=n.sourceMap,r=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||r)&&(o=h(o)),i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([o],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}},6:function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,o=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var i,r=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(i=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},600:function(t,e,n){var o=n(601);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(o,i);o.locals&&(t.exports=o.locals)},601:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,".icon-box-selection{fill:none;stroke:currentColor;stroke-width:1;stroke-dasharray:4 2}.box-selection{border:1px solid #55aaff;background-color:rgba(75,160,255,0.3);position:fixed}\n",""])},642:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.r(e),n.d(e,"BoxSelectionExtension",(function(){return p}));var r=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),this.viewer=e,this.options=n,this.isDown=!1,this.clientRect=e.impl.getCanvasBoundingClientRect(),this.element=document.createElement("div"),this.element.classList.add(this.options.cssClassName||"box-selection"),this.element.style.pointerEvents="none",this.startPoint=new THREE.Vector2,this.pointTopLeft=new THREE.Vector2,this.pointBottomRight=new THREE.Vector2,this.width=0,this.height=0}var e,n,r;return e=t,(n=[{key:"getName",value:function(){return"box-selection"}},{key:"getNames",value:function(){return["box-selection"]}},{key:"activate",value:function(){this.active=!0}},{key:"deactivate",value:function(){this.onSelectOver(),this.active=!1}},{key:"register",value:function(){}},{key:"handleGesture",value:function(t){switch(t.type){case"dragstart":return this.handleButtonDown(t,0);case"dragmove":return this.handleMouseMove(t);case"dragend":return this.handleButtonUp(t,0)}return!1}},{key:"handleButtonDown",value:function(t,e){return 0===e&&(this.viewer.impl.selector.clearSelection(),this.isDown=!0,this.onSelectStart(t),!0)}},{key:"handleMouseMove",value:function(t){return!!this.isDown&&(this.onSelectMove(t),!0)}},{key:"handleButtonUp",value:function(t,e){return 0===e&&(this.isDown=!1,this.onSelectOver(t),this.viewer.impl.selector.setAggregateSelection(this.getSelection()),!0)}},{key:"getSelection",value:function(){for(var t=this.viewer.impl.clientToViewport(this.pointTopLeft.x-this.clientRect.left,this.pointBottomRight.y-this.clientRect.top),e=this.viewer.impl.hitBoxTestViewport(t,this.width/this.viewer.impl.canvas.clientWidth,this.height/this.viewer.impl.canvas.clientHeight),n=[],o={},i={},r=0;r<e.length;r++){var s=e[r].model.id;i[s]||(i[s]=e[r].model),o[s]||(o[s]=[]),o[s].push(e[r].dbId)}for(var a in o)n.push({model:i[a],ids:o[a]});return n}},{key:"onSelectStart",value:function(t){this.viewer.canvas.parentElement.appendChild(this.element),this.element.style.left=t.clientX+"px",this.element.style.top=t.clientY+"px",this.element.style.width="0px",this.element.style.height="0px",this.startPoint.x=t.clientX,this.startPoint.y=t.clientY}},{key:"onSelectMove",value:function(t){this.pointBottomRight.x=Math.max(this.startPoint.x,t.clientX),this.pointBottomRight.y=Math.max(this.startPoint.y,t.clientY),this.pointTopLeft.x=Math.min(this.startPoint.x,t.clientX),this.pointTopLeft.y=Math.min(this.startPoint.y,t.clientY),this.width=this.pointBottomRight.x-this.pointTopLeft.x,this.height=this.pointBottomRight.y-this.pointTopLeft.y,this.element.style.left=this.pointTopLeft.x+"px",this.element.style.top=this.pointTopLeft.y+"px",this.element.style.width=this.width+"px",this.element.style.height=this.height+"px"}},{key:"onSelectOver",value:function(){this.element.parentElement&&this.element.parentElement.removeChild(this.element)}}])&&i(e.prototype,n),r&&i(e,r),t}();n(600);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=f(t);if(e){var i=f(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=Autodesk.Viewing;var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(s,t);var e,n,o,i=c(s);function s(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(n=i.call(this,t,e)).name="box-selection",n}return e=s,(n=[{key:"load",value:function(){return this.boxSelectionTool=new r(this.viewer,this.options),this.viewer.toolController.registerTool(this.boxSelectionTool),!0}},{key:"unload",value:function(){if("box-selection"===this.viewer.getActiveNavigationTool()&&this.viewer.setActiveNavigationTool(),this.boxSelectionToolButton){var t=this.viewer.getToolbar().getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);t&&(t.removeControl(this.boxSelectionToolButton.getId()),this.boxSelectionToolButton=null)}return this.viewer.toolController.deregisterTool(this.boxSelectionTool),!0}},{key:"onToolbarCreated",value:function(t){var e=t.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);if(e){var n=this;this.boxSelectionToolButton=new Autodesk.Viewing.UI.Button("toolbar-box-selection"),this.boxSelectionToolButton.setIcon("icon-box-selection"),this.boxSelectionToolButton.icon.innerHTML=['<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><rect x="0.5" y="0.5" width="23" height="18" /></svg>'].join(""),this.boxSelectionToolButton.setToolTip("Select"),this.boxSelectionToolButton.onClick=function(){var t=n.boxSelectionToolButton.getState();t===Autodesk.Viewing.UI.Button.State.INACTIVE?(n.activate("box-selection"),n.boxSelectionToolButton.setState(Autodesk.Viewing.UI.Button.State.ACTIVE)):t===Autodesk.Viewing.UI.Button.State.ACTIVE&&(n.deactivate(),n.boxSelectionToolButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE))},e.addControl(this.boxSelectionToolButton,{index:0})}}},{key:"activate",value:function(t){return"box-selection"===t&&this.viewer.setActiveNavigationTool("box-selection"),!0}},{key:"deactivate",value:function(){return this.viewer.setActiveNavigationTool(),!0}}])&&a(e.prototype,n),o&&a(e,o),s}(h.Extension);h.theExtensionManager.registerExtension("Autodesk.BoxSelection",p)}});
//# sourceMappingURL=BoxSelection.min.js.map