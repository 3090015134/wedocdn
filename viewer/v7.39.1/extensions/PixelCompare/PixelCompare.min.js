/*!
 * LMV v7.39.1
 * 
 * Copyright 2021 Autodesk, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 * 
 * Autodesk Forge Viewer Usage Limitations:
 * 
 * The Autodesk Forge viewer can only be used to view files generated by
 * Autodesk Forge services. The Autodesk Forge Viewer JavaScript must be
 * delivered from an Autodesk hosted URL.
 */
Autodesk.Extensions.PixelCompare=function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=673)}({217:function(e,t){e.exports="varying vec2 vUv;\nuniform vec2 resolution;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"},218:function(e,t){e.exports="#define OVERLAY 0\n#define SIDE_BY_SIDE 1\n#define FXAA_EDGE_SHARPNESS (8.0)\n#define FXAA_EDGE_THRESHOLD (0.125)\n#define FXAA_EDGE_THRESHOLD_MIN (0.05)\n#define FXAA_RCP_FRAME_OPT (0.5)\n#define FXAA_RCP_FRAME_OPT2 (2.0)\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float diff_threshold;\nuniform highp vec2 resolution;\nuniform int diffMode;\nuniform float colorIntensity;\nuniform bool mainModelHidden;\nuniform bool secondaryModelHidden;\nuniform vec4 visibleModelBounds;\nvarying vec2 vUv;\nuniform float splitPosition;\nuniform highp float splitLineWidth;\nuniform vec3 splitLineColor;\nuniform highp float t;\nfloat toGrayscale(vec4 v) {\n    return dot(v.rgb, vec3(0.299, 0.587, 0.114));\n}\nfloat getGrayAt(sampler2D texInput, float i, float j) {\n    vec4 tex = texture2D(texInput, vUv + resolution*vec2(i, j));\n    float gray = toGrayscale(tex);\n    return gray;\n}\nfloat getDarkestGray(float i, float j) {\n    float gray1 = mainModelHidden ? 1.0 : getGrayAt(texture1, i, j);\n    float gray2 = secondaryModelHidden ? 1.0 : getGrayAt(texture2, i, j);\n    return min(gray1, gray2);\n}\nfloat getDeltaAt(float i, float j) {\n    float gray1 = mainModelHidden ? 1.0 : getGrayAt(texture1, i, j);\n    float gray2 = secondaryModelHidden ? 1.0 : getGrayAt(texture2, i, j);\n    return gray1 - gray2;\n}\nvec4 getColorAt(float i, float j) {\n    if (mainModelHidden || secondaryModelHidden) {\n        if (vUv.x <= visibleModelBounds.x || vUv.y <= visibleModelBounds.y || vUv.x >= visibleModelBounds.z || vUv.y >= visibleModelBounds.w) {\n            if (mainModelHidden) {\n                return texture2D(texture2, vUv);\n            } else {\n                return texture2D(texture1, vUv);\n            }            \n        }\n    }\n    float maxGray = getDarkestGray(i, j);\n    float delta = getDeltaAt(i, j);\n    if (abs(delta) > diff_threshold) {\n        if (delta < 0.0) {\n            return vec4(colorIntensity, 0.0, 0.0, 1.0);\n        }\n        return vec4(0.0, 0.0, colorIntensity, 1.0);\n    }\n    return vec4(vec3(maxGray), 1.0);\n}\n#ifdef ANTI_ALIASING\n    void applyAntiAliasing() {\n        \n        float lumaNw = toGrayscale(getColorAt(-0.5, -0.5));\n        float lumaSw = toGrayscale(getColorAt(0.5, -0.5));\n        float lumaNe = toGrayscale(getColorAt(-0.5, 0.5)) + 1.0/384.0;\n        float lumaSe = toGrayscale(getColorAt(0.5, 0.5));\n        vec4 rgbaM = getColorAt(0.0, 0.0);\n        float lumaM = toGrayscale(rgbaM);\n        float lumaMax = max(max(lumaNe, lumaSe), max(lumaNw, lumaSw));\n        float lumaMin = min(min(lumaNe, lumaSe), min(lumaNw, lumaSw));\n        float lumaMaxSubMinM = max(lumaMax, lumaM) - min(lumaMin, lumaM);\n        float lumaMaxScaledClamped = max(FXAA_EDGE_THRESHOLD_MIN, lumaMax * FXAA_EDGE_THRESHOLD);\n        if (lumaMaxSubMinM < lumaMaxScaledClamped) {\n            gl_FragColor = rgbaM;\n            return;\n        }\n        float dirSwMinusNe = lumaSw - lumaNe;\n        float dirSeMinusNw = lumaSe - lumaNw;\n        vec2 dir1 = normalize(vec2(dirSwMinusNe + dirSeMinusNw, dirSwMinusNe - dirSeMinusNw));\n        vec3 rgbN1 = getColorAt((-dir1 * FXAA_RCP_FRAME_OPT).x ,(-dir1 * FXAA_RCP_FRAME_OPT).y).rgb;\n        vec3 rgbP1 = getColorAt((dir1 * FXAA_RCP_FRAME_OPT).x ,(dir1 * FXAA_RCP_FRAME_OPT).y).rgb;\n        float dirAbsMinTimesC = min(abs(dir1.x), abs(dir1.y)) * FXAA_EDGE_SHARPNESS;\n        vec2 dir2 = clamp(dir1.xy / dirAbsMinTimesC, -2.0, 2.0);\n        \n        vec3 rgbN2 = getColorAt((-dir2 * FXAA_RCP_FRAME_OPT2).x ,(-dir2 * FXAA_RCP_FRAME_OPT2).y).rgb;\n        vec3 rgbP2 = getColorAt((dir2 * FXAA_RCP_FRAME_OPT2).x ,(dir2 * FXAA_RCP_FRAME_OPT2).y).rgb;\n        vec3 rgbA = rgbN1 + rgbP1;\n        vec3 rgbB = ((rgbN2 + rgbP2) * 0.25) + (rgbA * 0.25);\n        float lumaB = toGrayscale(vec4(rgbB, 1.0));\n        float alpha = rgbaM.a;\n        \n        if ((lumaB < lumaMin) || (lumaB > lumaMax))\n            gl_FragColor = vec4(rgbA * 0.5, rgbaM.a);\n        else\n            gl_FragColor = vec4(rgbB, rgbaM.a);\n    }\n#endif\nvoid main() {\n    vec4 tex1 = texture2D(texture1, vUv);\n    \n    if (diffMode == SIDE_BY_SIDE) {\n        if (abs(vUv.x - splitPosition) <= splitLineWidth) {\n            gl_FragColor = vec4(mix(tex1.rgb, splitLineColor, t), 1.0);\n        } else {\n            vec4 tex = vUv.x < splitPosition ? tex1 : texture2D(texture2, vUv);\n            gl_FragColor = vec4(mix(tex1.rgb, tex.rgb, t), 1.0);\n        }\n    } else if (diffMode == OVERLAY) {\n        gl_FragColor = vec4(mix(tex1.rgb, getColorAt(0.0, 0.0).rgb, t), 1.0);\n        \n        #ifdef ANTI_ALIASING\n            float delta = getDeltaAt(0.0, 0.0);\n            if (abs(delta) > diff_threshold) {\n                return;\n            }\n            for (int i = -1; i <= 1; i++) {\n                for (int j = -1; j <= 1; j++) {\n                    if (i != 0 && j!= 0) {\n                        float delta = getDeltaAt(float(i), float(j));\n                        if (abs(delta) > diff_threshold) {\n                            applyAntiAliasing();\n                            return;\n                        }\n                    }\n                }\n            }\n        #endif\n    }\n}"},4:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var o=(r=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),a=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[i].concat(a).concat([o]).join("\n")}var r;return[i].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i})).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(n[a]=!0)}for(o=0;o<e.length;o++){var r=e[o];"number"==typeof r[0]&&n[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="("+r[2]+") and ("+i+")"),t.push(r))}},t}},431:function(e,t,i){var n=i(432);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(5)(n,o);n.locals&&(e.exports=n.locals)},432:function(e,t,i){(e.exports=i(4)(!1)).push([e.i,'.pixelCompareFont-compare-btn:before{content:"\\E93C"}.pixelCompareFont-overlay-btn:before{content:"\\E93E"}.pixelCompareFont-sidebyside-btn:before{content:"\\E93F"}.pixelCompareFont-exit-compare-btn:before{content:"\\E93D"}.pixelCompareFont-panel-btn:before{content:"\\E940"}.pixelCompareFont-show-colors-btn:before{content:"\\E941"}.pixelCompareFont-hide-colors-btn:before{content:"\\E942"}.pixelCompareFont-move-btn:before{content:"\\E943"}.CompareUI__toolbar{z-index:5}.CompareUI__label{position:absolute;display:block;border-radius:5px;background-color:rgba(78,78,78,0.95);top:0px;font-size:12px;color:#FFFFFF;text-align:center;margin:10px;padding:10px;white-space:pre;pointer-events:none;z-index:5}.docking-panel.ComparePanel{top:25%;left:10%;width:340px;height:initial;resize:none;z-index:5}.docking-panel.ComparePanel .adsk-button{box-sizing:content-box}.docking-panel.ComparePanel .adsk-control-tooltip{bottom:auto;top:120%}.docking-panel.ComparePanel .ComparePanel__main-container{display:flex;flex-direction:column}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__buttons-container{background-color:rgba(0,0,0,0.05);padding:10px;text-align:center}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__buttons-container .adsk-button.inactive{border:1px solid #cccccc;border-radius:3px}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container{padding:10px;padding-top:0px;display:flex;flex-direction:column}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container{padding-left:5px;margin-left:-2px;margin-top:10px;border:1px solid rgba(0,0,0,0)}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container.align{border:1px solid #cccccc;border-radius:3px;background-color:rgba(0,0,0,0.05)}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-version{display:flex;width:42px;min-height:30px;border:1px solid #cccccc;border-radius:3px;background-color:rgba(0,0,0,0.05);margin-right:10px;font-weight:bold}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-visibility{display:flex;width:42px;min-height:30px;border:1px solid #cccccc;border-radius:3px;background-color:rgba(0,0,0,0.05);margin-right:10px;font-weight:bold}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-description-data{margin-right:40px}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-version-text{display:flex;justify-content:center;align-items:center;width:30px;padding-left:2px}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-color{border-radius:3px 0 0 3px;width:100%;height:100%;border-left:solid 5px transparent}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-color.blue.active{border-left:solid 5px #0696D7}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-color.red.active{border-left:solid 5px #FF0000}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-title{font-size:15px;font-weight:bold;padding-bottom:5px;padding-left:5px;word-break:break-all}.docking-panel.ComparePanel .ComparePanel__main-container .ComparePanel__items-container .ComparePanel__document-container .ComparePanel__doc-description{font-size:13px;line-height:1.2;font-weight:300;padding:5px 0px;padding-left:5px;display:flex;flex-direction:row}@font-face{font-family:\'pixelCompareFont\';src:url(data:application/font-woff;charset=utf-8;base64,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) format("woff");font-weight:normal;font-style:normal}[class^="pixelCompareFont-"],[class*=" pixelCompareFont-"]{font-family:\'pixelCompareFont\';font-style:normal;font-weight:normal;font-variant:normal;line-height:1;padding-top:2px;speak:none;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}\n',""])},5:function(e,t,i){var n,o,a={},r=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},l=function(e){var t={};return function(e,i){if("function"==typeof e)return e();if(void 0===t[e]){var n=s.call(this,e,i);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),d=null,c=0,u=[],f=i(6);function h(e,t){for(var i=0;i<e.length;i++){var n=e[i],o=a[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(y(n.parts[r],t))}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(y(n.parts[r],t));a[n.id]={id:n.id,refs:1,parts:s}}}}function p(e,t){for(var i=[],n={},o=0;o<e.length;o++){var a=e[o],r=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};n[r]?n[r].parts.push(s):i.push(n[r]={id:r,parts:[s]})}return i}function m(e,t){var i=l(e.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=u[u.length-1];if("top"===e.insertAt)n?n.nextSibling?i.insertBefore(t,n.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),u.push(t);else if("bottom"===e.insertAt)i.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=l(e.insertAt.before,i);i.insertBefore(t,o)}}function v(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function A(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=function(){0;return i.nc}();n&&(e.attrs.nonce=n)}return g(t,e.attrs),m(e,t),t}function g(e,t){Object.keys(t).forEach((function(i){e.setAttribute(i,t[i])}))}function y(e,t){var i,n,o,a;if(t.transform&&e.css){if(!(a="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=a}if(t.singleton){var r=c++;i=d||(d=A(t)),n=w.bind(null,i,r,!1),o=w.bind(null,i,r,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",g(t,e.attrs),m(e,t),t}(t),n=B.bind(null,i,t),o=function(){v(i),i.href&&URL.revokeObjectURL(i.href)}):(i=A(t),n=M.bind(null,i),o=function(){v(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=r()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var i=p(e,t);return h(i,t),function(e){for(var n=[],o=0;o<i.length;o++){var r=i[o];(s=a[r.id]).refs--,n.push(s)}e&&h(p(e,t),t);for(o=0;o<n.length;o++){var s;if(0===(s=n[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete a[s.id]}}}};var b,C=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function w(e,t,i,n){var o=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=C(t,o);else{var a=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}function M(e,t){var i=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}function B(e,t,i){var n=i.css,o=i.sourceMap,a=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||a)&&(n=f(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var r=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(r),s&&URL.revokeObjectURL(s)}},6:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var i=t.protocol+"//"+t.host,n=i+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(o=0===a.indexOf("//")?a:0===a.indexOf("/")?i+a:n+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},673:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return S}));var n,o=i(217),a=i.n(o),r=i(218),s=i.n(r),l=Autodesk.Viewing.Private.ShaderChunks,d={uniforms:THREE.UniformsUtils.merge([l.DepthTextureUniforms,{diff_threshold:{type:"f",value:.1},texture1:{type:"t",value:null},texture2:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(1/1024,1/512)},splitPosition:{type:"f",value:0},splitLineColor:{type:"c",value:null},diffMode:{type:"i",value:0},splitLineWidth:{type:"f",value:1},colorIntensity:{type:"f",value:1},t:{type:"f",value:1},mainModelHidden:{type:"i",value:0},secondaryModelHidden:{type:"i",value:0},visibleModelBounds:{type:"v4",value:new THREE.Vector4}}]),vertexShader:a.a,fragmentShader:s.a};function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var u={OVERLAY:"overlay",SIDE_BY_SIDE:"sidebyside"},f=(c(n={},u.OVERLAY,0),c(n,u.SIDE_BY_SIDE,1),n),h={DIFF_TOOL_DIFF_MODE_CHANGED:"diff.tool.diff.mode.changed",DIFF_TOOL_DEACTIVATED:"diff.tool.deactivated",DIFF_TOOL_MODEL_VISIBILITY_CHANGED:"diff.tool.model.visibility.changed"},p={SPLIT_LINE_MARGIN:50,SPLIT_LINE_POSITION:.5,SPLIT_LINE_WIDTH:1,SPLIT_LINE_COLOR:7580136,ANIMATION_DURATION:.3,DEFAULT_DIFF_MODE:u.OVERLAY};function m(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=Autodesk.Viewing,A=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.extension=t,this.viewer=t.viewer,this.options=t.options,this.setGlobalManager(this.viewer.globalManager),this.names=["pixelCompare"],this.splitLineMinTouchArea=Autodesk.Viewing.isMobileDevice()?44:10,this.splitLineLimit=p.SPLIT_LINE_MARGIN,this.lastDragPos=new THREE.Vector2}var t,i,n;return t=e,(i=[{key:"getNames",value:function(){return this.names}},{key:"getName",value:function(){return this.names[0]}},{key:"getCursor",value:function(){return this.lastMouseEvent&&this.extension.diffMode===u.SIDE_BY_SIDE&&this.intersectSplitLine(this.lastMouseEvent)?"col-resize":this.extension.changeOffsetMode?"move":null}},{key:"isActive",value:function(){return this.isActive}},{key:"activate",value:function(e){e!==this.getName()||this.isActive||(this.isActive=!0)}},{key:"deactivate",value:function(e){e===this.getName()&&this.isActive&&(this.isActive=!1)}},{key:"getRelativeX",value:function(e){var t=this.viewer.impl.getCanvasBoundingClientRect();return e.canvasX/t.width}},{key:"intersectSplitLine",value:function(e){var t=this.getRelativeX(e),i=this.viewer.impl.getCanvasBoundingClientRect().width;return Math.abs(t-this.extension.splitPosition)*i<Math.max(this.extension.splitLineWidth,this.splitLineMinTouchArea)}},{key:"handleButtonDown",value:function(e,t){return this.extension.diffMode===u.SIDE_BY_SIDE&&this.intersectSplitLine(e)?(this.draggingSplitLine=!0,!0):!(!this.extension.changeOffsetMode||Autodesk.Viewing.Private.isRightClick(e,this.viewer.navigation)||(this.draggingOffset=!0,this.lastDragPos.set(e.canvasX,e.canvasY),0))}},{key:"handleButtonUp",value:function(e,t){var i=!1;return this.extension.diffMode===u.SIDE_BY_SIDE&&(i=this.draggingSplitLine,this.draggingSplitLine=!1),this.draggingOffset&&(this.draggingOffset=!1,i=!0),i}},{key:"handleMouseMove",value:function(e){var t=!1;if(this.lastMouseEvent=e,this.draggingSplitLine&&this.extension.diffMode===u.SIDE_BY_SIDE){var i=this.getRelativeX(e),n=this.viewer.impl.getCanvasBoundingClientRect().width,o=i*n;o>=this.splitLineLimit&&o<=n-this.splitLineLimit&&this.extension.setSplitPosition(i),t=!0}if(this.draggingOffset){var a=new THREE.Vector2(e.canvasX,e.canvasY);this.translateSecondaryModel(a.clone().sub(this.lastDragPos)),this.lastDragPos=a,t=!0}return t}},{key:"handleKeyDown",value:function(e,t){if(this.extension.changeOffsetMode){var i;switch(t){case Autodesk.Viewing.KeyCode.LEFT:case Autodesk.Viewing.KeyCode.a:i=new THREE.Vector3(-1,0,0);break;case Autodesk.Viewing.KeyCode.RIGHT:case Autodesk.Viewing.KeyCode.d:i=new THREE.Vector3(1,0,0);break;case Autodesk.Viewing.KeyCode.UP:case Autodesk.Viewing.KeyCode.w:i=new THREE.Vector3(0,-1,0);break;case Autodesk.Viewing.KeyCode.DOWN:case Autodesk.Viewing.KeyCode.s:i=new THREE.Vector3(0,1,0)}return!!i&&(this.translateSecondaryModel(i),!0)}}},{key:"translateSecondaryModel",value:function(e){var t=this.viewer.clientToWorld(e.x,e.y,!1,!0).point,i=this.viewer.clientToWorld(0,0,!1,!0).point,n=t.sub(i);this.extension.translateSecondaryModel(n)}},{key:"handleGesture",value:function(e){switch(e.type){case"dragstart":return this.handleButtonDown(e);case"dragmove":return this.handleMouseMove(e);case"dragend":return this.handleButtonUp(e)}return!1}}])&&m(t.prototype,i),n&&m(t,n),e}();v.GlobalManagerMixin.call(A.prototype);i(431);function g(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y=Autodesk.Viewing,b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.extension=t,this.viewer=t.viewer,this.options=t.options,this.viewerContainer=this.viewer.container,this.setGlobalManager(this.viewer.globalManager)}var t,i,n;return t=e,(i=[{key:"createUI",value:function(){var e=this,t=this.getDocument();this.documents=[this.extension.mainModelInfo,this.extension.secondaryModelInfo];var i=Autodesk.Viewing.i18n.translate("Compared Documents");this.panel=new Autodesk.Viewing.UI.DockingPanel(this.viewerContainer,"ComparePanel",i,{addFooter:!1}),this.panel.container.classList.add("ComparePanel");var n=this.panel.createScrollContainer();this.mainContainer=t.createElement("div"),this.mainContainer.className="ComparePanel__main-container",this.createButtonsContainer(),this.itemsContainer=t.createElement("div"),this.itemsContainer.className="ComparePanel__items-container",this.mainContainer.appendChild(this.itemsContainer),this.colorStrips=[],this.documentContainers=[],this.visibilityButtons=[],this.labels=[],this.colorButtonStateBackup=void 0,this.documents.forEach((function(t,i){e.createDocumentContainer(t,i)})),this.onDiffModeChanged(),n.appendChild(this.mainContainer),this.panel.setVisible(!0),this.toolbarVisibilityBackup={},this.addToolbar(),this.toggleColorStrips(!0),this.panel.addVisibilityListener((function(t){var i=t?Autodesk.Viewing.UI.Button.State.ACTIVE:Autodesk.Viewing.UI.Button.State.INACTIVE;e.toolbarControls.showPanelButton.setState(i);var n=t?"Close Panel":"Open Panel";e.toolbarControls.showPanelButton.setToolTip(Autodesk.Viewing.i18n.t(n))})),this.onDiffModeChangedBinded=this.onDiffModeChanged.bind(this),this.updateVisibilityButtonsBinded=this.updateVisibilityButtons.bind(this),this.viewer.addEventListener(h.DIFF_TOOL_DIFF_MODE_CHANGED,this.onDiffModeChangedBinded),this.viewer.addEventListener(h.DIFF_TOOL_MODEL_VISIBILITY_CHANGED,this.updateVisibilityButtonsBinded)}},{key:"destroyUI",value:function(){this.panel.uninitialize(),this.hadToolbar?this.toolbar.removeControl("pixel_compare_control_group"):(this.viewerContainer.removeChild(this.toolbar.container),this.viewer.toolbar=void 0),this.toolbar=null,this.clearLabels(),this.colorStrips=null,this.documentContainer=null,this.documents=null,this.colorButtonStateBackup=void 0,this.restoreLMVToolbar(),this.toolbarVisibilityBackup={},this.viewer.removeEventListener(h.DIFF_TOOL_DIFF_MODE_CHANGED,this.onDiffModeChangedBinded),this.viewer.removeEventListener(h.DIFF_TOOL_MODEL_VISIBILITY_CHANGED,this.updateVisibilityButtonsBinded)}},{key:"hideLMVToolbar",value:function(){var e=this,t=this.viewer.getToolbar&&this.viewer.getToolbar();t&&t._controls.forEach((function(t){e.toolbarVisibilityBackup[t.getId()]=t.isVisible(),t.getId()!==Autodesk.Viewing.TOOLBAR.NAVTOOLSID&&t.setVisible(!1)}))}},{key:"restoreLMVToolbar",value:function(){var e=this,t=this.viewer.getToolbar&&this.viewer.getToolbar();t&&t._controls.forEach((function(t){t.setVisible(e.toolbarVisibilityBackup[t.getId()])}))}},{key:"createButtonsContainer",value:function(){var e=this.getDocument().createElement("div");e.className="ComparePanel__buttons-container",this.mainContainer.appendChild(e),this.colorButton=this.createColorButton(),e.appendChild(this.colorButton.container),this.moveButton=this.createMoveButton(),e.appendChild(this.moveButton.container)}},{key:"toggleColorStrips",value:function(e){this.colorStrips.forEach((function(t){e?t.classList.add("active"):t.classList.remove("active")})),this.extension.changeColorIntensity(e?1:0)}},{key:"colorButtonOnClick",value:function(){this.colorButton.getState()===Autodesk.Viewing.UI.Button.State.ACTIVE?(this.toggleColorStrips(!1),this.colorButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE),this.colorButton.setIcon("pixelCompareFont-show-colors-btn"),this.colorButton.setToolTip(Autodesk.Viewing.i18n.translate("Show colors"))):(this.toggleColorStrips(!0),this.colorButton.setState(Autodesk.Viewing.UI.Button.State.ACTIVE),this.colorButton.setIcon("pixelCompareFont-hide-colors-btn"),this.colorButton.setToolTip(Autodesk.Viewing.i18n.translate("Hide colors")))}},{key:"createColorButton",value:function(){var e=new Autodesk.Viewing.UI.Button("compare-panel-color-button");return e.setIcon("pixelCompareFont-show-colors-btn"),e.setToolTip(Autodesk.Viewing.i18n.translate("Show colors")),e.addEventListener("click",this.colorButtonOnClick.bind(this)),e.setState(Autodesk.Viewing.UI.Button.State.ACTIVE),e}},{key:"isMoveActive",value:function(){return this.moveButton&&this.moveButton.getState()===Autodesk.Viewing.UI.Button.State.ACTIVE}},{key:"moveButtonOnClick",value:function(){var e=this.moveButton.getState();e===Autodesk.Viewing.UI.Button.State.INACTIVE?(this.moveButton.setState(Autodesk.Viewing.UI.Button.State.ACTIVE),this.documentContainers[0].classList.add("align"),this.extension.setChangeOffsetMode(!0),this.moveButton.setToolTip(Autodesk.Viewing.i18n.translate("Finish align"))):e===Autodesk.Viewing.UI.Button.State.ACTIVE&&(this.moveButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE),this.extension.setChangeOffsetMode(!1),this.documentContainers[0].classList.remove("align"),this.moveButton.setToolTip(Autodesk.Viewing.i18n.translate("Align")))}},{key:"createMoveButton",value:function(){var e=new Autodesk.Viewing.UI.Button("compare-panel-move-button");return e.setIcon("pixelCompareFont-move-btn"),e.setToolTip(Autodesk.Viewing.i18n.translate("Align")),e.addEventListener("click",this.moveButtonOnClick.bind(this)),e}},{key:"createDocumentContainer",value:function(e,t){var i=this,n=this.getDocument(),o=n.createElement("div");o.className="ComparePanel__document-container",this.itemsContainer.appendChild(o),this.documentContainers.push(o);var a=n.createElement("div");a.className="ComparePanel__doc-color",a.classList.add(["red","blue"][t]),o.appendChild(a),this.colorStrips.push(a);var r=n.createElement("div");r.className="ComparePanel__doc-title";var s=e.title&&"".concat(e.title," ").concat(this.getFormattedVersionLabel(e));r.textContent=s||"".concat(Autodesk.Viewing.i18n.translate("Document")," ").concat(t+1),a.appendChild(r);var l=n.createElement("div");l.className="ComparePanel__doc-description treeview",a.appendChild(l);var d=n.createElement("div");if(d.className="ComparePanel__doc-description-data",l.appendChild(d),e.creator&&e.creationTime){var c=n.createElement("div");c.textContent="".concat(Autodesk.Viewing.i18n.translate("Uploaded By"),": ").concat(e.creator),d.appendChild(c);var u=n.createElement("div"),f=e.creationTime;u.textContent="".concat(Autodesk.Viewing.i18n.translate("At"),": ").concat(f),d.appendChild(u)}if(e.issuanceDate){var h=n.createElement("div");h.textContent="".concat(Autodesk.Viewing.i18n.translate("Issuance date"),": ").concat(e.issuanceDate),d.appendChild(h)}var p=n.createElement("div");p.className="visibility",p.id="pixelCompare-visibility-button-".concat(t),p.addEventListener("click",(function(){0===t?i.extension.changeMainModelVisibility(!i.extension.getMainModelVisibility()):i.extension.changeSecondaryModelVisibility(!i.extension.getSecondaryModelVisibility())}));var m=n.createElement("div");m.appendChild(p),this.visibilityButtons.push(m),l.appendChild(m)}},{key:"clearLabels",value:function(){var e=this;this.labels.forEach((function(t){e.viewerContainer.removeChild(t)})),this.labels=[]}},{key:"getFormattedVersionLabel",value:function(e){var t=e.version&&"v".concat(e.version),i=e.versionSet&&"(".concat(e.versionSet,")");return t||i||""}},{key:"onDiffModeChanged",value:function(){var e=this,t=function(t){if(e.documents[t].title){var i=e.getFormattedVersionLabel(e.documents[t]);return"".concat(e.documents[t].title," ").concat(i)}return"".concat(Autodesk.Viewing.i18n.translate("Document")," ").concat(t+1)},i=["left","right"];if(this.clearLabels(),this.extension.getDiffMode()===u.SIDE_BY_SIDE){this.documents.forEach((function(n,o){e.createLabel(t(o),i[o])}));var n=this.colorButton.getState();n!==Autodesk.Viewing.UI.Button.State.DISABLED&&(this.colorButtonStateBackup=n),n===Autodesk.Viewing.UI.Button.State.ACTIVE&&this.colorButtonOnClick(),this.colorButton.setState(Autodesk.Viewing.UI.Button.State.DISABLED)}else this.createLabel("".concat(t(0)," vs. ").concat(t(1)),"left"),void 0!==this.colorButtonStateBackup&&(this.colorButtonStateBackup===Autodesk.Viewing.UI.Button.State.ACTIVE&&this.colorButtonOnClick(),this.colorButton.setState(this.colorButtonStateBackup));this.updateVisibilityButtons()}},{key:"updateVisibilityButtons",value:function(){for(var e=0;e<=1;e++)this.visibilityButtons[e].className=this.extension.modelHiddenMap[e]?"dim":"",this.visibilityButtons[e].style.opacity=this.extension.getDiffMode()===u.SIDE_BY_SIDE?.3:1}},{key:"createLabel",value:function(e,t){var i=this.getDocument().createElement("div");i.className="CompareUI__label",i.textContent=e,"left"===t?i.style.left="0px":i.style.right="0px",this.viewerContainer.appendChild(i),this.labels.push(i)}},{key:"sideBySideButtonOnClick",value:function(){this.toolbarControls.sideBySideButton.getState()===Autodesk.Viewing.UI.Button.State.INACTIVE&&(this.toolbarControls.sideBySideButton.setState(Autodesk.Viewing.UI.Button.State.ACTIVE),this.showDiffButton.setIcon("pixelCompareFont-sidebyside-btn"),this.extension.setDiffMode(u.SIDE_BY_SIDE),this.isMoveActive()&&this.moveButtonOnClick()),this.showDiffButton.onClick=this.showDiffButton.arrowButton.onClick}},{key:"overlayButtonOnClick",value:function(){this.toolbarControls.overlayButton.getState()===Autodesk.Viewing.UI.Button.State.INACTIVE&&(this.toolbarControls.overlayButton.setState(Autodesk.Viewing.UI.Button.State.ACTIVE),this.showDiffButton.setIcon("pixelCompareFont-overlay-btn"),this.extension.setDiffMode(u.OVERLAY)),this.showDiffButton.onClick=this.showDiffButton.arrowButton.onClick}},{key:"showPanelOnClick",value:function(){var e=this.panel.isVisible();this.panel.setVisible(!e)}},{key:"exitButtonOnClick",value:function(){this.toolbarControls.exitButton.getState()===Autodesk.Viewing.UI.Button.State.INACTIVE?(this.toolbarControls.exitButton.setState(Autodesk.Viewing.UI.Button.State.ACTIVE),this.extension.deactivate()):this.toolbarControls.exitButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE)}},{key:"addToolbar",value:function(){this.hadToolbar=!!this.viewer.getToolbar(),this.hadToolbar||(this.viewer._createToolbar(),this.viewer.loadExtension("Autodesk.DefaultTools.NavTools",this.viewer.config)),this.hideLMVToolbar(),this.toolbar=this.viewer.getToolbar(),this.toolbarControls={},this.viewerToolbarDiffGroup=new Autodesk.Viewing.UI.ControlGroup("pixel_compare_control_group"),this.toolbar.addControl(this.viewerToolbarDiffGroup),this.toolbar.container.classList.add("CompareUI__toolbar"),this.viewerContainer.appendChild(this.toolbar.container),this.showDiffButton=new Autodesk.Viewing.UI.ComboButton("diff-tool-button-combo"),this.showDiffButton.setIcon("pixelCompareFont-overlay-btn"),this.showDiffButton.setToolTip(Autodesk.Viewing.i18n.translate("Show Differences")),this.showDiffButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE),this.showDiffButton.setDisplay("block"),this.viewerToolbarDiffGroup.addControl(this.showDiffButton),this.toolbarControls.sideBySideButton=new Autodesk.Viewing.UI.Button("diff-tool-button-sidebyside-diff"),this.toolbarControls.sideBySideButton.setIcon("pixelCompareFont-sidebyside-btn"),this.toolbarControls.sideBySideButton.setToolTip(Autodesk.Viewing.i18n.translate("Side by Side")),this.toolbarControls.sideBySideButton.onClick=this.sideBySideButtonOnClick.bind(this),this.showDiffButton.addControl(this.toolbarControls.sideBySideButton),this.toolbarControls.overlayButton=new Autodesk.Viewing.UI.Button("diff-tool-button-overlay-diff"),this.toolbarControls.overlayButton.setIcon("pixelCompareFont-overlay-btn"),this.toolbarControls.overlayButton.setToolTip(Autodesk.Viewing.i18n.translate("Overlay")),this.toolbarControls.overlayButton.onClick=this.overlayButtonOnClick.bind(this),this.showDiffButton.addControl(this.toolbarControls.overlayButton),this.extension.getDiffMode()===u.SIDE_BY_SIDE?this.toolbarControls.sideBySideButton.onClick():this.toolbarControls.overlayButton.onClick(),this.toolbarControls.showPanelButton=new Autodesk.Viewing.UI.Button("diff-tool-button-changes"),this.toolbarControls.showPanelButton.setIcon("pixelCompareFont-panel-btn"),this.toolbarControls.showPanelButton.onClick=this.showPanelOnClick.bind(this),this.toolbarControls.showPanelButton.setToolTip(Autodesk.Viewing.i18n.translate("Close Panel")),this.toolbarControls.showPanelButton.setState(Autodesk.Viewing.UI.Button.State.ACTIVE),this.viewerToolbarDiffGroup.addControl(this.toolbarControls.showPanelButton),this.toolbarControls.exitButton=new Autodesk.Viewing.UI.Button("diff-tool-button-exit"),this.toolbarControls.exitButton.setIcon("pixelCompareFont-exit-compare-btn"),this.toolbarControls.exitButton.setToolTip(Autodesk.Viewing.i18n.translate("Exit comparing")),this.toolbarControls.exitButton.onClick=this.exitButtonOnClick.bind(this),this.viewerToolbarDiffGroup.addControl(this.toolbarControls.exitButton)}}])&&g(t.prototype,i),n&&g(t,n),e}();function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=_(e);if(t){var o=_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return E(this,i)}}function E(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}y.GlobalManagerMixin.call(b.prototype);var I=Autodesk.Viewing.Private.ShaderPass,S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(a,Autodesk.Viewing.Extension);var t,i,n,o=k(a);function a(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return w(this,a),(t=o.call(this,e,i)).viewer=e,t.options=i,t.mainModel=null,t.secondaryModel=null,t.secondaryRenderContext=null,t.mainModelVisibilityBackup=!1,t.secondaryModelVisibilityBackup=!1,t.splitPosition=p.SPLIT_LINE_POSITION,t.splitLineWidth=p.SPLIT_LINE_WIDTH,t.splitLineColor=new THREE.Color(p.SPLIT_LINE_COLOR),t.duration=p.ANIMATION_DURATION,t.transitionVal=0,t.changeOffsetMode=!1,t.diffMode=i.diffMode,t.defaultDiffMode=p.DEFAULT_DIFF_MODE,t.colorIntensity=1,t.modelHiddenMap={},t.tool=new A(x(t)),t.viewer.config.headlessViewer||(t.compareUI=new b(x(t))),t.diffPass=new I(d),t.renderer=t.viewer.impl.renderer(),t.glrenderer=t.viewer.impl.glrenderer(),t.frustum=new Autodesk.Viewing.Private.FrustumIntersector,t.renderSecondaryModelBinded=t.renderSecondaryModel.bind(x(t)),t.initDiffBinded=t.initDiff.bind(x(t)),t.onResizeBinded=t.onResize.bind(x(t)),t}return t=a,(i=[{key:"getModel",value:function(e){return"number"==typeof e?this.viewer.impl.findModel(e,!0):e}},{key:"compareTwoModels",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.getModel(e)===this.mainModel&&this.getModel(t)===this.secondaryModel||this.deactivate().then((function(){i.mainModel=i.getModel(e),i.secondaryModel=i.getModel(t),i.mainModelInfo=n,i.secondaryModelInfo=o,i.activate()}))}},{key:"unload",value:function(){return this.deactivate(),!0}},{key:"activate",value:function(){return this.mainModel&&this.secondaryModel?this.isActive()?void 0:(this.initDiff(),this.viewer.toolController.registerTool(this.tool),this.viewer.toolController.activateTool(this.tool.getName()),!0):(console.warn("Pixel Compare requires two models. Use compareTwoModels and supply the models."),!1)}},{key:"deactivate",value:function(){var e=this;return this.isActive()?new Promise((function(t){e.exitPreviousDiffMode((function(){e.activeStatus=!1,e.diffMode=null,e.viewer.impl.setPlacementTransform(e.secondaryModel,e.secondaryModelTransformBackup),e.mainModelVisibilityBackup||e.viewer.hideModel(e.mainModel),e.options.restoreModelVisibilityOnExit&&e.secondaryModelVisibilityBackup&&e.viewer.showModel(e.secondaryModel),e.viewer.toolController.deregisterTool(e.tool),e.viewer.removeEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT,e.renderSecondaryModelBinded),e.viewer.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT,e.onResizeBinded),e.clearColorTopBackup&&e.clearColorBottomBackup&&e.viewer.setBackgroundColor(e.clearColorTopBackup.x,e.clearColorTopBackup.y,e.clearColorTopBackup.z,e.clearColorBottomBackup.x,e.clearColorBottomBackup.y,e.clearColorBottomBackup.z),e.viewer.impl.toggleSwapBlackAndWhite(e.swapBlackAndWhiteBackup),e.cleanRenderContext(),e.invalidate(),e.compareUI&&e.compareUI.destroyUI(),e.mainModel=null,e.secondaryModel=null,e.secondaryModelTransformBackup=null,e.mainModelInfo=null,e.secondaryModelInfo=null,e.modelHiddenMap={},e.viewer.dispatchEvent({type:h.DIFF_TOOL_DEACTIVATED}),t()}))})):Promise.resolve()}},{key:"isModelVisible",value:function(e){return!!this.viewer.impl.findModel(e.id)}},{key:"alignSecondaryModel",value:function(){var e=this.mainModel.getBoundingBox(!1,!0),t=this.secondaryModel.getBoundingBox(!1,!0);this.modelsRatio=e.size().divide(t.size());var i=(new THREE.Matrix4).makeTranslation(-t.min.x,-t.min.y,0),n=(new THREE.Matrix4).makeScale(this.modelsRatio.x,this.modelsRatio.y,this.modelsRatio.y),o=(new THREE.Matrix4).makeTranslation(e.min.x,e.min.y,0),a=this.secondaryModel.getPlacementTransform(),r=o.multiply(n).multiply(i).multiply(a);this.viewer.impl.setPlacementTransform(this.secondaryModel,r)}},{key:"initDiff",value:function(){this.viewer.impl.modelQueue().getModels().concat(this.viewer.impl.modelQueue().getHiddenModels()).some((function(e){return!e.isLoadDone()}))?this.viewer.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,this.initDiffBinded,{once:!0}):(this.activeStatus=!0,this.mainModelVisibilityBackup=this.isModelVisible(this.mainModel),this.secondaryModelVisibilityBackup=this.isModelVisible(this.secondaryModel),this.mainModelVisibilityBackup||this.viewer.showModel(this.mainModel),this.secondaryModelVisibilityBackup&&this.viewer.hideModel(this.secondaryModel),this.secondaryModelTransformBackup=this.secondaryModel.getPlacementTransform().clone(),this.alignSecondaryModel(),this.clearColorTopBackup=this.viewer.impl.clearColorTop.clone().multiplyScalar(255),this.clearColorBottomBackup=this.viewer.impl.clearColorBottom.clone().multiplyScalar(255),(this.mainModel.getMetadata("page_dimensions","hide_paper")||this.secondaryModel.getMetadata("page_dimensions","hide_paper"))&&this.viewer.setBackgroundColor(255,255,255,255,255,255),this.setDiffMode(this.diffMode||this.defaultDiffMode),this.swapBlackAndWhiteBackup=this.viewer.impl.swapBlackAndWhite,this.viewer.impl.toggleSwapBlackAndWhite(!1),this.compareUI&&this.compareUI.createUI(),this.viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT,this.renderSecondaryModelBinded),this.viewer.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT,this.onResizeBinded))}},{key:"renderDiff",value:function(){var e=this.glrenderer.getPixelRatio(),t={x:1/(this.viewer.canvas.clientWidth*e),y:1/(this.viewer.canvas.clientHeight*e)};this.diffPass.uniforms.texture1.value=this.renderer.getColorTarget(),this.diffPass.uniforms.diffMode.value=f[this.diffMode],this.diffPass.uniforms.splitPosition.value=this.splitPosition,this.diffPass.uniforms.splitLineWidth.value=this.splitLineWidth/this.viewer.getCamera().clientWidth,this.diffPass.uniforms.splitLineColor.value=this.splitLineColor,this.diffPass.uniforms.t.value=this.transitionVal,this.diffPass.uniforms.resolution.value=t,this.diffPass.uniforms.colorIntensity.value=this.colorIntensity,this.diffPass.uniforms.mainModelHidden.value=this.modelHiddenMap[0],this.diffPass.uniforms.secondaryModelHidden.value=this.modelHiddenMap[1],this.modelHiddenMap[1]?this.diffPass.uniforms.visibleModelBounds.value=this.getModelNormalizedProjectedBounds(this.mainModel):this.modelHiddenMap[0]&&(this.diffPass.uniforms.visibleModelBounds.value=this.getModelNormalizedProjectedBounds(this.secondaryModel)),this.renderer.presentBuffer(this.diffPass)}},{key:"hideAllModels",value:function(){var e=this;this.viewer.getVisibleModels().forEach((function(t){e.viewer.hideModel(t.id)}))}},{key:"cleanRenderContext",value:function(){this.secondaryRenderContext&&this.secondaryRenderContext.cleanup(),this.secondaryRenderContext=null}},{key:"getModelNormalizedProjectedBounds",value:function(e){var t=e.getBoundingBox(!1,!0),i=this.worldToClient(t.min),n=this.worldToClient(t.max);return new THREE.Vector4(i.x,i.y,n.x,n.y)}},{key:"worldToClient",value:function(e){var t=this.viewer.getCamera(),i=e.clone().project(t);return new THREE.Vector3((i.x+1)/2,(i.y+1)/2,0)}},{key:"onResize",value:function(){this.cleanRenderContext()}},{key:"renderSecondaryModel",value:function(){var e=this,t=this.viewer.impl.getCanvasBoundingClientRect(),i=this.glrenderer.getPixelRatio(),n=t.width*i,o=t.height*i,a={returnAsTarget:!0,models:[this.secondaryModel],renderContext:this.secondaryRenderContext,dontWaitForLeafletTiles:!0};if(this.secondaryModel.isLeaflet()){var r=this.viewer.getCamera();this.frustum.reset(r),this.secondaryModel.getIterator().reset(this.frustum,r)||this.invalidate()}Autodesk.Viewing.ScreenShot.getScreenShot(n,o,(function(t,i){e.diffPass.uniforms.texture2.value=i,e.secondaryRenderContext=t,e.renderDiff()}),a,this.viewer.impl)}},{key:"invalidate",value:function(){this.viewer.impl.invalidate(!0,!0,!1)}},{key:"setSplitPosition",value:function(e){this.splitPosition=e,this.invalidate()}},{key:"getSplitPosition",value:function(){return this.splitPosition}},{key:"setDiffMode",value:function(e){var t=this;this.isActive()?this.diffMode===e&&0!==this.transitionVal||this.exitPreviousDiffMode((function(){t.enterNewDiffMode(e)})):console.warn("Pixel Compare is not active.")}},{key:"exitPreviousDiffMode",value:function(e,t){var i=this;t||null===this.diffMode||void 0===this.diffMode?(this.transitionVal=0,e()):Autodesk.Viewing.Private.fadeValue(this.transitionVal,0,this.duration,(function(e){i.transitionVal=e,i.invalidate()}),e)}},{key:"enterNewDiffMode",value:function(e,t){var i=this;this.diffMode=e,this.viewer.dispatchEvent({type:h.DIFF_TOOL_DIFF_MODE_CHANGED,newDiffMode:this.diffMode}),t&&(this.transitionVal=1,this.invalidate()),e===u.SIDE_BY_SIDE&&(this.changeMainModelVisibility(!0),this.changeSecondaryModelVisibility(!0)),Autodesk.Viewing.Private.fadeValue(this.transitionVal,1,this.duration,(function(e){i.transitionVal=e,i.invalidate()}))}},{key:"getDiffMode",value:function(){return this.diffMode}},{key:"setSplitLineWidth",value:function(e){this.splitLineWidth=e,this.invalidate()}},{key:"setSplitLineColor",value:function(e){this.splitLineColor=new THREE.Color(e),this.invalidate()}},{key:"setChangeOffsetMode",value:function(e){this.changeOffsetMode=e}},{key:"resetOffset",value:function(){this.alignSecondaryModel()}},{key:"changeColorIntensity",value:function(e){this.colorIntensity=e,this.invalidate()}},{key:"translateSecondaryModel",value:function(e){var t=(new THREE.Matrix4).makeTranslation(e.x,e.y,0),i=this.secondaryModel.getPlacementTransform().clone();this.viewer.impl.setPlacementTransform(this.secondaryModel,t.multiply(i))}},{key:"changeModelVisibility",value:function(e,t){(t||this.getDiffMode()!==u.SIDE_BY_SIDE)&&(this.modelHiddenMap[e]=!t,!t&&this.modelHiddenMap[1-e]&&this.changeModelVisibility(1-e,!0),this.viewer.dispatchEvent({type:h.DIFF_TOOL_MODEL_VISIBILITY_CHANGED}),this.invalidate())}},{key:"changeMainModelVisibility",value:function(e){this.changeModelVisibility(0,e)}},{key:"changeSecondaryModelVisibility",value:function(e){this.changeModelVisibility(1,e)}},{key:"getMainModelVisibility",value:function(){return!this.modelHiddenMap[0]}},{key:"getSecondaryModelVisibility",value:function(){return!this.modelHiddenMap[1]}}])&&M(t.prototype,i),n&&M(t,n),a}(),P=AutodeskNamespace("Autodesk.Viewing.PixelCompare");P.DIFF_MODES=Object.assign({},u),P.EVENTS=Object.assign({},h),Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.Viewing.PixelCompare",S)}});
//# sourceMappingURL=PixelCompare.min.js.map