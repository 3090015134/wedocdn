/*!
 * LMV v7.37.0
 * 
 * Copyright 2021 Autodesk, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 * 
 * Autodesk Forge Viewer Usage Limitations:
 * 
 * The Autodesk Forge viewer can only be used to view files generated by
 * Autodesk Forge services. The Autodesk Forge Viewer JavaScript must be
 * delivered from an Autodesk hosted URL.
 */
Autodesk.Extensions.webVR=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=670)}({4:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=(a=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[n].concat(i).concat([r]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},418:function(e,t,n){var o=n(419);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(5)(o,r);o.locals&&(e.exports=o.locals)},419:function(e,t,n){(e.exports=n(4)(!1)).push([e.i,'.adsk-icon-webvr{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAc1JREFUSA3tVL2KwkAQnsSgpYKCtaIgCNaCja0gYiHY6Qv4BsFnsLLwFawsLSy0VBQbLQT/CxFEsFIUdW4ndy4uGy9y3jWHAyH5Zr6ZyXyzCcDbLBRQWBwtOC+FtUwmA4lEAhB/t4+qqrDb7QA6nQ6r/XemvjT/E8kqe/cnaD+nmE5wOByg2+3CcDi0rEw6t9ttmEwm5lwWFBawXq8xlUqh3W5Hp9OJuq7j6XQSODcwGAwwGo2ipmno9XqxUqncQvxO3Tmgh2KxSJrxy2azYaPREDgErtcrZrNZzqMct9uNo9FI4EoSTadTYdTL5QKr1UrwEWANYLFYCP7tdgubzUbwSQ3ou3A4HJwUCAQgFosZ+Hw+AxUhY5MBce8tHo9DOBy+d4EkEY1erVYxnU5jPp/HXq9njMyWiblcDkOhEJZKJcN3PB6xXC5jMpnEQqGAs9lMkIeA1EBifDlogezVjMvlciEt+BmTJBLn+0Skd61W4yE6mvV6nePvHlTS0sqWyyX0+32B1mw2BfwIaOPxGCKRyMOfnaIo0Gq1gH0fQg1qyI4k+P1+01zK2+/3oHg8HvT5fKYkqkjE+XwuHT+KBYNBYPswzb01IN7b/rkCH+c1AQdiGKHcAAAAAElFTkSuQmCC");background-repeat:no-repeat;background-position:center}.webvr-polyfill-fullscreen-wrapper canvas{width:100% !important;height:100% !important}\n',""])},5:function(e,t,n){var o,r,i={},a=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},c=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var o=s.call(this,e,n);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}}(),l=null,u=0,d=[],p=n(6);function f(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=i[o.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](o.parts[a]);for(;a<o.parts.length;a++)r.parts.push(w(o.parts[a],t))}else{var s=[];for(a=0;a<o.parts.length;a++)s.push(w(o.parts[a],t));i[o.id]={id:o.id,refs:1,parts:s}}}}function h(e,t){for(var n=[],o={},r=0;r<e.length;r++){var i=e[r],a=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};o[a]?o[a].parts.push(s):n.push(o[a]={id:a,parts:[s]})}return n}function g(e,t){var n=c(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=d[d.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=c(e.insertAt.before,n);n.insertBefore(t,r)}}function v(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function m(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var o=function(){0;return n.nc}();o&&(e.attrs.nonce=o)}return b(t,e.attrs),g(e,t),t}function b(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function w(e,t){var n,o,r,i;if(t.transform&&e.css){if(!(i="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=i}if(t.singleton){var a=u++;n=l||(l=m(t)),o=E.bind(null,n,a,!1),r=E.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),g(e,t),t}(t),o=R.bind(null,n,t),r=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),o=T.bind(null,n),r=function(){v(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return f(n,t),function(e){for(var o=[],r=0;r<n.length;r++){var a=n[r];(s=i[a.id]).refs--,o.push(s)}e&&f(h(e,t),t);for(r=0;r<o.length;r++){var s;if(0===(s=o[r]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete i[s.id]}}}};var A,y=(A=[],function(e,t){return A[e]=t,A.filter(Boolean).join("\n")});function E(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=y(t,r);else{var i=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function T(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function R(e,t,n){var o=n.css,r=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||i)&&(o=p(o)),r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([o],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},6:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},670:function(e,t,n){"use strict";function o(e,t,n,o){var r,i,a,s,c,l=Autodesk.Viewing.Private,u=e.getEyeParameters("left"),d=e.getEyeParameters("right"),p=new THREE.Vector3,f=new THREE.Vector3,h=new THREE.PerspectiveCamera,g=new THREE.PerspectiveCamera,v=10*e.modelScaleFactor,m=null,b=this;function w(e,t,n,o,r){e.matrixWorld.decompose(r.position,r.quaternion,r.scale),o&&r.position.set(0,0,0),r.translateOnAxis(n?p:f,v),r.projectionMatrix.elements=n?t.leftProjectionMatrix:t.rightProjectionMatrix}this.init=function(n,c,h){r=new l.RenderContext,i=n;var g=1.5*b.getWindow().devicePixelRatio;a=2*e.getEyeParameters("left").renderWidth/g,s=e.getEyeParameters("right").renderHeight/g,this.settings=r.settings,r.init(i,a,s),p.fromArray(u.offset),f.fromArray(d.offset),m=new VRFrameData,t.worldup&&1==t.worldup.z&&(o.webVR_orbitModel=!1)},this.modeFusion=function(n){var o=new THREE.Vector3(0,0,1);o.applyQuaternion((new THREE.Quaternion).fromArray(n.orientation)).multiplyScalar(2.1*v),t.position.set(o.x,o.y,o.z),t.lookAt(e.target),t.up.set(0,1,0)},this.modeWalkthrough=function(e){e.orientation&&0!=e.orientation[1]&&t.quaternion.fromArray(e.orientation),e.position&&0!=e.position[0]&&t.position.fromArray(e.position).multiplyScalar(v),t.worldup&&1==t.worldup.z&&(t.quaternion.setFromAxisAngle(new THREE.Vector3(1,0,0),Math.PI/2),t.quaternion.multiply((new THREE.Quaternion).fromArray(e.orientation)),e.position&&0!=e.position[0]&&t.position.set(t.position.x,-t.position.z,t.position.y));var n=new THREE.Vector3(0,0,-1);n.applyQuaternion(t.quaternion),t.target=t.position.clone().add(n.clone().multiplyScalar(10))},this.updateCamera=function(){if(e&&e._isPresenting&&(e.depthNear=t.near,e.depthFar=t.far,e.getFrameData(m),(c=m.pose).orientation))return o.webVR_orbitModel?this.modeFusion(c):this.modeWalkthrough(c),t.updateMatrixWorld(),t.dirty=!0,w(t,m,!0,!1,h),w(t,m,!1,!1,g),n&&(n.camera=t.clone(),n.camera.position.set(0,0,0),w(t,m,!0,!0,n.cameraL),w(t,m,!1,!0,n.cameraR)),{L:h,R:g,C:t}},this.beginScene=function(e,n,o,i){r.beginScene(e,t,o,i)},this.renderScenePart=function(e,t,o,c,l){var u=a/2;i.setViewport(0,0,u,s),r.setCamera(h),r.renderScenePart(e,!0,!1,!1,!1),i.setViewport(u,0,u,s),r.setCamera(g),r.renderScenePart(e,!0,!1,!1,!1),n&&(i.setViewport(0,0,u,s),r.setCamera(n.cameraL),r.renderScenePart(n.scene,!0,!1,!1,!1),i.setViewport(u,0,u,s),r.setCamera(n.cameraR),r.renderScenePart(n.scene,!0,!1,!1,!1)),i.setViewport(0,0,a,s)},this.sceneDirty=function(e,t){r.sceneDirty(e,t)},this.endScene=function(){r.endScene()},this.clearAllOverlays=function(){},this.renderOverlays=function(e){},this.composeFinalFrame=function(t,n){r.composeFinalFrame(!0,n),e._isPresenting&&e.submitFrame()},this.cleanup=function(){r.cleanup()},this.setSize=function(e,t,n){a=e,s=t,r.setSize(a,s,n)},this.getMaxAnisotropy=function(){return r.getMaxAnisotropy()},this.hasMRT=function(){return r.hasMRT()},this.initPostPipeline=function(e,t,n){r.initPostPipeline(!1,!1,!1)},this.setClearColors=function(e,t){r.setClearColors(e,t)},this.setAOOptions=function(e,t){r.setAOOptions(e,t)},this.getAORadius=function(){return r.getAORadius()},this.getAOIntensity=function(){return r.getAOIntensity()},this.setTonemapExposureBias=function(e){r.setTonemapExposureBias(e)},this.getExposureBias=function(){return r.getExposureBias()},this.setTonemapMethod=function(e){r.setTonemapMethod(e)},this.getToneMapMethod=function(){return r.getToneMapMethod()},this.toggleTwoSided=function(e){r.toggleTwoSided(e)},this.enter2DMode=function(){var e;(e=r).enter2DMode.apply(e,arguments)},this.getAOEnabled=function(){return!1},this.idAtPixel=function(e,t){return 0},this.setHighlightLights=function(e){},this.setStencilEnabled=function(e){},this.setEdgeColor=function(e){},this.overlayUpdate=function(e){r.overlayUpdate(e)},this.rolloverObjectViewport=function(e,t){},this.screenCapture=function(){return console.warn("Screen capture not implemented by stereo render context"),null},this.setUnitScale=function(e){r.setUnitScale(e)},this.getUnitScale=function(){return r.getUnitScale()},this.getColorTarget=function(){return null}}function r(e){var t,n,o,r;this.init=function(e){if(!t){var o=Autodesk.Viewing.Private.getResourceUrl,r=THREE.ImageUtils;r.crossOrigin="anonymous";var i=["back.png","zoomin.png","zoomout.png","next.png"];t=new THREE.Object3D,n=new THREE.Object3D;var a=new THREE.Object3D;a.position.set(0,-12,-14),a.rotateX(-.6);for(var s=0;s<i.length;s++){var c=u("res/webvr/"+i[s],2,1);c.position.set(2*(s-i.length/2),0,.1),c.scale.set(.94,.94,.1),a.add(c)}var l=u("res/webvr/bg.png",48,.1);a.add(l),n.add(a),t.add(n),t.visible=!0,e.add(t)}function u(e,t,n){return new THREE.Mesh(new THREE.PlaneBufferGeometry(t,1),new THREE.MeshBasicMaterial({map:r.loadTexture(o(e)),color:16777215,side:THREE.DoubleSide,depthTest:!1,transparent:!0,opacity:n}))}},this.onVisible=function(e){n.rotation.y=e.rotation._z,o=-t.quaternion.y},this.update=function(e){var n=e.quaternion.clone().inverse();t.quaternion.copy(n);var i=t.visible;t.visible=t.quaternion.x>.26&&t.quaternion.x<.4,!i&&t.visible&&this.onVisible(e),r>=0&&r<4&&t.children[0].children[0].children[r].material.color.setHex(16777215),(r=Math.floor(4.54*(o+t.quaternion.y+.14)*4))>=0&&r<4&&t.children[0].children[0].children[r].material.color.setHex(11184895)},this.onClick=function(){}}function i(e,t,n,o){var r,i;this.init=function(e){(r=new THREE.Object3D).scale.set(.25,.25,1),r.add(new THREE.Mesh(new THREE.RingGeometry(.6,1,32,32),new THREE.MeshBasicMaterial({color:11141154,depthTest:!1,side:THREE.DoubleSide}))),e.add(r)},this.update=function(t,o){var a;(i=e.hitTestViewport(new THREE.Vector3,!1))?(r.children[0].material.color.setHex(8874),a=i.intersectPoint.clone().sub(t.position).length()):(r.children[0].material.color.setHex(11141154),a=.5*(t.far-t.near));var s=new THREE.Matrix4;s.extractRotation(o.camera.matrixWorld);var c=new THREE.Vector3(0,0,-1);(c=s.multiplyVector3(c)).multiplyScalar(a),r.scale.set(n,n,n),r.position.copy(c),r.lookAt(o.camera.position)},this.onClick=function(){if(i){var e=i.intersectPoint;i.face.normal;o?e.z+=5:e.y+=5;var n=t.getCurrentView();n.position.copy(e),n.center.set(e.x+1e-6,e.y,e.z),n.pivot.set(e.x,e.y,e.z),t.goToView(n)}}}n.r(t),n.d(t,"VRExtension",(function(){return c})),Autodesk.Viewing.GlobalManagerMixin.call(o.prototype);var a=Autodesk.Viewing;function s(e,t,n){this.setGlobalManager(e.globalManager);var s,c,l=e.canvas,u=e.navigation,d=u.getCamera(),p=Autodesk.Viewing.Private,f={webVR_cursor:p.isExperimentalFlagEnabled("webVR_cursor",t.options),webVR_menu:p.isExperimentalFlagEnabled("webVR_menu",t.options),webVR_orbitModel:p.isExperimentalFlagEnabled("webVR_orbitModel",t.options)},h=["vr"],g=!1,v=!1,m=this;this.activate=function(t){g=!0,e.impl.toggleGroundShadow(!1),e.impl.toggleGroundReflection(!1),u.toPerspective(),u.setVerticalFov(75,!0),u.setRequestFitToView(!0);var r=e.model.getBoundingBox().size();if(n.target=e.model.getBoundingBox().center(),u.setPivotPoint(n.target,!0,!0),u.setView(d.position,n.target),u.setCameraUpVector(new THREE.Vector3(0,1,0)),n.modelScaleFactor=Math.max(Math.min(Math.min(r.x,r.y),r.z)/10,1e-4),n._isPresenting=a.isMobileDevice(),n.requestPresent([{source:l}]).then((function(){e.impl.setLmvDisplay(n),n._isPresenting=!0})),n.resetPose(),a.isMobileDevice()){b(!1),e.setScreenMode(Autodesk.Viewing.ScreenMode.kFullScreen),l.addEventListener("dblclick",(function(){g&&e.setActiveNavigationTool()}))}(f.webVR_cursor||f.webVR_menu)&&(c=this.initHUD()),(s=new o(n,d,c,f)).setGlobalManager(this.globalManager),e.impl.setUserRenderContext(s)},this.initHUD=function(){var t=new THREE.Scene,o=d.clone();if(f.webVR_menu){var a=new r(n.modelScaleFactor);a.init(t)}if(f.webVR_cursor){var s=d.worldup&&1==d.worldup.z,c=new i(e.impl,e.autocam,n.modelScaleFactor,s);c.init(t),l.addEventListener("click",c.onClick)}return{scene:t,camera:o,cameraL:o.clone(),cameraR:o.clone(),menu:a,cursor:c,IPD:1.2}},this.update=function(t){if(!n)return!0;v&&!n.isPresenting&&g&&e.setActiveNavigationTool(),v=n.isPresenting;var o=s.updateCamera();return!c||(f.webVR_cursor&&c.cursor.update(o.C,c),f.webVR_menu&&c.menu.update(c.camera),!0)},this.deactivate=function(t){n&&(n.isPresenting&&n.exitPresent(),n._isPresenting=!1),g=!1,b(!0),e.impl.setUserRenderContext(null),e.setScreenMode(Autodesk.Viewing.ScreenMode.kNormal),e.resize(e.canvas.clientWidth,e.canvas.clientHeight),e.autocam.resetHome(),c&&f.webVR_cursor&&l.removeEventListener("click",c.cursor.onClick)};var b=function(t){e.getExtension("Autodesk.ViewCubeUi",(function(e){e.setVisible(t),e.displayViewCube(t&&!a.isMobileDevice())}));var n=m.getDocument().getElementsByClassName("adsk-toolbar");n.length>0&&""!==n[0]&&(n[0].style.display=t?"block":"none")};this.isActive=function(){return g},this.getNames=function(){return h},this.getName=function(){return h[0]}}a.GlobalManagerMixin.call(s.prototype);n(418);function c(e,t){Autodesk.Viewing.Extension.call(this,e,t),this.name="webvr"}c.populateDefaultOptions=function(e){e.experimental.push("--webVR_orbitModel"),e.experimental.push("--webVR_cursor"),e.experimental.push("--webVR_menu")},c.prototype=Object.create(Autodesk.Viewing.Extension.prototype),c.prototype.constructor=c;var l=c.prototype;l.load=function(){return!0},l.onToolbarCreated=function(e){var t=this,n=null,o=Autodesk.Viewing.Private;o.loadDependency("VRFrameData","webvr-polyfill.min.js",(function(){navigator.getVRDisplays().then((function(e){if(e.length>0&&(n=e[0]).capabilities.canPresent){var r=t.viewer,i=r.getToolbar(),a=Autodesk.Viewing.UI;return t.tool=new s(r,t,n),r.toolController.registerTool(t.tool),t.createUI(i),t.onToolChanged=function(e){var n="vr"===e.toolName&&e.active?a.Button.State.ACTIVE:a.Button.State.INACTIVE;t.vrToolButton&&t.vrToolButton.setState(n)},void r.addEventListener(Autodesk.Viewing.TOOL_CHANGE_EVENT,t.onToolChanged)}o.logger.warn("Attempted to load WebVR extension, but WebVR is not supported.")}))}))},l.createUI=function(e){var t=this,n=(this.viewer,Autodesk.Viewing.UI),o=e.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);this.vrToolButton=new n.Button("toolbar-vrTool"),this.vrToolButton.setGlobalManager(this.globalManager),this.vrToolButton.setToolTip("Enable VR mode"),this.vrToolButton.setIcon("adsk-icon-webvr"),this.vrToolButton.onClick=function(e){var o=t.vrToolButton.getState();o===n.Button.State.INACTIVE?t.activate():o===n.Button.State.ACTIVE&&t.deactivate()};var r=o.getControl("toolbar-cameraSubmenuTool");r?o.addControl(this.vrToolButton,{index:o.indexOf(r.getId())}):o.addControl(this.vrToolButton)},l.unload=function(){var e=this.viewer;return this.onToolChanged&&(e.removeEventListener(Autodesk.Viewing.TOOL_CHANGE_EVENT,this.onToolChanged),this.onToolChanged=void 0),e.getToolbar()&&this.vrToolButton&&this.vrToolButton.removeFromParent(),this.vrToolButton=null,this.tool&&(e.toolController.deregisterTool(this.tool),this.tool=null),!0},l.activate=function(){return this.activeStatus||(this.viewer.setActiveNavigationTool("vr"),this.activeStatus=!0),!0},l.deactivate=function(){return this.activeStatus&&(this.viewer.setActiveNavigationTool(),this.activeStatus=!1),!0},Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.Viewing.WebVR",c)}});
//# sourceMappingURL=webVR.min.js.map